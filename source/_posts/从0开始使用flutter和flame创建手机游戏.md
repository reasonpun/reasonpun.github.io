---
title: 从0开始使用flutter和flame创建手机游戏
date: 2022-01-31 09:02:04
tags:
---
为啥要做游戏开发呢？
不得不承认，游戏是一个非常让人着迷的活动（孩子们不要沉迷哟）。
我很喜欢玩游戏，虽然不是非常非常痴迷，但是也因此入手了好几部游戏机，其实我一直心心念念的向入手一部小霸王（此处可以认为是软广，小霸王不要忘了给我广告费，哈哈）红白机，和我的孩子一起怀念一下我小时候的快乐。
你们是不是也有这样的情愫呢？

游戏之所以这么吸引人，也许是因为，他可以从简单和线性的游戏玩法到真正复杂的涉及 3D、几乎真实的物理引擎、逼真的图形、程序生成的世界以及适应玩家选择的故事情节。

有很多很多的人，肯定都像木辛老师一样，想做出属于自己的精美、好玩的游戏。如果你在这一群人里边，那么恭喜你，本篇内容将带领你入门一款经典的游戏引擎。不过，本篇更多的关注的是理论知识，暂时没有涉猎实际开发效果，也并没有讲到如何发布游戏。所以，如果你想巩固游戏开发过程中的理论知识，建议你好好读读这篇文章哈。

编写过程中难免会有纰漏，如果恰巧您发现了这些问题，可以给我留言或者私信告诉我，我会以最快的速度修正，再次非常感谢！

## 阅前必备技能
本文将假设您已经是一名开发人员，并且对开发软件的概念有扎实的掌握。
当然了，如果您是新手，那也没有关系，只要您对游戏开发有足够的兴趣，这也是可以的。

虽然，兴趣是第一老师，是催动你进步的助力，但是这还不算准备就绪。开始游戏，你还需要一台电脑，足够让你配置好开发所需要的环境，以便于可以编写和编译代码。
更好一些的，如果你恰巧配备了一台Android手机，那么你就可以在其上进行软件的测试和实际的使用体验啦。
SO，欲善其事，先来利其器吧！

使用Flutter编写的程序可以被编译和构建在Android手机和iOS手机上边。
Android手机用的十分广泛，所以本章节会主要以Android手机为例，你可以通过准备的Android设备进行开发和调试，一旦你完成了这个程序，就可以很轻易的通过不同的构建命令实现iOS设备上的运行。

再一次假设，你已经顺利完成了如下步骤：

1. Microsoft Visual Studio Code：使用任何IDE或者文本编辑工具都可以编写程序，当然了，如果你是一个新手，那么强烈推荐你使用VSCode，它将会给你带来一个与众不同的感觉。
一定要从官网下载软件哟，否则一不小心下载到流氓软件就不好了。
还有一件挺重要的事情，安装好VScode之后可以安装一下Flutte和Dart的插件，虽然这个不是必须要的，但是配置好了以后，对你的开发工作会有很大的帮助。

如下两个准备，必须要做，一定要做，不得不做吖。
Android SDK：如果你想编写Android程序的话，这个一定要有。
如果你觉得一步步地配置太麻烦，也可以直接下载Android Studio开发工具，这样就可以一键完成所有配置。
当然了，也有一些同学不想安装这个“巨大”的工具，指向最小化安装，那么你只需要安装SDK就可以啦。
接下来的这个“装备”，你是必须、必须、必须一定要安装的，否则你就没有办法开发Flutter程序啦！
Flutter SDK/Framework：除了Flutter还有Flame这个插件，这个才是我们今天内容的主角，使用这两个玩意才能最终完成游戏的开发。

## 那么，接下来让我们开始游戏开发之旅吧!

让我们先从一个非常非常简单的开始。
我们这款游戏是这样的，在一整个黑色的屏幕中有一块白色的方块，我们把它放置在屏幕的正中间，当你点击这个白色的方块的时候，它就会变成绿色，这样你就赢了（不要太简单啦）。

我们暂时先不用比较复杂的元素，所以，在这个游戏中我么不会使用图片文件什么的。

所以，现在正式开始！

## 第一步，创建一个Flutter程序项目
Open up a terminal (command line interface) and navigate to your projects directory. Once there, type the following command:
打开终端（就是计算机中可以输入命令行的东东），并且定位到你要创建的项目目录下，然后执行如下命令：

```
$ flutter create boxgame
```

此命令使用 Flutter 命令行工具为您初始化和引导一个基本的移动应用程序。

如果需要，您可以选择除 boxgame 以外的任何名称。只需确保将所有 boxgame 实例替换为您在后续操作中使用的任何内容。

此时，您可以在 Visual Studio Code 中打开生成的 boxgame 文件夹，也可以使用以下命令立即运行您的应用程序：

```
$ cd boxgame
$ flutter run
```

第一次运行新创建的应用程序可能需要一段时间。当移动应用程序运行时，您应该会看到如下内容：

{% asset_img 1.png 第一次运行新项目 %}

## 第二步：安装Flame插件并且清理一下项目

```
注意：从这里开始，我们将项目目录称为 ./。如果你的游戏项目在 ~/boxgame 中，./lib/main.dart 指的是 ~/boxgame/lib/main.dart 中的文件。
```

启动 Visual Studio Code 并打开上一步创建的 boxgame 目录。

由于我们将使用简单而强大的 Flame 插件，因此我们需要将其添加到我们的应用程序将依赖的 Dart 包列表中。在 IDE 的左侧，您将看到项目文件夹中的文件列表。打开 ./pubspec.yaml 并在依赖项下的 cupertino_icons 行下方添加以下行（注意缩进）。

```
flame: ^1.0.0
```

你应该会看到像我这里差不多的样子：

{% asset_img 2.png VSC打开的样子 %}

如果您使用的是 Visual Studio Code，IDE 将在保存文件时自动为您安装插件。

您可以通过打开终端、导航到项目文件夹并运行 flutter packages get 来手动完成。

下一步是清理主代码，删除掉Flutter 项目中./lib/main.dart 文件中所有内容，并将其替换为空程序。

空程序只有一行：void main() {}。

您会注意到的一件事是，我们将 import 语句留在了顶部。我们将在稍后启动游戏时运行 runApp 方法时使用material库。您现在应该有如下所示的内容：

{% asset_img 3.png 清空主程序的样子 %}

另一件事是 ./test 文件夹中的文件显示错误。如果您没有使用 Visual Studio Code，这可能不会显示，但您的应用程序将不会运行。

测试（和测试驱动的开发）超出了本教程的范围，所以要解决这个问题，只需删除整个测试文件夹。

