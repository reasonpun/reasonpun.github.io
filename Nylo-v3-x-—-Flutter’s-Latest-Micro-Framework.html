<!DOCTYPE html><html lang="zh-CN"><head><meta charset="UTF-8"><meta name="viewport" content="width=device-width"><meta name="theme-color" content="#222"><meta name="generator" content="Hexo 6.3.0"><link rel="apple-touch-icon" sizes="180x180" href="/images/apple-touch-icon-next.png"><link rel="icon" type="image/png" sizes="32x32" href="/images/favicon-32x32-next.png"><link rel="icon" type="image/png" sizes="16x16" href="/images/favicon-16x16-next.png"><link rel="mask-icon" href="/images/logo.svg" color="#222"><link rel="stylesheet" href="/css/main.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free@6.0.0/css/all.min.css" integrity="sha256-jTIdiMuX/e3DGJUGwl3pKSxuc6YOuqtJYkM0bGQESA4=" crossorigin="anonymous"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/animate.css@3.1.1/animate.min.css" integrity="sha256-PR7ttpcvz8qrF57fur/yAx1qXMFJeJFiA6pSzWi0OIE=" crossorigin="anonymous"><script class="next-config" data-name="main" type="application/json">{"hostname":"pangz.fun","root":"/","images":"/images","scheme":"Gemini","darkmode":false,"version":"8.10.1","exturl":false,"sidebar":{"position":"left","display":"post","padding":18,"offset":12},"copycode":false,"bookmark":{"enable":false,"color":"#222","save":"auto"},"mediumzoom":true,"lazyload":false,"pangu":false,"comments":{"style":"tabs","active":null,"storage":true,"lazyload":false,"nav":null},"stickytabs":false,"motion":{"enable":true,"async":false,"transition":{"post_block":"fadeIn","post_header":"fadeInDown","post_body":"fadeInDown","coll_header":"fadeInLeft","sidebar":"fadeInUp"}},"prism":false,"i18n":{"placeholder":"搜索...","empty":"没有找到任何搜索结果：${query}","hits_time":"找到 ${hits} 个搜索结果（用时 ${time} 毫秒）","hits":"找到 ${hits} 个搜索结果"}}</script><script src="/js/config.js"></script><script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-4592202470693653" crossorigin="anonymous"></script><meta name="description" content="Nylo v3.x已经面世，可以帮助你更容易地构建Flutter应用程序。"><meta property="og:type" content="article"><meta property="og:title" content="Nylo v3.x - Flutter的最新微框架"><meta property="og:url" content="https://pangz.fun/Nylo-v3-x-%E2%80%94-Flutter%E2%80%99s-Latest-Micro-Framework.html"><meta property="og:site_name" content="酷学小栈"><meta property="og:description" content="Nylo v3.x已经面世，可以帮助你更容易地构建Flutter应用程序。"><meta property="og:locale" content="zh_CN"><meta property="og:image" content="https://pangz.fun/Nylo-v3-x-%E2%80%94-Flutter%E2%80%99s-Latest-Micro-Framework/1.png"><meta property="og:image" content="https://pangz.fun/Nylo-v3-x-%E2%80%94-Flutter%E2%80%99s-Latest-Micro-Framework/2.png"><meta property="og:image" content="https://pangz.fun/Nylo-v3-x-%E2%80%94-Flutter%E2%80%99s-Latest-Micro-Framework/3.png"><meta property="article:published_time" content="2022-11-03T13:41:16.000Z"><meta property="article:modified_time" content="2025-01-23T09:09:21.802Z"><meta property="article:author" content="木辛念做梓"><meta property="article:tag" content="Flutter"><meta property="article:tag" content="Nylo"><meta name="twitter:card" content="summary"><meta name="twitter:image" content="https://pangz.fun/Nylo-v3-x-%E2%80%94-Flutter%E2%80%99s-Latest-Micro-Framework/1.png"><link rel="canonical" href="https://pangz.fun/Nylo-v3-x-%E2%80%94-Flutter%E2%80%99s-Latest-Micro-Framework.html"><script class="next-config" data-name="page" type="application/json">{"sidebar":"","isHome":false,"isPost":true,"lang":"zh-CN","comments":true,"permalink":"https://pangz.fun/Nylo-v3-x-%E2%80%94-Flutter%E2%80%99s-Latest-Micro-Framework.html","path":"Nylo-v3-x-—-Flutter’s-Latest-Micro-Framework.html","title":"Nylo v3.x - Flutter的最新微框架"}</script><script class="next-config" data-name="calendar" type="application/json">""</script><title>Nylo v3.x - Flutter的最新微框架 | 酷学小栈</title><script async src="https://www.googletagmanager.com/gtag/js?id=G-1HVT1YE421"></script><script class="next-config" data-name="google_analytics" type="application/json">{"tracking_id":"G-1HVT1YE421","only_pageview":false}</script><script src="/js/third-party/analytics/google-analytics.js"></script><link rel="stylesheet" type="text/css" href="/css/injector/main.css"><link rel="preload" as="style" href="/css/injector/light.css"><link rel="preload" as="style" href="/css/injector/dark.css"><noscript><link rel="stylesheet" href="/css/noscript.css"></noscript><style>.github-emoji{position:relative;display:inline-block;width:1.2em;min-height:1.2em;overflow:hidden;vertical-align:top;color:transparent}.github-emoji>span{position:relative;z-index:10}.github-emoji .fancybox,.github-emoji img{margin:0!important;padding:0!important;border:none!important;outline:0!important;text-decoration:none!important;user-select:none!important;cursor:auto!important}.github-emoji img{height:1.2em!important;width:1.2em!important;position:absolute!important;left:50%!important;top:50%!important;transform:translate(-50%,-50%)!important;user-select:none!important;cursor:auto!important}.github-emoji-fallback{color:inherit}.github-emoji-fallback img{opacity:0!important}</style><link rel="alternate" href="/atom.xml" title="酷学小栈" type="application/atom+xml">
</head><body itemscope itemtype="http://schema.org/WebPage" class="use-motion"><div class="headband"></div><main class="main"><header class="header" itemscope itemtype="http://schema.org/WPHeader"><div class="header-inner"><div class="site-brand-container"><div class="site-nav-toggle"><div class="toggle" aria-label="切换导航栏" role="button"><span class="toggle-line"></span> <span class="toggle-line"></span> <span class="toggle-line"></span></div></div><div class="site-meta"><a href="/" class="brand" rel="start"><i class="logo-line"></i><p class="site-title">酷学小栈</p><i class="logo-line"></i></a><p class="site-subtitle" itemprop="description">还要再走500里</p></div><div class="site-nav-right"><div class="toggle popup-trigger"></div></div></div><nav class="site-nav"><ul class="main-menu menu"><li class="menu-item menu-item-home"><a href="/" rel="section"><i class="fa fa-home fa-fw"></i>首页</a></li><li class="menu-item menu-item-about"><a href="/about/" rel="section"><i class="fa fa-user fa-fw"></i>关于</a></li><li class="menu-item menu-item-tags"><a href="/tags/" rel="section"><i class="fa fa-tags fa-fw"></i>标签</a></li><li class="menu-item menu-item-categories"><a href="/categories/" rel="section"><i class="fa fa-th fa-fw"></i>分类</a></li><li class="menu-item menu-item-archives"><a href="/archives/" rel="section"><i class="fa fa-archive fa-fw"></i>归档</a></li><li class="menu-item menu-item-rss"><a href="/atom.xml" rel="section"><i class="fa fa-rss fa-fw"></i>RSS</a></li></ul></nav></div><div class="toggle sidebar-toggle" role="button"><span class="toggle-line"></span> <span class="toggle-line"></span> <span class="toggle-line"></span></div><aside class="sidebar"><div class="sidebar-inner sidebar-nav-active sidebar-toc-active"><ul class="sidebar-nav"><li class="sidebar-nav-toc">文章目录</li><li class="sidebar-nav-overview">站点概览</li></ul><div class="sidebar-panel-container"><div class="post-toc-wrap sidebar-panel"><div class="post-toc animated"><ol class="nav"><li class="nav-item nav-level-4"><a class="nav-link" href="#%E9%A6%96%E5%85%88%EF%BC%8C%E8%AE%A9%E6%88%91%E4%BB%AC%E5%BC%80%E5%A7%8B%E5%90%A7"><span class="nav-number">1.</span> <span class="nav-text">首先，让我们开始吧</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#%E7%AA%81%E5%87%BA%E7%9A%84%E7%89%B9%E7%82%B9"><span class="nav-number">2.</span> <span class="nav-text">突出的特点</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#API%E6%9C%8D%E5%8A%A1"><span class="nav-number">3.</span> <span class="nav-text">API服务</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#%E6%8F%90%E5%87%BAHTTP%E8%AF%B7%E6%B1%82"><span class="nav-number">4.</span> <span class="nav-text">提出HTTP请求</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#%E5%BC%95%E5%85%A5%E6%A8%A1%E5%9E%8B%E8%A7%A3%E7%A0%81%E5%99%A8"><span class="nav-number">5.</span> <span class="nav-text">引入模型解码器</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#%E8%BF%99%E6%98%AF%E6%80%8E%E4%B9%88%E5%81%9A%E5%88%B0%E7%9A%84%EF%BC%9F"><span class="nav-number">6.</span> <span class="nav-text">这是怎么做到的？</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#%E6%B2%A1%E6%9C%89%E6%A8%A1%E5%9E%8B%E8%A7%A3%E7%A0%81%E5%99%A8%E7%9A%84HTTP%E8%AF%B7%E6%B1%82"><span class="nav-number">7.</span> <span class="nav-text">没有模型解码器的HTTP请求</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#%E5%9C%A8%E4%BD%A0%E7%9A%84%E9%A1%B9%E7%9B%AE%E4%B8%AD%E4%BD%BF%E7%94%A8API%E6%9C%8D%E5%8A%A1"><span class="nav-number">8.</span> <span class="nav-text">在你的项目中使用API服务</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#%E6%8B%A6%E6%88%AA%E5%99%A8"><span class="nav-number">9.</span> <span class="nav-text">拦截器</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#%E5%88%9B%E5%BB%BA%E4%B8%80%E4%B8%AA%E6%96%B0%E7%9A%84API%E6%9C%8D%E5%8A%A1"><span class="nav-number">10.</span> <span class="nav-text">创建一个新的API服务</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#%E5%A2%9E%E5%8A%A0%E6%A8%A1%E5%9E%8B%E9%80%89%E9%A1%B9"><span class="nav-number">11.</span> <span class="nav-text">增加模型选项</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#%E5%A2%9E%E5%8A%A0%E4%BA%86URL%E6%A0%87%E5%BF%97"><span class="nav-number">12.</span> <span class="nav-text">增加了URL标志</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#%E5%88%9B%E5%BB%BA%E6%96%B0%E4%BA%8B%E4%BB%B6"><span class="nav-number">13.</span> <span class="nav-text">创建新事件</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#Providers"><span class="nav-number">14.</span> <span class="nav-text">Providers</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#%E5%88%9B%E5%BB%BA%E4%B8%80%E4%B8%AA%E6%96%B0%E7%9A%84provider"><span class="nav-number">15.</span> <span class="nav-text">创建一个新的provider</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#Helpers"><span class="nav-number">16.</span> <span class="nav-text">Helpers</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#%E6%96%B0%E7%BD%91%E7%AB%99"><span class="nav-number">17.</span> <span class="nav-text">新网站</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#%E6%80%BB%E7%BB%93"><span class="nav-number">18.</span> <span class="nav-text">总结</span></a></li></ol></div></div><div class="site-overview-wrap sidebar-panel"><div class="site-author site-overview-item animated" itemprop="author" itemscope itemtype="http://schema.org/Person"><p class="site-author-name" itemprop="name">木辛念做梓</p><div class="site-description" itemprop="description">读万卷书，行万里路，胸中脱去尘浊</div></div><div class="site-state-wrap site-overview-item animated"><nav class="site-state"><div class="site-state-item site-state-posts"><a href="/archives/"><span class="site-state-item-count">110</span> <span class="site-state-item-name">日志</span></a></div><div class="site-state-item site-state-categories"><a href="/categories/"><span class="site-state-item-count">21</span> <span class="site-state-item-name">分类</span></a></div><div class="site-state-item site-state-tags"><a href="/tags/"><span class="site-state-item-count">114</span> <span class="site-state-item-name">标签</span></a></div></nav></div><div class="links-of-blogroll site-overview-item animated"><div class="links-of-blogroll-title"><i class="fa fa-globe fa-fw"></i> Links</div><ul class="links-of-blogroll-list"><li class="links-of-blogroll-item"><a href="https://io-oi.me/" title="https:&#x2F;&#x2F;io-oi.me" rel="noopener" target="_blank">reuixiy</a></li></ul></div></div></div></div></aside><div class="sidebar-dimmer"></div></header><div class="back-to-top" role="button" aria-label="返回顶部"><i class="fa fa-arrow-up"></i> <span>0%</span></div><noscript><div class="noscript-warning">Theme NexT works best with JavaScript enabled</div></noscript><div class="main-inner post posts-expand"><div class="post-block"><article itemscope itemtype="http://schema.org/Article" class="post-content" lang="zh-CN"><link itemprop="mainEntityOfPage" href="https://pangz.fun/Nylo-v3-x-%E2%80%94-Flutter%E2%80%99s-Latest-Micro-Framework.html"><span hidden itemprop="author" itemscope itemtype="http://schema.org/Person"><meta itemprop="image" content="/images/avatar.gif"><meta itemprop="name" content="木辛念做梓"></span><span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization"><meta itemprop="name" content="酷学小栈"><meta itemprop="description" content="读万卷书，行万里路，胸中脱去尘浊"></span><span hidden itemprop="post" itemscope itemtype="http://schema.org/CreativeWork"><meta itemprop="name" content="Nylo v3.x - Flutter的最新微框架 | 酷学小栈"><meta itemprop="description" content=""></span><header class="post-header"><h1 class="post-title" itemprop="name headline">Nylo v3.x - Flutter的最新微框架</h1><div class="post-meta-container"><div class="post-meta"><span class="post-meta-item"><span class="post-meta-item-icon"><i class="far fa-calendar"></i> </span><span class="post-meta-item-text">发表于</span> <time title="创建时间：2022-11-03 21:41:16" itemprop="dateCreated datePublished" datetime="2022-11-03T21:41:16+08:00">2022-11-03</time> </span><span class="post-meta-item"><span class="post-meta-item-icon"><i class="far fa-calendar-check"></i> </span><span class="post-meta-item-text">更新于</span> <time title="修改时间：2025-01-23 17:09:21" itemprop="dateModified" datetime="2025-01-23T17:09:21+08:00">2025-01-23</time> </span><span class="post-meta-item"><span class="post-meta-item-icon"><i class="far fa-folder"></i> </span><span class="post-meta-item-text">分类于</span> <span itemprop="about" itemscope itemtype="http://schema.org/Thing"><a href="/categories/Flutter/" itemprop="url" rel="index"><span itemprop="name">Flutter</span></a> </span></span><span class="post-meta-item" title="阅读次数" id="busuanzi_container_page_pv"><span class="post-meta-item-icon"><i class="far fa-eye"></i> </span><span class="post-meta-item-text">阅读次数：</span> <span id="busuanzi_value_page_pv"></span> </span><span class="post-meta-break"></span> <span class="post-meta-item" title="本文字数"><span class="post-meta-item-icon"><i class="far fa-file-word"></i> </span><span class="post-meta-item-text">本文字数：</span> <span>8.4k</span> </span><span class="post-meta-item" title="阅读时长"><span class="post-meta-item-icon"><i class="far fa-clock"></i> </span><span class="post-meta-item-text">阅读时长 &asymp;</span> <span>8 分钟</span></span></div></div></header><div class="post-body" itemprop="articleBody"><p>Nylo v3.x已经面世，可以帮助你更容易地构建Flutter应用程序。</p><img src="/Nylo-v3-x-%E2%80%94-Flutter%E2%80%99s-Latest-Micro-Framework/1.png" title="示意图 width=400"> <span id="more"></span><p>我很高兴地分享Nylo v3.x终于发布了。<br>这个版本是疯狂的，有一些小的变化，但也有一些大的补充，使开发Flutter应用程序变得轻而易举。</p><h4 id="首先，让我们开始吧"><a href="#首先，让我们开始吧" class="headerlink" title="首先，让我们开始吧"></a>首先，让我们开始吧</h4><p>你可以通过以下方式下载Nylo。</p><ul><li><a target="_blank" rel="noopener" href="https://nylo.dev/">https://nylo.dev</a></li><li>git clone <a target="_blank" rel="noopener" href="https://github.com/nylo-core/nylo.git">https://github.com/nylo-core/nylo.git</a></li></ul><p>打开项目后，构建并运行该应用程序。</p><img src="/Nylo-v3-x-%E2%80%94-Flutter%E2%80%99s-Latest-Micro-Framework/2.png" title="示意图 width=400"><p>祝贺你! 现在让我们深入了解一下v3.x的新更新。</p><h4 id="突出的特点"><a href="#突出的特点" class="headerlink" title="突出的特点"></a>突出的特点</h4><ul><li>编写API服务的一种新的优雅方式</li><li>事件+监听器</li><li>可启动的提供者</li><li>帮助者</li><li>新网站</li></ul><p>为了保持故事的短小精悍，我将只介绍上述内容。你可以在<a target="_blank" rel="noopener" href="https://nylo.dev/">https://nylo.dev</a>，查看文档以了解更多。</p><h4 id="API服务"><a href="#API服务" class="headerlink" title="API服务"></a>API服务</h4><p>我将从最酷的新增功能（在v3.x中）开始，它是新的网络助手。<br>在你的项目中，导航到”/lib/app/networking/“。在这里你可以为你的应用程序添加你的API服务。</p><h4 id="提出HTTP请求"><a href="#提出HTTP请求" class="headerlink" title="提出HTTP请求"></a>提出HTTP请求</h4><p>在你的API服务中，使用网络方法来建立你的API请求。</p><pre class="line-numbers language-dart" data-language="dart"><code class="language-dart"><span class="token keyword">class</span> <span class="token class-name">ApiService</span> <span class="token keyword">extends</span> <span class="token class-name">BaseApiService</span> <span class="token punctuation">{</span>
  <span class="token class-name">ApiService</span><span class="token punctuation">(</span><span class="token punctuation">{</span><span class="token class-name">BuildContext</span><span class="token operator">?</span> buildContext<span class="token punctuation">}</span><span class="token punctuation">)</span> <span class="token punctuation">:</span> <span class="token keyword">super</span><span class="token punctuation">(</span>buildContext<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token metadata function">@override</span>
  <span class="token class-name">String</span> <span class="token keyword">get</span> baseUrl <span class="token operator">=</span><span class="token operator">&gt;</span> <span class="token string-literal"><span class="token string">"https://jsonplaceholder.typicode.com"</span></span><span class="token punctuation">;</span>
  <span class="token class-name">Future</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">User</span><span class="token operator">?</span><span class="token punctuation">&gt;</span></span> <span class="token function">fetchUser</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token keyword">async</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token keyword">await</span> network<span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">User</span><span class="token punctuation">&gt;</span></span><span class="token punctuation">(</span>
      request<span class="token punctuation">:</span> <span class="token punctuation">(</span>request<span class="token punctuation">)</span> <span class="token operator">=</span><span class="token operator">&gt;</span> request<span class="token punctuation">.</span><span class="token keyword">get</span><span class="token punctuation">(</span><span class="token string-literal"><span class="token string">"/users/1"</span></span><span class="token punctuation">)</span><span class="token punctuation">,</span>
    <span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>注意：<code>请求参数</code>是一个<a target="_blank" rel="noopener" href="https://pub.dev/packages/dio">Dio</a>实例。</p><p>使用泛型，你可以使用Nylo的模型解码器从响应中自动返回一个对象。</p><h4 id="引入模型解码器"><a href="#引入模型解码器" class="headerlink" title="引入模型解码器"></a>引入模型解码器</h4><p>模型解码器是Nylo v3.x中引入的一个新概念。它们使你很容易返回你的对象，如下面的例子:</p><pre class="line-numbers language-dart" data-language="dart"><code class="language-dart"><span class="token keyword">class</span> <span class="token class-name">ApiService</span> <span class="token keyword">extends</span> <span class="token class-name">BaseApiService</span> <span class="token punctuation">{</span>
  <span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span>
<span class="token class-name">Future</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">User</span><span class="token operator">?</span><span class="token punctuation">&gt;</span></span> <span class="token function">fetchUser</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token keyword">async</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token keyword">await</span> network<span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">User</span><span class="token punctuation">&gt;</span></span><span class="token punctuation">(</span>
        request<span class="token punctuation">:</span> <span class="token punctuation">(</span>request<span class="token punctuation">)</span> <span class="token operator">=</span><span class="token operator">&gt;</span> request<span class="token punctuation">.</span><span class="token keyword">get</span><span class="token punctuation">(</span><span class="token string-literal"><span class="token string">"/users/1"</span></span><span class="token punctuation">)</span><span class="token punctuation">,</span>
    <span class="token punctuation">)</span><span class="token punctuation">;</span>
 <span class="token punctuation">}</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>文件: lib/config/decoders.dart</p><pre class="line-numbers language-dart" data-language="dart"><code class="language-dart"><span class="token keyword">final</span> modelDecoders <span class="token operator">=</span> <span class="token punctuation">{</span>
  <span class="token class-name">User</span><span class="token punctuation">:</span> <span class="token punctuation">(</span>data<span class="token punctuation">)</span> <span class="token operator">=</span><span class="token operator">&gt;</span> <span class="token class-name">User</span><span class="token punctuation">.</span><span class="token function">fromJson</span><span class="token punctuation">(</span>data<span class="token punctuation">)</span><span class="token punctuation">,</span> 
  
  <span class="token comment">// add your model and handle the return of the object</span>
<span class="token class-name">List</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">User</span><span class="token punctuation">&gt;</span></span><span class="token punctuation">:</span> <span class="token punctuation">(</span>data<span class="token punctuation">)</span> <span class="token operator">=</span><span class="token operator">&gt;</span> <span class="token class-name">List</span><span class="token punctuation">.</span><span class="token function">from</span><span class="token punctuation">(</span>data<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">map</span><span class="token punctuation">(</span><span class="token punctuation">(</span>json<span class="token punctuation">)</span> <span class="token operator">=</span><span class="token operator">&gt;</span> <span class="token class-name">User</span><span class="token punctuation">.</span><span class="token function">fromJson</span><span class="token punctuation">(</span>json<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">toList</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h4 id="这是怎么做到的？"><a href="#这是怎么做到的？" class="headerlink" title="这是怎么做到的？"></a>这是怎么做到的？</h4><p>在幕后，Nylo会查看你的config/decoders.dart文件，并使用modelDecoders变量来决定解码时使用哪种 “类型”。<br>下面是一个例子:</p><pre class="line-numbers language-dart" data-language="dart"><code class="language-dart"><span class="token keyword">final</span> modelDecoders <span class="token operator">=</span> <span class="token punctuation">{</span>
  <span class="token class-name">List</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">User</span><span class="token punctuation">&gt;</span></span><span class="token punctuation">:</span> <span class="token punctuation">(</span>data<span class="token punctuation">)</span> <span class="token operator">=</span><span class="token operator">&gt;</span> <span class="token class-name">List</span><span class="token punctuation">.</span><span class="token function">from</span><span class="token punctuation">(</span>data<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">map</span><span class="token punctuation">(</span><span class="token punctuation">(</span>json<span class="token punctuation">)</span> <span class="token operator">=</span><span class="token operator">&gt;</span> <span class="token class-name">User</span><span class="token punctuation">.</span><span class="token function">fromJson</span><span class="token punctuation">(</span>json<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">toList</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
  <span class="token class-name">User</span><span class="token punctuation">:</span> <span class="token punctuation">(</span>data<span class="token punctuation">)</span> <span class="token operator">=</span><span class="token operator">&gt;</span> <span class="token class-name">User</span><span class="token punctuation">.</span><span class="token function">fromJson</span><span class="token punctuation">(</span>data<span class="token punctuation">)</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span></span></code></pre><ul><li>第一个键是你的模型的<code>type</code>，例如，使用上面的例子，将是<code>User</code>和<code>List&lt;User&gt;</code>。</li><li><code>(data)</code>参数将包含来自你的API请求的HTTP响应体。</li></ul><p>接下来，创建一种方法，初始化你的模型。</p><pre class="line-numbers language-dart" data-language="dart"><code class="language-dart"><span class="token keyword">class</span> <span class="token class-name">User</span> <span class="token punctuation">{</span>
  <span class="token class-name">String</span><span class="token operator">?</span> name<span class="token punctuation">;</span>
  <span class="token class-name">String</span><span class="token operator">?</span> email<span class="token punctuation">;</span>
  <span class="token class-name">User</span><span class="token punctuation">.</span><span class="token function">fromJson</span><span class="token punctuation">(</span><span class="token keyword">dynamic</span> data<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span>name <span class="token operator">=</span> data<span class="token punctuation">[</span><span class="token string-literal"><span class="token string">'name'</span></span><span class="token punctuation">]</span><span class="token punctuation">;</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span>email <span class="token operator">=</span> data<span class="token punctuation">[</span><span class="token string-literal"><span class="token string">'email'</span></span><span class="token punctuation">]</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>现在你可以像下面的例子一样，使用<code>network</code>自动返回你的模型的正确表示。</p><pre class="line-numbers language-dart" data-language="dart"><code class="language-dart"><span class="token keyword">class</span> <span class="token class-name">ApiService</span> <span class="token keyword">extends</span> <span class="token class-name">BaseApiService</span> <span class="token punctuation">{</span>
  <span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span>
<span class="token class-name">Future</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">User</span><span class="token operator">?</span><span class="token punctuation">&gt;</span></span> <span class="token function">fetchUser</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token keyword">async</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token keyword">await</span> network<span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">User</span><span class="token punctuation">&gt;</span></span><span class="token punctuation">(</span>
        request<span class="token punctuation">:</span> <span class="token punctuation">(</span>request<span class="token punctuation">)</span> <span class="token operator">=</span><span class="token operator">&gt;</span> request<span class="token punctuation">.</span><span class="token keyword">get</span><span class="token punctuation">(</span><span class="token string-literal"><span class="token string">"/users/1"</span></span><span class="token punctuation">)</span><span class="token punctuation">,</span>
    <span class="token punctuation">)</span><span class="token punctuation">;</span>
 <span class="token punctuation">}</span>
<span class="token class-name">Future</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">List</span><span class="token punctuation">&lt;</span><span class="token class-name">User</span><span class="token punctuation">&gt;</span><span class="token operator">?</span><span class="token punctuation">&gt;</span></span> <span class="token function">fetchUsers</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token keyword">async</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token keyword">await</span> network<span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">List</span><span class="token punctuation">&lt;</span><span class="token class-name">User</span><span class="token punctuation">&gt;</span><span class="token punctuation">&gt;</span></span><span class="token punctuation">(</span>
        request<span class="token punctuation">:</span> <span class="token punctuation">(</span>request<span class="token punctuation">)</span> <span class="token operator">=</span><span class="token operator">&gt;</span> request<span class="token punctuation">.</span><span class="token keyword">get</span><span class="token punctuation">(</span><span class="token string-literal"><span class="token string">"/users"</span></span><span class="token punctuation">)</span><span class="token punctuation">,</span>
    <span class="token punctuation">)</span><span class="token punctuation">;</span>
 <span class="token punctuation">}</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h4 id="没有模型解码器的HTTP请求"><a href="#没有模型解码器的HTTP请求" class="headerlink" title="没有模型解码器的HTTP请求"></a>没有模型解码器的HTTP请求</h4><p>你也可以使用网络助手的handleSuccess参数来处理HTTP请求。</p><p>下面是一些例子:</p><pre class="line-numbers language-dart" data-language="dart"><code class="language-dart"><span class="token keyword">class</span> <span class="token class-name">ApiService</span> <span class="token keyword">extends</span> <span class="token class-name">BaseApiService</span> <span class="token punctuation">{</span>
  <span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span>
  <span class="token comment">// Example: returning an Object</span>
  <span class="token class-name">Future</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">User</span><span class="token operator">?</span><span class="token punctuation">&gt;</span></span> <span class="token function">findUser</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token keyword">async</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token keyword">await</span> <span class="token function">network</span><span class="token punctuation">(</span>
        request<span class="token punctuation">:</span> <span class="token punctuation">(</span>request<span class="token punctuation">)</span> <span class="token operator">=</span><span class="token operator">&gt;</span> request<span class="token punctuation">.</span><span class="token keyword">get</span><span class="token punctuation">(</span><span class="token string-literal"><span class="token string">"/users/1"</span></span><span class="token punctuation">)</span><span class="token punctuation">,</span>
        handleSuccess<span class="token punctuation">:</span> <span class="token punctuation">(</span><span class="token class-name">Response</span> response<span class="token punctuation">)</span> <span class="token punctuation">{</span> 
        <span class="token comment">// response - Dio Response object</span>
          <span class="token keyword">dynamic</span> data <span class="token operator">=</span> response<span class="token punctuation">.</span>data<span class="token punctuation">;</span>
          <span class="token keyword">return</span> <span class="token class-name">User</span><span class="token punctuation">.</span><span class="token function">fromJson</span><span class="token punctuation">(</span>data<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
  <span class="token comment">// Example: returning a String</span>
  <span class="token class-name">Future</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">String</span><span class="token operator">?</span><span class="token punctuation">&gt;</span></span> <span class="token function">findMessage</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token keyword">async</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token keyword">await</span> <span class="token function">network</span><span class="token punctuation">(</span>
        request<span class="token punctuation">:</span> <span class="token punctuation">(</span>request<span class="token punctuation">)</span> <span class="token operator">=</span><span class="token operator">&gt;</span> request<span class="token punctuation">.</span><span class="token keyword">get</span><span class="token punctuation">(</span><span class="token string-literal"><span class="token string">"/message/1"</span></span><span class="token punctuation">)</span><span class="token punctuation">,</span>
        handleSuccess<span class="token punctuation">:</span> <span class="token punctuation">(</span><span class="token class-name">Response</span> response<span class="token punctuation">)</span> <span class="token punctuation">{</span> 
        <span class="token comment">// response - Dio Response object</span>
          <span class="token keyword">dynamic</span> data <span class="token operator">=</span> response<span class="token punctuation">.</span>data<span class="token punctuation">;</span>
          <span class="token keyword">if</span> <span class="token punctuation">(</span>data<span class="token punctuation">[</span><span class="token string-literal"><span class="token string">'name'</span></span><span class="token punctuation">]</span> <span class="token operator">==</span> <span class="token string-literal"><span class="token string">'Anthony'</span></span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token keyword">return</span> <span class="token string-literal"><span class="token string">"It's Anthony"</span></span><span class="token punctuation">;</span>
          <span class="token punctuation">}</span>
          <span class="token keyword">return</span> <span class="token string-literal"><span class="token string">"Hello world"</span></span><span class="token punctuation">;</span> 
        <span class="token punctuation">}</span>
    <span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
  <span class="token comment">// Example: returning a bool</span>
  <span class="token class-name">Future</span><span class="token generics"><span class="token punctuation">&lt;</span>bool<span class="token operator">?</span><span class="token punctuation">&gt;</span></span> <span class="token function">updateUser</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token keyword">async</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token keyword">await</span> <span class="token function">network</span><span class="token punctuation">(</span>
        request<span class="token punctuation">:</span> <span class="token punctuation">(</span>request<span class="token punctuation">)</span> <span class="token operator">=</span><span class="token operator">&gt;</span> request<span class="token punctuation">.</span><span class="token function">put</span><span class="token punctuation">(</span><span class="token string-literal"><span class="token string">"/user/1"</span></span><span class="token punctuation">,</span> data<span class="token punctuation">:</span> <span class="token punctuation">{</span><span class="token string-literal"><span class="token string">"name"</span></span><span class="token punctuation">:</span> <span class="token string-literal"><span class="token string">"Anthony"</span></span><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
        handleSuccess<span class="token punctuation">:</span> <span class="token punctuation">(</span><span class="token class-name">Response</span> response<span class="token punctuation">)</span> <span class="token punctuation">{</span> 
        <span class="token comment">// response - Dio Response object</span>
          <span class="token keyword">dynamic</span> data <span class="token operator">=</span> response<span class="token punctuation">.</span>data<span class="token punctuation">;</span>
          <span class="token keyword">if</span> <span class="token punctuation">(</span>data<span class="token punctuation">[</span><span class="token string-literal"><span class="token string">'status'</span></span><span class="token punctuation">]</span> <span class="token operator">==</span> <span class="token string-literal"><span class="token string">'OK'</span></span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token keyword">return</span> <span class="token boolean">true</span><span class="token punctuation">;</span>
          <span class="token punctuation">}</span>
          <span class="token keyword">return</span> <span class="token boolean">false</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>注意，你不需要在<code>network</code>上指定任何通用类型。在<code>handleSuccess</code>回调里面，你只需要自己处理返回。</p><p>你也可以使用<code>handleFailure</code>参数来处理失败的HTTP响应。</p><h4 id="在你的项目中使用API服务"><a href="#在你的项目中使用API服务" class="headerlink" title="在你的项目中使用API服务"></a>在你的项目中使用API服务</h4><pre class="line-numbers language-dart" data-language="dart"><code class="language-dart"><span class="token keyword">class</span> _MyHomePageState <span class="token keyword">extends</span> <span class="token class-name">NyState</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">MyHomePage</span><span class="token punctuation">&gt;</span></span> <span class="token punctuation">{</span>
<span class="token class-name">ApiService</span> _apiService <span class="token operator">=</span> <span class="token class-name">ApiService</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
 <span class="token metadata function">@override</span>
 <span class="token function">init</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token keyword">async</span> <span class="token punctuation">{</span>
  <span class="token class-name">User</span><span class="token operator">?</span> user <span class="token operator">=</span> <span class="token keyword">await</span> _apiService<span class="token punctuation">.</span><span class="token function">getUser</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token function">print</span><span class="token punctuation">(</span>user<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// User? instance</span>
    <span class="token comment">// or</span>
 <span class="token class-name">User</span><span class="token operator">?</span> user <span class="token operator">=</span> <span class="token keyword">await</span> api<span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">ApiService</span><span class="token punctuation">&gt;</span></span><span class="token punctuation">(</span><span class="token punctuation">(</span>request<span class="token punctuation">)</span> <span class="token operator">=</span><span class="token operator">&gt;</span> request<span class="token punctuation">.</span><span class="token function">getUser</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
 <span class="token function">print</span><span class="token punctuation">(</span>user<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// User? instance</span>
<span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h4 id="拦截器"><a href="#拦截器" class="headerlink" title="拦截器"></a>拦截器</h4><p>如果你对拦截器感到陌生，不要担心。它们提供了一种在你的HTTP请求被发送之前拦截它们的方法。</p><p>拦截器提供了以下的回调。</p><ul><li>onRequest: 在发送之前修改请求。</li><li>onResponse: 对响应数据做一些处理。</li><li>onError。处理HTTP请求中的错误。<br>Nylo允许你为你的API服务添加新的拦截器，就像下面的例子一样。</li></ul><pre class="line-numbers language-dart" data-language="dart"><code class="language-dart"><span class="token keyword">class</span> <span class="token class-name">ApiService</span> <span class="token keyword">extends</span> <span class="token class-name">BaseApiService</span> <span class="token punctuation">{</span>
  <span class="token class-name">ApiService</span><span class="token punctuation">(</span><span class="token punctuation">{</span><span class="token class-name">BuildContext</span><span class="token operator">?</span> buildContext<span class="token punctuation">}</span><span class="token punctuation">)</span> <span class="token punctuation">:</span> <span class="token keyword">super</span><span class="token punctuation">(</span>buildContext<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span>
  <span class="token metadata function">@override</span>
  <span class="token keyword">final</span> interceptors <span class="token operator">=</span> <span class="token punctuation">{</span>
    <span class="token class-name">LoggingInterceptor</span><span class="token punctuation">:</span> <span class="token class-name">LoggingInterceptor</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
    <span class="token comment">// Add more interceptors for the API Service e.g. below</span>
    <span class="token comment">// BearerAuthInterceptor: BearerAuthInterceptor(),</span>
  <span class="token punctuation">}</span><span class="token punctuation">;</span>
<span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>你可以在项目中的如下文件查看拦截器的实现: “lib/app/networking/dio/interceptors/logging_interceptor.dart”</p><h4 id="创建一个新的API服务"><a href="#创建一个新的API服务" class="headerlink" title="创建一个新的API服务"></a>创建一个新的API服务</h4><pre class="line-numbers language-none"><code class="language-none">flutter pub run nylo_framework:main make:api_service shop<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><p>这条命令会在目录/lib/app/networking/*下创建一个新的API服务，名称为shop_api_service.dart。</p><h4 id="增加模型选项"><a href="#增加模型选项" class="headerlink" title="增加模型选项"></a>增加模型选项</h4><pre class="line-numbers language-none"><code class="language-none">flutter pub run nylo_framework:main make:api_service shop --model="Shop"<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><p>模型选项–model=”Shop”告诉Nylo为你新创建的API服务添加以下方法：查找、创建、删除、更新和获取全部内容。</p><h4 id="增加了URL标志"><a href="#增加了URL标志" class="headerlink" title="增加了URL标志"></a>增加了URL标志</h4><pre class="line-numbers language-none"><code class="language-none">flutter pub run nylo_framework:main make:api_service shop --url="https://myapi-baseurl.com"<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><pre class="line-numbers language-url```选项告诉Nylo将baseUrl设置为你提供的值。" data-language="url```选项告诉Nylo将baseUrl设置为你提供的值。"><code class="language-url```选项告诉Nylo将baseUrl设置为你提供的值。">
#### 事件+监听器

当你需要在你的应用程序中发生一些事情后处理逻辑时，事件是强大的。Nylo提供了一个简单的事件实现，允许你调用为该事件注册的监听器。
监听器可以从事件的有效载荷中执行逻辑。
下面是一个事件的例子，我们设想我们拥有一个销售T恤的电子商务应用程序。
当用户成功付款后，我们想派发一个事件来处理以下事情。

 * 清除用户的购物车
 * 使用谷歌标签管理器来记录事件，以便进行分析。

```dart
import 'package:nylo_framework/nylo_framework.dart';
import 'package:google_tag_manager/google_tag_manager.dart' as gtm;
class PaymentSuccessfulEvent implements NyEvent {
final listeners = {
    SanitizeCheckoutListener: SanitizeCheckoutListener(),
    GTMPurchaseListener: GTMPurchaseListener(),
  };
}
class SanitizeCheckoutListener extends NyListener {
  handle(dynamic event) async {

    await NyStorage.store('cart', null); // clear the cart
  }
}
class GTMPurchaseListener extends NyListener {
  handle(dynamic event) async {
    // Get payload from event
    Order order = event['order'];
   // Push event to gtm (Google tag manager).
    gtm.push({
      'ecommerce': {
        'purchase': {
          'actionField': {
            'id': order.id,
            'revenue': order.revenue,
            'tax': order.tax,
            'shipping': order.shipping
          },
          'products': order.line_items
        }
      }
    });
  }
}<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>在Nylo中调度一个事件。</p><pre class="line-numbers language-dart" data-language="dart"><code class="language-dart"><span class="token function">stripePay</span><span class="token punctuation">(</span><span class="token class-name">List</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">Product</span><span class="token punctuation">&gt;</span></span> products<span class="token punctuation">)</span> <span class="token keyword">async</span> <span class="token punctuation">{</span>
  <span class="token comment">// create the order</span>
  <span class="token class-name">Order</span><span class="token operator">?</span> order <span class="token operator">=</span> <span class="token keyword">await</span> api<span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">OrderApiService</span><span class="token punctuation">&gt;</span></span><span class="token punctuation">(</span><span class="token punctuation">(</span>api<span class="token punctuation">)</span> <span class="token operator">=</span><span class="token operator">&gt;</span> api<span class="token punctuation">.</span><span class="token function">createOrder</span><span class="token punctuation">(</span>products<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token comment">// dispatch the event</span>
  <span class="token keyword">await</span> event<span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">PaymentSuccessfulEvent</span><span class="token punctuation">&gt;</span></span><span class="token punctuation">(</span>data<span class="token punctuation">:</span> <span class="token punctuation">{</span><span class="token string-literal"><span class="token string">'order'</span></span><span class="token punctuation">:</span> order<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>你可以在 “lib/app/events/“目录下添加事件。</p><h4 id="创建新事件"><a href="#创建新事件" class="headerlink" title="创建新事件"></a>创建新事件</h4><pre class="line-numbers language-none"><code class="language-none">flutter pub run nylo_framework:main make:event message_created_event<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><h4 id="Providers"><a href="#Providers" class="headerlink" title="Providers"></a>Providers</h4><p>在Nylo中，当你的应用程序首次运行时，提供程序将从你的main.dart文件中启动。所有的提供者都在”/lib/app/providers/“中，你可以修改这些文件或使用Metro创建你的提供者。</p><p>对提供者的需求是什么？<br>随着项目的发展，你可能需要在你的应用程序运行前初始化更多的包、类或代码。</p><p>提供者提供了一个整洁的解决方案，使你的main.dart文件不致臃肿。让我们来看看一些开箱即注册的提供者。</p><pre class="line-numbers language-dart" data-language="dart"><code class="language-dart"><span class="token comment">// file: lib/app/providers/app_provider.dart</span>
<span class="token keyword">class</span> <span class="token class-name">AppProvider</span> <span class="token keyword">implements</span> <span class="token class-name">NyProvider</span> <span class="token punctuation">{</span>

  <span class="token function">boot</span><span class="token punctuation">(</span><span class="token class-name">Nylo</span> nylo<span class="token punctuation">)</span> <span class="token keyword">async</span> <span class="token punctuation">{</span>
    <span class="token keyword">await</span> <span class="token class-name">NyLocalization</span><span class="token punctuation">.</span>instance<span class="token punctuation">.</span><span class="token function">init</span><span class="token punctuation">(</span>
        localeType<span class="token punctuation">:</span> localeType<span class="token punctuation">,</span>
        languageCode<span class="token punctuation">:</span> languageCode<span class="token punctuation">,</span>
        languagesList<span class="token punctuation">:</span> languagesList<span class="token punctuation">,</span>
        assetsDirectory<span class="token punctuation">:</span> assetsDirectory<span class="token punctuation">,</span>
        valuesAsMap<span class="token punctuation">:</span> valuesAsMap<span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token keyword">return</span> <span class="token keyword">null</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
<span class="token comment">// file: lib/app/providers/route_provider.dart</span>
<span class="token keyword">class</span> <span class="token class-name">RouteProvider</span> <span class="token keyword">implements</span> <span class="token class-name">NyProvider</span> <span class="token punctuation">{</span>

  <span class="token function">boot</span><span class="token punctuation">(</span><span class="token class-name">Nylo</span> nylo<span class="token punctuation">)</span> <span class="token keyword">async</span> <span class="token punctuation">{</span>
    nylo<span class="token punctuation">.</span><span class="token function">addRouter</span><span class="token punctuation">(</span><span class="token function">appRouter</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">return</span> nylo<span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>这两个提供者都有助于启动应用程序。一个是添加路由，另一个是初始化项目的本地化。</p><p>您可以修改您的提供者或创建新的提供者，以促进您的Flutter应用程序中的新服务。</p><h4 id="创建一个新的provider"><a href="#创建一个新的provider" class="headerlink" title="创建一个新的provider"></a>创建一个新的provider</h4><pre class="line-numbers language-none"><code class="language-none">flutter pub run nylo_framework:main make:provider firebase_provider<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><h4 id="Helpers"><a href="#Helpers" class="headerlink" title="Helpers"></a>Helpers</h4><p>一些新增加的小功能。</p><p>whenEnv - 这允许你在你的应用程序的环境处于某种状态时执行一些代码。下面是一个例子。</p><pre class="line-numbers language-dart" data-language="dart"><code class="language-dart"><span class="token class-name">Your</span> <span class="token punctuation">.</span>env file
APP_NAME<span class="token operator">=</span><span class="token class-name">MyApp</span>
APP_ENV<span class="token operator">=</span>developing <span class="token comment">// &lt; -- this is set to "developing"</span>
<span class="token comment">// Register page for users</span>
<span class="token keyword">class</span> _RegisterPageState <span class="token keyword">extends</span> <span class="token class-name">NyState</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">RegisterPage</span><span class="token punctuation">&gt;</span></span> <span class="token punctuation">{</span>
  <span class="token class-name">TextEditingController</span> _txtNameController <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">TextEditingController</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token class-name">TextEditingController</span> _txtEmailController <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">TextEditingController</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  
  <span class="token metadata function">@override</span>
  <span class="token function">init</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token keyword">async</span> <span class="token punctuation">{</span>
    <span class="token function">whenEnv</span><span class="token punctuation">(</span><span class="token string-literal"><span class="token string">'developing'</span></span><span class="token punctuation">,</span> perform<span class="token punctuation">:</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token keyword">var</span> faker <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Faker</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
      _txtEmailController<span class="token punctuation">.</span>text <span class="token operator">=</span> faker<span class="token punctuation">.</span>internet<span class="token punctuation">.</span><span class="token function">email</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
      _txtNameController<span class="token punctuation">.</span>text <span class="token operator">=</span> faker<span class="token punctuation">.</span>person<span class="token punctuation">.</span><span class="token function">name</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
      <span class="token comment">// E.g. Fill the fields with fake data to save time</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>希望上面的例子能告诉你如何使用whenEnv帮助器来使你的测试/开发工作更容易。</p><p>Backpack - 这个类被设计用来存储即时的小尺寸数据。它不需要异步等待，这使得它非常适合存储用户认证令牌、API会话等。</p><p>Here’s an example:</p><pre class="line-numbers language-dart" data-language="dart"><code class="language-dart"><span class="token comment">// storing a string</span>
<span class="token class-name">Backpack</span><span class="token punctuation">.</span>instance<span class="token punctuation">.</span><span class="token keyword">set</span><span class="token punctuation">(</span><span class="token string-literal"><span class="token string">'user_api_token'</span></span><span class="token punctuation">,</span> <span class="token string-literal"><span class="token string">'a secure token'</span></span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">// storing an object</span>
<span class="token class-name">User</span> user <span class="token operator">=</span> <span class="token class-name">User</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token class-name">Backpack</span><span class="token punctuation">.</span>instance<span class="token punctuation">.</span><span class="token keyword">set</span><span class="token punctuation">(</span><span class="token string-literal"><span class="token string">'user'</span></span><span class="token punctuation">,</span> user<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">// storing an int</span>
<span class="token class-name">Backpack</span><span class="token punctuation">.</span>instance<span class="token punctuation">.</span><span class="token keyword">set</span><span class="token punctuation">(</span><span class="token string-literal"><span class="token string">'my_lucky_no'</span></span><span class="token punctuation">,</span> <span class="token number">7</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">// reading data</span>
<span class="token class-name">Backpack</span><span class="token punctuation">.</span>instance<span class="token punctuation">.</span><span class="token function">read</span><span class="token punctuation">(</span><span class="token string-literal"><span class="token string">'user_api_token'</span></span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// a secure token</span>
<span class="token class-name">Backpack</span><span class="token punctuation">.</span>instance<span class="token punctuation">.</span><span class="token function">read</span><span class="token punctuation">(</span><span class="token string-literal"><span class="token string">'user'</span></span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// User instance</span>
<span class="token class-name">Backpack</span><span class="token punctuation">.</span>instance<span class="token punctuation">.</span><span class="token function">read</span><span class="token punctuation">(</span><span class="token string-literal"><span class="token string">'my_lucky_no'</span></span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 7</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>你可以在你的应用程序的任何地方使用Backpack，例如授权一个API请求。</p><pre class="line-numbers language-dart" data-language="dart"><code class="language-dart"><span class="token keyword">class</span> <span class="token class-name">ApiService</span> <span class="token keyword">extends</span> <span class="token class-name">BaseApiService</span> <span class="token punctuation">{</span>
  <span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span>
  <span class="token class-name">Future</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token keyword">dynamic</span><span class="token punctuation">&gt;</span></span> <span class="token function">accountDetails</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token keyword">async</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token keyword">await</span> <span class="token function">network</span><span class="token punctuation">(</span>
        request<span class="token punctuation">:</span> <span class="token punctuation">(</span>request<span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token class-name">String</span> userToken <span class="token operator">=</span> <span class="token class-name">Backpack</span><span class="token punctuation">.</span>instance<span class="token punctuation">.</span><span class="token function">read</span><span class="token punctuation">(</span><span class="token string-literal"><span class="token string">'user_api_token'</span></span><span class="token punctuation">)</span><span class="token punctuation">;</span>
      <span class="token comment">// Set auth header</span>
      request<span class="token punctuation">.</span>options<span class="token punctuation">.</span>headers <span class="token operator">=</span> <span class="token punctuation">{</span>
          <span class="token string-literal"><span class="token string">'Authorization'</span></span><span class="token punctuation">:</span> <span class="token string-literal"><span class="token string">"Bearer "</span></span> <span class="token operator">+</span> userToken
      <span class="token punctuation">}</span><span class="token punctuation">;</span>
          
      <span class="token keyword">return</span> request<span class="token punctuation">.</span><span class="token keyword">get</span><span class="token punctuation">(</span><span class="token string-literal"><span class="token string">"/account/1"</span></span><span class="token punctuation">)</span><span class="token punctuation">;</span>
       
      <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>注意：在Backpack类中设置的值不会持久化。如果你的应用程序需要，你可能需要实现NyStorage和Backpack的组合。</p><h4 id="新网站"><a href="#新网站" class="headerlink" title="新网站"></a>新网站</h4><p>官方网站已经被重新设计，以使学习Nylo的体验更好。你会发现，文档页面是全新的，看起来很简约。</p><img src="/Nylo-v3-x-%E2%80%94-Flutter%E2%80%99s-Latest-Micro-Framework/3.png" title="示意图 width=400"><h4 id="总结"><a href="#总结" class="headerlink" title="总结"></a>总结</h4><p>非常兴奋，v3.x终于发布了。如果你是Nylo的新手，它是新项目的一个伟大的起点。它让你忘记小事，这样你就可以专注于创作。</p><p>一如既往，感谢您的阅读。</p></div><footer class="post-footer"><div class="reward-container"><div>你的鼓励是我更新的动力！</div><button>赞赏</button><div class="post-reward"><div><img src="/images/wechatpay.png" alt="木辛念做梓 微信"> <span>微信</span></div><div><img src="/images/alipay.png" alt="木辛念做梓 支付宝"> <span>支付宝</span></div></div></div><div class="post-tags"><a href="/tags/Flutter/" rel="tag"># Flutter</a> <a href="/tags/Nylo/" rel="tag"># Nylo</a></div><div class="post-nav"><div class="post-nav-item"><a href="/What-Makes-Julia-Unique.html" rel="prev" title="是什么让Julia独树一帜？"><i class="fa fa-chevron-left"></i> 是什么让Julia独树一帜？</a></div><div class="post-nav-item"><a href="/8-Must-know-Stream-API-Usages.html" rel="next" title="8个必须知道的Stream API使用方法">8个必须知道的Stream API使用方法 <i class="fa fa-chevron-right"></i></a></div></div></footer></article></div></div></main><footer class="footer"><div class="footer-inner"><div class="copyright">&copy; <span itemprop="copyrightYear">2025</span> <span class="with-love"><i class="fa fa-heart"></i> </span><span class="author" itemprop="copyrightHolder">木辛念做梓</span></div><div class="wordcount"><span class="post-meta-item"><span class="post-meta-item-icon"><i class="fa fa-chart-line"></i> </span><span>站点总字数：</span> <span title="站点总字数">534k</span> </span><span class="post-meta-item"><span class="post-meta-item-icon"><i class="fa fa-coffee"></i> </span><span>站点阅读时长 &asymp;</span> <span title="站点阅读时长">8:06</span></span></div><div class="busuanzi-count"><span class="post-meta-item" id="busuanzi_container_site_uv"><span class="post-meta-item-icon"><i class="fa fa-user"></i> </span><span class="site-uv" title="总访客量"><span id="busuanzi_value_site_uv"></span> </span></span><span class="post-meta-item" id="busuanzi_container_site_pv"><span class="post-meta-item-icon"><i class="fa fa-eye"></i> </span><span class="site-pv" title="总访问量"><span id="busuanzi_value_site_pv"></span></span></span></div><div class="powered-by">由 <a href="https://hexo.io/" rel="noopener" target="_blank">Hexo</a> & <a href="https://theme-next.js.org/" rel="noopener" target="_blank">NexT.Gemini</a> 强力驱动</div></div></footer><script src="https://cdn.jsdelivr.net/npm/animejs@3.2.1/lib/anime.min.js" integrity="sha256-XL2inqUJaslATFnHdJOi9GfQ60on8Wx1C2H8DYiN1xY=" crossorigin="anonymous"></script><script src="https://cdn.jsdelivr.net/npm/medium-zoom@1.0.6/dist/medium-zoom.min.js" integrity="sha256-EdPgYcPk/IIrw7FYeuJQexva49pVRZNmt3LculEr7zM=" crossorigin="anonymous"></script><script src="/js/comments.js"></script><script src="/js/utils.js"></script><script src="/js/motion.js"></script><script src="/js/next-boot.js"></script><script async src="https://busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script><div class="moon-menu"><div class="moon-menu-items"><div id="moon-menu-item-back2bottom" class="moon-menu-item"><i class="fas fa-chevron-down"></i></div><div id="moon-menu-item-back2top" class="moon-menu-item"><i class="fas fa-chevron-up"></i></div></div><div class="moon-menu-button"><svg class="moon-menu-bg"><circle class="moon-menu-cricle" cx="50%" cy="50%" r="44%"></circle><circle class="moon-menu-border" cx="50%" cy="50%" r="48%"></circle></svg><div class="moon-menu-content"><div class="moon-menu-icon"><i class="fas fa-ellipsis-v"></i></div><div class="moon-menu-text"></div></div></div></div><script src="/js/injector.js"></script></body></html>