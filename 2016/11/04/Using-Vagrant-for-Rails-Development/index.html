<!DOCTYPE html><html lang=""><head><meta http-equiv="content-type" content="text/html; charset=utf-8"/><meta content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=0" name="viewport"/><meta content="yes" name="apple-mobile-web-app-capable"/><meta content="black-translucent" name="apple-mobile-web-app-status-bar-style"/><meta content="telephone=no" name="format-detection"/><meta name="description" content=""/><title>使用Vagrant部署Rails项目 | Tensor Cell</title><link rel="stylesheet" type="text/css" href="/css/normalize.css"/><link rel="stylesheet" type="text/css" href="/css/pure-min.css"/><link rel="stylesheet" type="text/css" href="/css/grids-responsive-min.css"/><link rel="stylesheet" type="text/css" href="/css/style.css"/><link rel="Shortcut Icon" type="image/x-icon" href="/favicon.ico"/><link rel="apple-touch-icon" href="/apple-touch-icon.png"/><link rel="apple-touch-icon-precomposed" href="/apple-touch-icon.png"/><link rel="alternate" type="application/atom+xml" href="/atom.xml"/></head><body><div class="body_container"><div id="header"><div class="site-name"><h1 class="hidden">使用Vagrant部署Rails项目</h1><a id="logo" href="/">Tensor Cell</a><p class="description">还要再走500里</p></div><div id="nav-menu"><a href="/" class="current"><i class="icon-home"> 首页</i></a><a href="/archives/"><i class="icon-archive"> 归档</i></a><a href="/about/"><i class="icon-about"> 关于</i></a><a href="/atom.xml"><i class="icon-rss"> 订阅</i></a></div></div><div id="layout" class="pure-g"><div class="pure-u-1 pure-u-md-3-4"><div class="content_container"><div class="post post-page"><h1 class="post-title">使用Vagrant部署Rails项目</h1><div class="post-meta">2016-11-04 | <span class="categories">分类于<a href="/categories/Rails/"> Rails</a><a href="/categories/Rails/Vagrant/"> Vagrant</a></span></div><span data-disqus-identifier="2016/11/04/Using-Vagrant-for-Rails-Development/" class="disqus-comment-count"></span><div class="post-content"><!--  -->
<!--  -->
<!--  _ __    __     __      ____    ___     ___   _____   __  __    ___     -->
<!-- /\`'__\/'__`\ /'__`\   /',__\  / __`\ /' _ `\/\ '__`\/\ \/\ \ /' _ `\   -->
<!-- \ \ \//\  __//\ \L\.\_/\__, `\/\ \L\ \/\ \/\ \ \ \L\ \ \ \_\ \/\ \/\ \  -->
<!--  \ \_\\ \____\ \__/.\_\/\____/\ \____/\ \_\ \_\ \ ,__/\ \____/\ \_\ \_\ -->
<!--   \/_/ \/____/\/__/\/_/\/___/  \/___/  \/_/\/_/\ \ \/  \/___/  \/_/\/_/ -->
<!--                                                 \ \_\                   -->
<!--                                                  \/_/                   -->
<!--  -->
<h2 id="u7B80_u8FF0"><a href="#u7B80_u8FF0" class="headerlink" title="简述"></a>简述</h2><p>Vagrant 是一个自动化工具，可以在你的电脑的虚拟机里自动搭建一个开发环境。这就意味着你本地开发环境可以完全与生产服务器上保持一致，你的合作小伙伴也可以和你保持高度一致的运行环境。</p>
<p>自个儿的Rails的开发环境也不会随着你开发机的变化而变化。另外，你可以在分分钟内启动一个可能需要在12个月以后重新访问的项目，那时你会感谢自己在项目初期使用了这个工具。</p>
<p>我们会使用<a href="https://www.chef.io/chef/" target="_blank" rel="external">Chef</a>完成虚拟机开发环境的自动部署。chef会负责为我们的系统配置Ruby和所有依赖的包。非常适合快速开发（It’s pretty RAD）。</p>
<p>BB的够多的了，让我们开始吧！</p>
<h2 id="u914D_u7F6EVagrant"><a href="#u914D_u7F6EVagrant" class="headerlink" title="配置Vagrant"></a>配置Vagrant</h2><p>首先，开始执行之前确认下本机至少有1G的空闲内存，因为Vagrant会在你的虚拟机中启动一个完整的操作系统，用来执行Rails程序。</p>
<p>第一步，在本机安装Vagrant和VirtualBox。</p>
<ul>
<li><a href="https://www.vagrantup.com/downloads.html" target="_blank" rel="external">移步这里下载安装Vagrant</a></li>
<li><a href="https://www.virtualbox.org/wiki/Downloads" target="_blank" rel="external">移步这里下载安装VirtualBox</a></li>
</ul>
<p>虚拟机是运行在VirtualBox里的，这些都是后台运行的程序，只能通过SSH进行交互。</p>
<p>其次，我们需要安装Vagrant的两个插件。</p>
<ul>
<li>vagrant-vbguest 自动安装各种Guest扩展程序</li>
<li>vagrant-librarian-chef 让我们可以在机器启动的时候自动执行chef</li>
</ul>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">vagrant plugin <span class="operator"><span class="keyword">install</span> vagrant-vbguest</span><br><span class="line">vagrant <span class="keyword">plugin</span> <span class="keyword">install</span> vagrant-librarian-chef-nochef</span></span><br></pre></td></tr></table></figure>
<p>这个可能需要些时间才能执行完毕。</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">➜  ds git:(dev) vagrant plugin <span class="operator"><span class="keyword">install</span> vagrant-vbguest</span><br><span class="line">Installing the <span class="string">'vagrant-vbguest'</span> <span class="keyword">plugin</span>. This can take a few minutes...</span><br><span class="line">Installed the <span class="keyword">plugin</span> <span class="string">'vagrant-vbguest (0.13.0)'</span>!</span><br><span class="line">➜  ds git:(dev) vagrant <span class="keyword">plugin</span> <span class="keyword">install</span> vagrant-librarian-chef-nochef</span><br><span class="line">Installing the <span class="string">'vagrant-librarian-chef-nochef'</span> <span class="keyword">plugin</span>. This can take a few minutes...</span><br><span class="line">Installed the <span class="keyword">plugin</span> <span class="string">'vagrant-librarian-chef-nochef (0.2.0)'</span>!</span><br><span class="line">➜  ds git:(dev)</span></span><br></pre></td></tr></table></figure>
<h2 id="u521B_u5EFAVagrant_u914D_u7F6E_u6587_u4EF6"><a href="#u521B_u5EFAVagrant_u914D_u7F6E_u6587_u4EF6" class="headerlink" title="创建Vagrant配置文件"></a>创建Vagrant配置文件</h2><p>首要的，进入需要配置chef的Rails项目目录，并执行如下命令。</p>
<figure class="highlight vim"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">➜  <span class="keyword">ds</span> gi<span class="variable">t:</span>(dev) vagrant init</span><br><span class="line">A `Vagrantfile` <span class="built_in">has</span> been placed in this directory. You are now</span><br><span class="line">ready <span class="keyword">to</span> `vagrant <span class="keyword">up</span>` your <span class="keyword">first</span> virtual environment! Please <span class="keyword">read</span></span><br><span class="line">the comments in the Vagrantfile <span class="keyword">as</span> well <span class="keyword">as</span> documentation <span class="keyword">on</span></span><br><span class="line">`vagrantup.<span class="keyword">com</span>` <span class="keyword">for</span> more information <span class="keyword">on</span> using Vagrant.</span><br><span class="line">➜  <span class="keyword">ds</span> gi<span class="variable">t:</span>(dev) ✗ touch Cheffile</span><br><span class="line">➜  <span class="keyword">ds</span> gi<span class="variable">t:</span>(dev) ✗ <span class="keyword">ls</span></span><br><span class="line">Cheffile     README.md    app          config.<span class="keyword">ru</span>    <span class="built_in">log</span>          tmp</span><br><span class="line">Gemfile      Rakefile     bin          db           public       vendor</span><br><span class="line">Gemfile.lock Vagrantfile  config       lib          test</span><br></pre></td></tr></table></figure>
<p>由此会生成Vagrantfile和Cheffile两个文件。</p>
<h2 id="Cheffile"><a href="#Cheffile" class="headerlink" title="Cheffile"></a>Cheffile</h2><p>现在，我们可以配置Chef文件了。这个文件和我们的Rails的gem 文件类似，只不过是用于Chef的。这个文件中会定义很多Chef cookbooks用来在稍后的Vagrantfile中指挥Vagrant配置我们的环境的具体内容。</p>
<p>我们仅仅只需要黏贴如下代码到Cheffile中：</p>
<figure class="highlight groovy"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">site <span class="string">"http://community.opscode.com/api/v1"</span></span><br><span class="line"></span><br><span class="line">cookbook <span class="string">'apt'</span></span><br><span class="line">cookbook <span class="string">'build-essential'</span></span><br><span class="line">cookbook <span class="string">'mysql'</span>, <span class="string">'5.5.3'</span></span><br><span class="line">cookbook <span class="string">'ruby_build'</span></span><br><span class="line">cookbook <span class="string">'nodejs'</span></span><br><span class="line">cookbook <span class="string">'rbenv'</span>, <span class="string">git:</span> <span class="string">'https://github.com/aminin/chef-rbenv'</span></span><br><span class="line">cookbook <span class="string">'vim'</span></span><br></pre></td></tr></table></figure>
<h2 id="Vagrantfile"><a href="#Vagrantfile" class="headerlink" title="Vagrantfile"></a>Vagrantfile</h2><p>Vagrantfile 定义了虚拟机中的操作系统和Chef的配置项。</p>
<p>我们会使用Ubuntu 16.04 xenial 64-bit和4G的内存这个版本配置（如果你用的32位的系统，只需要改成xenial32即可）。还需要打开虚拟机的3000端口，这样，我们通过本地浏览器就可以访问虚拟机上的Rails服务了。不过至少到现在为止，我们已经在虚拟机中通过Chef配置好了Ruby2.3.1和MySQL。</p>
<p>Vagrantfile文件的内容如下：</p>
<figure class="highlight elixir"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># -*- mode: ruby -*-</span></span><br><span class="line"><span class="comment"># vi: set ft=ruby :</span></span><br><span class="line"></span><br><span class="line"><span class="constant">VAGRANTFILE_API_VERSION </span>= <span class="string">"2"</span></span><br><span class="line"></span><br><span class="line"><span class="constant">Vagrant.</span>configure(<span class="constant">VAGRANTFILE_API_VERSION)</span> <span class="keyword">do</span> |config|</span><br><span class="line">  <span class="comment"># Use Ubuntu 16.04 Xenial Xerus 64-bit as our operating system</span></span><br><span class="line">  config.vm.box = <span class="string">"ubuntu/xenial64"</span></span><br><span class="line"></span><br><span class="line">  <span class="comment"># Configurate the virtual machine to use 4GB of RAM</span></span><br><span class="line">  config.vm.provider <span class="symbol">:virtualbox</span> <span class="keyword">do</span> |vb|</span><br><span class="line">    vb.customize [<span class="string">"modifyvm"</span>, <span class="symbol">:id</span>, <span class="string">"--memory"</span>, <span class="string">"4048"</span>]</span><br><span class="line">  <span class="keyword">end</span></span><br><span class="line"></span><br><span class="line">  <span class="comment"># Forward the Rails server default port to the host</span></span><br><span class="line">  config.vm.network <span class="symbol">:forwarded_port</span>, <span class="symbol">guest:</span> <span class="number">3000</span>, <span class="symbol">host:</span> <span class="number">3000</span></span><br><span class="line"></span><br><span class="line">  <span class="comment"># Use Chef Solo to provision our virtual machine</span></span><br><span class="line">  config.vm.provision <span class="symbol">:chef_solo</span> <span class="keyword">do</span> |chef|</span><br><span class="line">    chef.cookbooks_path = [<span class="string">"cookbooks"</span>, <span class="string">"site-cookbooks"</span>]</span><br><span class="line"></span><br><span class="line">    chef.add_recipe <span class="string">"apt"</span></span><br><span class="line">    chef.add_recipe <span class="string">"nodejs"</span></span><br><span class="line">    chef.add_recipe <span class="string">"ruby_build"</span></span><br><span class="line">    chef.add_recipe <span class="string">"rbenv::user"</span></span><br><span class="line">    chef.add_recipe <span class="string">"rbenv::vagrant"</span></span><br><span class="line">    chef.add_recipe <span class="string">"vim"</span></span><br><span class="line">    chef.add_recipe <span class="string">"mysql::server"</span></span><br><span class="line">    chef.add_recipe <span class="string">"mysql::client"</span></span><br><span class="line"></span><br><span class="line">    <span class="comment"># Install Ruby 2.3.1 and Bundler</span></span><br><span class="line">    <span class="comment"># Set an empty root password for MySQL to make things simple</span></span><br><span class="line">    chef.json = &#123;</span><br><span class="line">      <span class="symbol">rbenv:</span> &#123;</span><br><span class="line">        <span class="symbol">user_installs:</span> [&#123;</span><br><span class="line">          <span class="symbol">user:</span> <span class="string">'vagrant'</span>,</span><br><span class="line">          <span class="symbol">rubies:</span> [<span class="string">"2.3.1"</span>],</span><br><span class="line">          <span class="symbol">global:</span> <span class="string">"2.3.1"</span>,</span><br><span class="line">          <span class="symbol">gems:</span> &#123;</span><br><span class="line">            <span class="string">"2.3.1"</span> =&gt; [</span><br><span class="line">              &#123; <span class="symbol">name:</span> <span class="string">"bundler"</span> &#125;</span><br><span class="line">            ]</span><br><span class="line">          &#125;</span><br><span class="line">        &#125;]</span><br><span class="line">      &#125;,</span><br><span class="line">      <span class="symbol">mysql:</span> &#123;</span><br><span class="line">        <span class="symbol">server_root_password:</span> <span class="string">''</span></span><br><span class="line">      &#125;</span><br><span class="line">    &#125;</span><br><span class="line">  <span class="keyword">end</span></span><br><span class="line"><span class="keyword">end</span></span><br></pre></td></tr></table></figure>
<h2 id="u6267_u884CVagrant"><a href="#u6267_u884CVagrant" class="headerlink" title="执行Vagrant"></a>执行Vagrant</h2><p>至此，我们已经配置好了Vagrant和Chef。我们将启动Vagrant虚拟主机，并通过ssh登陆进去！</p>
<figure class="highlight vala"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br></pre></td><td class="code"><pre><span class="line"><span class="preprocessor"># The commented lines are the output you should see when you run these commands</span></span><br><span class="line"></span><br><span class="line">vagrant up</span><br><span class="line"><span class="preprocessor">#==&gt; default: Checking if box 'ubuntu/xenial64' is up to date...</span></span><br><span class="line"><span class="preprocessor">#==&gt; default: Clearing any previously set forwarded ports...</span></span><br><span class="line"><span class="preprocessor">#==&gt; default: Installing Chef cookbooks with Librarian-Chef...</span></span><br><span class="line"><span class="preprocessor">#==&gt; default: The cookbook path '/Users/chris/code/test_app/site-cookbooks' doesn't exist. Ignoring...</span></span><br><span class="line"><span class="preprocessor">#==&gt; default: Clearing any previously set network interfaces...</span></span><br><span class="line"><span class="preprocessor">#==&gt; default: Preparing network interfaces based on configuration...</span></span><br><span class="line"><span class="preprocessor">#    default: Adapter 1: nat</span></span><br><span class="line"><span class="preprocessor">#==&gt; default: Forwarding ports...</span></span><br><span class="line"><span class="preprocessor">#    default: 3000 =&gt; 3000 (adapter 1)</span></span><br><span class="line"><span class="preprocessor">#    default: 22 =&gt; 2222 (adapter 1)</span></span><br><span class="line"><span class="preprocessor">#==&gt; default: Running 'pre-boot' VM customizations...</span></span><br><span class="line"><span class="preprocessor">#==&gt; default: Booting VM...</span></span><br><span class="line"><span class="preprocessor">#==&gt; default: Waiting for machine to boot. This may take a few minutes...</span></span><br><span class="line"><span class="preprocessor">#    default: SSH address: 127.0.0.1:2222</span></span><br><span class="line"><span class="preprocessor">#    default: SSH username: vagrant</span></span><br><span class="line"><span class="preprocessor">#    default: SSH auth method: private key</span></span><br><span class="line"><span class="preprocessor">#    default: Warning: Connection timeout. Retrying...</span></span><br><span class="line"><span class="preprocessor">#==&gt; default: Machine booted and ready!</span></span><br><span class="line"><span class="preprocessor">#==&gt; default: Checking for guest additions in VM...</span></span><br><span class="line"><span class="preprocessor">#==&gt; default: Mounting shared folders...</span></span><br><span class="line"><span class="preprocessor">#    default: /vagrant =&gt; /Users/chris/code/test_app</span></span><br><span class="line"><span class="preprocessor">#   default: /tmp/vagrant-chef-1/chef-solo-1/cookbooks =&gt; /Users/chris/code/test_app/cookbooks</span></span><br><span class="line"><span class="preprocessor">#==&gt; default: VM already provisioned. Run `vagrant provision` or use `--provision` to force it</span></span><br><span class="line"></span><br><span class="line">vagrant ssh</span><br><span class="line"><span class="preprocessor">#Welcome to Ubuntu 16.04 LTS (GNU/Linux 3.13.0-24-generic x86_64)</span></span><br><span class="line"><span class="preprocessor">#</span></span><br><span class="line"><span class="preprocessor"># * Documentation:  https://help.ubuntu.com/</span></span><br><span class="line"><span class="preprocessor">#</span></span><br><span class="line"><span class="preprocessor"># System information disabled due to load higher than 1.0</span></span><br><span class="line"><span class="preprocessor">#</span></span><br><span class="line"><span class="preprocessor">#  Get cloud support with Ubuntu Advantage Cloud Guest:</span></span><br><span class="line"><span class="preprocessor">#    http://www.ubuntu.com/business/services/cloud</span></span><br><span class="line"><span class="preprocessor">#</span></span><br><span class="line"><span class="preprocessor">#</span></span><br><span class="line"><span class="preprocessor">#vagrant@vagrant-ubuntu-xenial-64:~$</span></span><br></pre></td></tr></table></figure>
<p>首次启动vagrant需要很长很长很长时间，因为需要准备chef文件中设置的诸多配置项，之后再次执行的话，不再执行Chef就会快很多了。</p>
<p>如果修改了Vagrantfile和Cheffile文件，你需要使用如下命令重新使机器配置生效</p>
<figure class="highlight nginx"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="title">vagrant</span> provision</span><br></pre></td></tr></table></figure>
<h2 id="u5728Vagrant_u4E2D_u4F7F_u7528Rails"><a href="#u5728Vagrant_u4E2D_u4F7F_u7528Rails" class="headerlink" title="在Vagrant中使用Rails"></a>在Vagrant中使用Rails</h2><p>Vagrant会创建一个名字为/vagrant的共享文件夹，可以是虚拟机和本机之间做文件共享。如果进入/vagrant目录下并执行ls命令，会看到Rails项目的所有文件。</p>
<figure class="highlight"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">bundle</span><br></pre></td></tr></table></figure>
<p>在虚拟机中安装所有需要的gem。</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">rbenv <span class="built_in">rehash</span></span><br></pre></td></tr></table></figure>
<p>确保我们刚刚安装的gem是可用的。</p>
<figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">rake</span> <span class="tag">db</span><span class="pseudo">:create</span> &amp;&amp; <span class="tag">rake</span> <span class="tag">db</span><span class="pseudo">:migrate</span></span><br></pre></td></tr></table></figure>
<p>创建和迁移数据库。</p>
<p>该目录下的Rails服务器通过3000端口对外提供服务。可以通过localhost:3000访问Rails。</p>
<h2 id="u7ED3_u8BED"><a href="#u7ED3_u8BED" class="headerlink" title="结语"></a>结语</h2><p>Vagrant是一个非常Diao的工具，非常方便，通过见得的Chef配置文件，我们可以随时随地使用。<br>如果你需要再次配置一个Vagrant机器，或者是你的合作小伙伴需要配置一个的话，你们只需要执行</p>
<figure class="highlight nginx"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="title">vagrant</span> up</span><br></pre></td></tr></table></figure>
<p>即可。</p>
<p>Q&amp;A</p>
<ul>
<li><p>执行vagrant up命令失败<br>A：请检查 VirtualBox的版本是否与Vagrant下载扩展的版本一致，我本地使用的是5.0.24 。</p>
<figure class="highlight delphi"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">==&gt; <span class="keyword">default</span>: Machine booted <span class="keyword">and</span> ready!</span><br><span class="line">[<span class="keyword">default</span>] GuestAdditions versions <span class="keyword">on</span> your host (<span class="number">4.3</span>.<span class="number">28</span>) <span class="keyword">and</span> guest (<span class="number">5.0</span>.<span class="number">24</span>) <span class="keyword">do</span> <span class="keyword">not</span> match.</span><br><span class="line">mesg: ttyname failed: Inappropriate ioctl <span class="keyword">for</span> device</span><br><span class="line">mesg: ttyname failed: Inappropriate ioctl <span class="keyword">for</span> device</span><br></pre></td></tr></table></figure>
<p>另外Vagrant 1.8.4与 VirtualBox5.1.x版本不兼容。</p>
<figure class="highlight applescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line">➜  ds git:(dev) ✗ vagrant up <span class="comment">--provider=virtualbox</span></span><br><span class="line">No usable default provider could be found <span class="keyword">for</span> your system.</span><br><span class="line"></span><br><span class="line">Vagrant relies <span class="function_start"><span class="keyword">on</span></span> interactions <span class="keyword">with</span> <span class="number">3</span>rd party systems, known <span class="keyword">as</span></span><br><span class="line"><span class="string">"providers"</span>, <span class="keyword">to</span> provide Vagrant <span class="keyword">with</span> resources <span class="keyword">to</span> <span class="command">run</span> development</span><br><span class="line">environments. Examples are VirtualBox, VMware, Hyper-V.</span><br><span class="line"></span><br><span class="line">The easiest solution <span class="keyword">to</span> this message <span class="keyword">is</span> <span class="keyword">to</span> install VirtualBox, which</span><br><span class="line"><span class="keyword">is</span> available <span class="keyword">for</span> free <span class="function_start"><span class="keyword">on</span></span> all major platforms.</span><br><span class="line"></span><br><span class="line">If you believe you already have a provider available, make sure <span class="keyword">it</span></span><br><span class="line"><span class="keyword">is</span> properly installed <span class="keyword">and</span> configured. You can see more details <span class="keyword">about</span></span><br><span class="line">why a particular provider <span class="keyword">isn't</span> working <span class="keyword">by</span> forcing usage <span class="keyword">with</span></span><br><span class="line">`vagrant up <span class="comment">--provider=PROVIDER`, which should give you a more specific</span></span><br><span class="line"><span class="keyword">error</span> message <span class="keyword">for</span> <span class="keyword">that</span> particular provider.</span><br><span class="line">➜  ds git:(dev) ✗ cat /etc/profile</span><br></pre></td></tr></table></figure>
</li>
<li><p>需要安装ruby-dev</p>
<figure class="highlight q"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo apt-<span class="built_in">get</span> install ruby-<span class="built_in">dev</span></span><br></pre></td></tr></table></figure>
</li>
<li><p>PostgresSQL 头文件</p>
<figure class="highlight q"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo apt-<span class="built_in">get</span> install libpq-<span class="built_in">dev</span></span><br></pre></td></tr></table></figure>
</li>
</ul>
</div><div class="tags"><a href="/tags/Development/">Development</a><a href="/tags/Rails/">Rails</a><a href="/tags/Vagrant/">Vagrant</a></div><div class="post-nav"><a href="/2016/06/29/Laravel和Dropzone-js实现文件上传/" class="next">Laravel和Dropzone.js实现文件上传<i class="icon-next"></i></a></div><div id="disqus_thread"><script>var disqus_shortname = 'reasonpun';
var disqus_identifier = '2016/11/04/Using-Vagrant-for-Rails-Development/';
var disqus_title = '使用Vagrant部署Rails项目';
var disqus_url = 'http://pangz.me/2016/11/04/Using-Vagrant-for-Rails-Development/';
(function() {
  var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
  dsq.src = '//' + disqus_shortname + '.disqus.com/embed.js';
  (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
})();</script><script id="dsq-count-scr" src="//reasonpun.disqus.com/count.js" async="async"></script></div></div></div></div><div class="pure-u-1-4"><div id="sidebar"><div class="widget"><form action="//www.google.com/search" method="get" accept-charset="utf-8" target="_blank" class="search-form"><input type="text" name="q" maxlength="20" placeholder="Search" class="search-form-input"/><input type="hidden" name="sitesearch" value="http://pangz.me"/></form></div><div class="widget"><div class="widget-title">分类</div><ul class="category-list"><li class="category-list-item"><a class="category-list-link" href="/categories/AWK/">AWK</a><ul class="category-list-child"><li class="category-list-item"><a class="category-list-link" href="/categories/AWK/Linux/">Linux</a><ul class="category-list-child"><li class="category-list-item"><a class="category-list-link" href="/categories/AWK/Linux/Ebook/">Ebook</a></li></ul></li></ul></li><li class="category-list-item"><a class="category-list-link" href="/categories/Android/">Android</a><ul class="category-list-child"><li class="category-list-item"><a class="category-list-link" href="/categories/Android/源码/">源码</a></li></ul></li><li class="category-list-item"><a class="category-list-link" href="/categories/Laravel/">Laravel</a><ul class="category-list-child"><li class="category-list-item"><a class="category-list-link" href="/categories/Laravel/PHP/">PHP</a></li></ul></li><li class="category-list-item"><a class="category-list-link" href="/categories/Nginx/">Nginx</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/Python/">Python</a><ul class="category-list-child"><li class="category-list-item"><a class="category-list-link" href="/categories/Python/学习/">学习</a></li></ul></li><li class="category-list-item"><a class="category-list-link" href="/categories/Rails/">Rails</a><ul class="category-list-child"><li class="category-list-item"><a class="category-list-link" href="/categories/Rails/Vagrant/">Vagrant</a></li></ul></li><li class="category-list-item"><a class="category-list-link" href="/categories/数据挖掘/">数据挖掘</a><ul class="category-list-child"><li class="category-list-item"><a class="category-list-link" href="/categories/数据挖掘/实时计算/">实时计算</a><ul class="category-list-child"><li class="category-list-item"><a class="category-list-link" href="/categories/数据挖掘/实时计算/优化/">优化</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/数据挖掘/实时计算/源码分析/">源码分析</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/数据挖掘/实时计算/虚拟化/">虚拟化</a></li></ul></li></ul></li><li class="category-list-item"><a class="category-list-link" href="/categories/系统维护/">系统维护</a><ul class="category-list-child"><li class="category-list-item"><a class="category-list-link" href="/categories/系统维护/日志处理/">日志处理</a></li></ul></li></ul></div><div class="widget"><div class="widget-title">标签</div><div class="tagcloud"><a href="/tags/Flume-NG/" style="font-size: 15px;">Flume-NG</a> <a href="/tags/Spark/" style="font-size: 15px;">Spark</a> <a href="/tags/Kernel/" style="font-size: 15px;">Kernel</a> <a href="/tags/Docker/" style="font-size: 15px;">Docker</a> <a href="/tags/HDFS/" style="font-size: 15px;">HDFS</a> <a href="/tags/Oryx2/" style="font-size: 15px;">Oryx2</a> <a href="/tags/documentation/" style="font-size: 15px;">documentation</a> <a href="/tags/Admin/" style="font-size: 15px;">Admin</a> <a href="/tags/Hadoop/" style="font-size: 15px;">Hadoop</a> <a href="/tags/Spark-Streaming/" style="font-size: 15px;">Spark-Streaming</a> <a href="/tags/Nginx/" style="font-size: 15px;">Nginx</a> <a href="/tags/Logrorate/" style="font-size: 15px;">Logrorate</a> <a href="/tags/Linux/" style="font-size: 15px;">Linux</a> <a href="/tags/Shell/" style="font-size: 15px;">Shell</a> <a href="/tags/Kafka/" style="font-size: 15px;">Kafka</a> <a href="/tags/Documentation/" style="font-size: 15px;">Documentation</a> <a href="/tags/Apache/" style="font-size: 15px;">Apache</a> <a href="/tags/Source/" style="font-size: 15px;">Source</a> <a href="/tags/Rails/" style="font-size: 15px;">Rails</a> <a href="/tags/Vagrant/" style="font-size: 15px;">Vagrant</a> <a href="/tags/Development/" style="font-size: 15px;">Development</a> <a href="/tags/awk/" style="font-size: 15px;">awk</a> <a href="/tags/programming/" style="font-size: 15px;">programming</a> <a href="/tags/spark/" style="font-size: 15px;">spark</a> <a href="/tags/优化/" style="font-size: 15px;">优化</a> <a href="/tags/正则/" style="font-size: 15px;">正则</a> <a href="/tags/日志/" style="font-size: 15px;">日志</a> <a href="/tags/Python/" style="font-size: 15px;">Python</a> <a href="/tags/Java/" style="font-size: 15px;">Java</a> <a href="/tags/Recommendation/" style="font-size: 15px;">Recommendation</a> <a href="/tags/Android/" style="font-size: 15px;">Android</a> <a href="/tags/Laravel/" style="font-size: 15px;">Laravel</a> <a href="/tags/PHP/" style="font-size: 15px;">PHP</a> <a href="/tags/Genetic-Algorithm/" style="font-size: 15px;">Genetic Algorithm</a></div></div><div class="widget"><div class="widget-title">最新文章</div><ul class="post-list"><li class="post-list-item"><a class="post-list-link" href="/2016/11/04/Using-Vagrant-for-Rails-Development/">使用Vagrant部署Rails项目</a></li><li class="post-list-item"><a class="post-list-link" href="/2016/06/29/Laravel和Dropzone-js实现文件上传/">Laravel和Dropzone.js实现文件上传</a></li><li class="post-list-item"><a class="post-list-link" href="/2016/06/13/Laravel-环境安装和配置/">Laravel 环境安装和配置</a></li><li class="post-list-item"><a class="post-list-link" href="/2016/04/08/set-up-oryx-env/">玩转 Oryx2 （一）</a></li><li class="post-list-item"><a class="post-list-link" href="/2016/04/07/Oryx2-performance-doc/">Oryx2 性能优化文档</a></li><li class="post-list-item"><a class="post-list-link" href="/2016/04/06/Oryx2-developer-doc/">Oryx2 开发者文档</a></li><li class="post-list-item"><a class="post-list-link" href="/2016/04/06/Oryx2-end-user-doc/">Oryx2 终端用户文档</a></li><li class="post-list-item"><a class="post-list-link" href="/2016/03/08/Java-keyword-volatile/">Java关键字volatile</a></li><li class="post-list-item"><a class="post-list-link" href="/2016/03/08/OKHttp-sourcecode/">OKHttp源码学习过程</a></li><li class="post-list-item"><a class="post-list-link" href="/2016/01/24/Reg-Nginx/">正则表达式处理Nginx</a></li></ul></div><div class="widget"><div class="widget-title">最近评论</div><script type="text/javascript" src="//reasonpun.disqus.com/recent_comments_widget.js?num_items=5&amp;hide_avatars=1&amp;avatar_size=32&amp;excerpt_length=20&amp;hide_mods=1"></script></div><div class="widget"><div class="widget-title">友情链接</div><ul></ul><a href="http://people.csail.mit.edu/matei/" title="Matei Zaharia" target="_blank">Matei Zaharia</a><ul></ul><a href="https://github.com/tensorflow/tensorflow" title="tensorflow" target="_blank">tensorflow</a></div></div></div></div><div id="footer">© <a href="/" rel="nofollow">Tensor Cell.</a> Powered by<a rel="nofollow" target="_blank" href="https://hexo.io"> Hexo.</a><a rel="nofollow" target="_blank" href="https://github.com/tufu9441/maupassant-hexo"> Theme</a> by<a rel="nofollow" target="_blank" href="https://github.com/pagecho"> Cho.</a></div><a id="rocket" href="#top" class="show"></a><script src="/js/jquery.min.js" type="text/javascript"></script>
<script src="/js/totop.js" type="text/javascript"></script><script src="/js/fancybox.pack.js" type="text/javascript"></script>
<script src="/js/jquery.fancybox.js" type="text/javascript"></script><link rel="stylesheet" href="/css/jquery.fancybox.css" type="text/css"></div></body></html>