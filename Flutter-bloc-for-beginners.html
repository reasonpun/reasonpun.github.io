<!DOCTYPE html><html lang="zh-CN"><head><meta charset="UTF-8"><meta name="viewport" content="width=device-width"><meta name="theme-color" content="#222"><meta name="generator" content="Hexo 6.3.0"><link rel="apple-touch-icon" sizes="180x180" href="/images/apple-touch-icon-next.png"><link rel="icon" type="image/png" sizes="32x32" href="/images/favicon-32x32-next.png"><link rel="icon" type="image/png" sizes="16x16" href="/images/favicon-16x16-next.png"><link rel="mask-icon" href="/images/logo.svg" color="#222"><link rel="stylesheet" href="/css/main.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free@6.0.0/css/all.min.css" integrity="sha256-jTIdiMuX/e3DGJUGwl3pKSxuc6YOuqtJYkM0bGQESA4=" crossorigin="anonymous"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/animate.css@3.1.1/animate.min.css" integrity="sha256-PR7ttpcvz8qrF57fur/yAx1qXMFJeJFiA6pSzWi0OIE=" crossorigin="anonymous"><script class="next-config" data-name="main" type="application/json">{"hostname":"pangz.fun","root":"/","images":"/images","scheme":"Gemini","darkmode":false,"version":"8.10.1","exturl":false,"sidebar":{"position":"left","display":"post","padding":18,"offset":12},"copycode":false,"bookmark":{"enable":false,"color":"#222","save":"auto"},"mediumzoom":true,"lazyload":false,"pangu":false,"comments":{"style":"tabs","active":null,"storage":true,"lazyload":false,"nav":null},"stickytabs":false,"motion":{"enable":true,"async":false,"transition":{"post_block":"fadeIn","post_header":"fadeInDown","post_body":"fadeInDown","coll_header":"fadeInLeft","sidebar":"fadeInUp"}},"prism":false,"i18n":{"placeholder":"æœç´¢...","empty":"æ²¡æœ‰æ‰¾åˆ°ä»»ä½•æœç´¢ç»“æœï¼š${query}","hits_time":"æ‰¾åˆ° ${hits} ä¸ªæœç´¢ç»“æœï¼ˆç”¨æ—¶ ${time} æ¯«ç§’ï¼‰","hits":"æ‰¾åˆ° ${hits} ä¸ªæœç´¢ç»“æœ"}}</script><script src="/js/config.js"></script><script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-4592202470693653" crossorigin="anonymous"></script><meta name="description" content="ä»€ä¹ˆæ˜¯Flutter çš„Boclæ¨¡å¼Flutter bloc æ˜¯ Flâ€‹â€‹utter åº”ç”¨ç¨‹åºçš„çŠ¶æ€ç®¡ç†ä¹‹ä¸€ã€‚æ‚¨å¯ä»¥ä½¿ç”¨å®ƒä»¥ ç®€å• çš„æ–¹å¼å¤„ç†åº”ç”¨ç¨‹åºçš„æ‰€æœ‰å¯èƒ½çŠ¶æ€ã€‚Flutter bloc æ˜“äºä½¿ç”¨ï¼Œå› ä¸ºæ‚¨å’Œæ‚¨çš„å›¢é˜Ÿå°†å¾ˆå¿«ç†è§£è¿™ä¸ªæ¦‚å¿µï¼Œæ— è®ºæ‚¨çš„çº§åˆ«æ˜¯ä»€ä¹ˆï¼Œè¿™ä¸ªåº“éƒ½æœ‰éå¸¸å¥½çš„æ–‡æ¡£å’Œå¤§é‡çš„ç¤ºä¾‹ï¼Œä¹Ÿæ˜¯ Flutter ç¤¾åŒºä¸­ä½¿ç”¨æœ€å¤šçš„åº“ä¹‹ä¸€ï¼Œå› æ­¤ï¼Œå¦‚æœæ‚¨æœ‰ä»»ä½•ç–‘é—®æˆ–é—®é¢˜ï¼Œæ‚¨å¯èƒ½ä¼šé€šè¿‡äº’è”ç½‘ä¸Šçš„ç®€å•"><meta property="og:type" content="article"><meta property="og:title" content="é€‚åˆåˆå­¦è€…çš„Flutter Blocæ¨¡å¼"><meta property="og:url" content="https://pangz.fun/Flutter-bloc-for-beginners.html"><meta property="og:site_name" content="é…·å­¦å°æ ˆ"><meta property="og:description" content="ä»€ä¹ˆæ˜¯Flutter çš„Boclæ¨¡å¼Flutter bloc æ˜¯ Flâ€‹â€‹utter åº”ç”¨ç¨‹åºçš„çŠ¶æ€ç®¡ç†ä¹‹ä¸€ã€‚æ‚¨å¯ä»¥ä½¿ç”¨å®ƒä»¥ ç®€å• çš„æ–¹å¼å¤„ç†åº”ç”¨ç¨‹åºçš„æ‰€æœ‰å¯èƒ½çŠ¶æ€ã€‚Flutter bloc æ˜“äºä½¿ç”¨ï¼Œå› ä¸ºæ‚¨å’Œæ‚¨çš„å›¢é˜Ÿå°†å¾ˆå¿«ç†è§£è¿™ä¸ªæ¦‚å¿µï¼Œæ— è®ºæ‚¨çš„çº§åˆ«æ˜¯ä»€ä¹ˆï¼Œè¿™ä¸ªåº“éƒ½æœ‰éå¸¸å¥½çš„æ–‡æ¡£å’Œå¤§é‡çš„ç¤ºä¾‹ï¼Œä¹Ÿæ˜¯ Flutter ç¤¾åŒºä¸­ä½¿ç”¨æœ€å¤šçš„åº“ä¹‹ä¸€ï¼Œå› æ­¤ï¼Œå¦‚æœæ‚¨æœ‰ä»»ä½•ç–‘é—®æˆ–é—®é¢˜ï¼Œæ‚¨å¯èƒ½ä¼šé€šè¿‡äº’è”ç½‘ä¸Šçš„ç®€å•"><meta property="og:locale" content="zh_CN"><meta property="og:image" content="https://pangz.fun/Flutter-bloc-for-beginners/1.png"><meta property="og:image" content="https://pangz.fun/Flutter-bloc-for-beginners/2.png"><meta property="og:image" content="https://pangz.fun/Flutter-bloc-for-beginners/3.png"><meta property="og:image" content="https://pangz.fun/Flutter-bloc-for-beginners/4.png"><meta property="og:image" content="https://pangz.fun/Flutter-bloc-for-beginners/5.png"><meta property="og:image" content="https://pangz.fun/Flutter-bloc-for-beginners/6.png"><meta property="og:image" content="https://pangz.fun/Flutter-bloc-for-beginners/7.png"><meta property="og:image" content="https://pangz.fun/Flutter-bloc-for-beginners/8.png"><meta property="og:image" content="https://pangz.fun/Flutter-bloc-for-beginners/9.png"><meta property="og:image" content="https://pangz.fun/Flutter-bloc-for-beginners/10.png"><meta property="og:image" content="https://pangz.fun/Flutter-bloc-for-beginners/11.gif"><meta property="og:image" content="https://pangz.fun/Flutter-bloc-for-beginners/12.png"><meta property="og:image" content="https://pangz.fun/Flutter-bloc-for-beginners/13.png"><meta property="og:image" content="https://pangz.fun/Flutter-bloc-for-beginners/15.png"><meta property="og:image" content="https://pangz.fun/Flutter-bloc-for-beginners/16.png"><meta property="article:published_time" content="2022-03-15T07:06:52.000Z"><meta property="article:modified_time" content="2025-01-23T09:09:21.439Z"><meta property="article:author" content="æœ¨è¾›å¿µåšæ¢“"><meta property="article:tag" content="Flutter"><meta property="article:tag" content="Patterns"><meta property="article:tag" content="Beginners"><meta name="twitter:card" content="summary"><meta name="twitter:image" content="https://pangz.fun/Flutter-bloc-for-beginners/1.png"><link rel="canonical" href="https://pangz.fun/Flutter-bloc-for-beginners.html"><script class="next-config" data-name="page" type="application/json">{"sidebar":"","isHome":false,"isPost":true,"lang":"zh-CN","comments":true,"permalink":"https://pangz.fun/Flutter-bloc-for-beginners.html","path":"Flutter-bloc-for-beginners.html","title":"é€‚åˆåˆå­¦è€…çš„Flutter Blocæ¨¡å¼"}</script><script class="next-config" data-name="calendar" type="application/json">""</script><title>é€‚åˆåˆå­¦è€…çš„Flutter Blocæ¨¡å¼ | é…·å­¦å°æ ˆ</title><script async src="https://www.googletagmanager.com/gtag/js?id=G-1HVT1YE421"></script><script class="next-config" data-name="google_analytics" type="application/json">{"tracking_id":"G-1HVT1YE421","only_pageview":false}</script><script src="/js/third-party/analytics/google-analytics.js"></script><link rel="stylesheet" type="text/css" href="/css/injector/main.css"><link rel="preload" as="style" href="/css/injector/light.css"><link rel="preload" as="style" href="/css/injector/dark.css"><noscript><link rel="stylesheet" href="/css/noscript.css"></noscript><style>.github-emoji{position:relative;display:inline-block;width:1.2em;min-height:1.2em;overflow:hidden;vertical-align:top;color:transparent}.github-emoji>span{position:relative;z-index:10}.github-emoji .fancybox,.github-emoji img{margin:0!important;padding:0!important;border:none!important;outline:0!important;text-decoration:none!important;user-select:none!important;cursor:auto!important}.github-emoji img{height:1.2em!important;width:1.2em!important;position:absolute!important;left:50%!important;top:50%!important;transform:translate(-50%,-50%)!important;user-select:none!important;cursor:auto!important}.github-emoji-fallback{color:inherit}.github-emoji-fallback img{opacity:0!important}</style><link rel="alternate" href="/atom.xml" title="é…·å­¦å°æ ˆ" type="application/atom+xml"></head><body itemscope itemtype="http://schema.org/WebPage" class="use-motion"><div class="headband"></div><main class="main"><header class="header" itemscope itemtype="http://schema.org/WPHeader"><div class="header-inner"><div class="site-brand-container"><div class="site-nav-toggle"><div class="toggle" aria-label="åˆ‡æ¢å¯¼èˆªæ " role="button"><span class="toggle-line"></span> <span class="toggle-line"></span> <span class="toggle-line"></span></div></div><div class="site-meta"><a href="/" class="brand" rel="start"><i class="logo-line"></i><p class="site-title">é…·å­¦å°æ ˆ</p><i class="logo-line"></i></a><p class="site-subtitle" itemprop="description">è¿˜è¦å†èµ°500é‡Œ</p></div><div class="site-nav-right"><div class="toggle popup-trigger"></div></div></div><nav class="site-nav"><ul class="main-menu menu"><li class="menu-item menu-item-home"><a href="/" rel="section"><i class="fa fa-home fa-fw"></i>é¦–é¡µ</a></li><li class="menu-item menu-item-about"><a href="/about/" rel="section"><i class="fa fa-user fa-fw"></i>å…³äº</a></li><li class="menu-item menu-item-tags"><a href="/tags/" rel="section"><i class="fa fa-tags fa-fw"></i>æ ‡ç­¾</a></li><li class="menu-item menu-item-categories"><a href="/categories/" rel="section"><i class="fa fa-th fa-fw"></i>åˆ†ç±»</a></li><li class="menu-item menu-item-archives"><a href="/archives/" rel="section"><i class="fa fa-archive fa-fw"></i>å½’æ¡£</a></li><li class="menu-item menu-item-rss"><a href="/atom.xml" rel="section"><i class="fa fa-rss fa-fw"></i>RSS</a></li></ul></nav></div><div class="toggle sidebar-toggle" role="button"><span class="toggle-line"></span> <span class="toggle-line"></span> <span class="toggle-line"></span></div><aside class="sidebar"><div class="sidebar-inner sidebar-nav-active sidebar-toc-active"><ul class="sidebar-nav"><li class="sidebar-nav-toc">æ–‡ç« ç›®å½•</li><li class="sidebar-nav-overview">ç«™ç‚¹æ¦‚è§ˆ</li></ul><div class="sidebar-panel-container"><div class="post-toc-wrap sidebar-panel"><div class="post-toc animated"><ol class="nav"><li class="nav-item nav-level-3"><a class="nav-link" href="#%E4%BB%80%E4%B9%88%E6%98%AFFlutter-%E7%9A%84Bocl%E6%A8%A1%E5%BC%8F"><span class="nav-number">1.</span> <span class="nav-text">ä»€ä¹ˆæ˜¯Flutter çš„Boclæ¨¡å¼</span></a></li></ol><li class="nav-item nav-level-2"><a class="nav-link" href="#%E9%82%A3%E4%B9%88%E2%80%A6%E2%80%A6%E6%88%91%E8%AF%A5%E5%A6%82%E4%BD%95%E4%BB%8E-Flutter-bloc-%E5%BC%80%E5%A7%8B%E5%91%A2%EF%BC%9F"><span class="nav-number"></span> <span class="nav-text">é‚£ä¹ˆâ€¦â€¦æˆ‘è¯¥å¦‚ä½•ä» Flutter bloc å¼€å§‹å‘¢ï¼Ÿ</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#%E5%AE%83%E6%98%AF%E5%A6%82%E4%BD%95%E5%B7%A5%E4%BD%9C%E7%9A%84%EF%BC%9F"><span class="nav-number">1.</span> <span class="nav-text">å®ƒæ˜¯å¦‚ä½•å·¥ä½œçš„ï¼Ÿ</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#Bloc-Widgets"><span class="nav-number">2.</span> <span class="nav-text">Bloc Widgets</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#RepositoryProvider-MultiRepositoryProvider"><span class="nav-number">3.</span> <span class="nav-text">RepositoryProvider&#x2F;MultiRepositoryProvider</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#BlocListener"><span class="nav-number">4.</span> <span class="nav-text">BlocListener</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#BlocBuilder"><span class="nav-number">5.</span> <span class="nav-text">BlocBuilder</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#BlocConsumer"><span class="nav-number">6.</span> <span class="nav-text">BlocConsumer</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#BlocSelector"><span class="nav-number">7.</span> <span class="nav-text">BlocSelector</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E5%9C%A8%E5%AE%9E%E9%99%85%E9%A1%B9%E7%9B%AE%E4%B8%AD%E4%BD%BF%E7%94%A8-Flutter-Bloc"><span class="nav-number"></span> <span class="nav-text">åœ¨å®é™…é¡¹ç›®ä¸­ä½¿ç”¨ Flutter Bloc</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#%E6%A0%87%E9%A2%98"><span class="nav-number">1.</span> <span class="nav-text">æ ‡é¢˜</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E7%B1%BB%E5%88%AB%E5%B0%8F%E9%83%A8%E4%BB%B6"><span class="nav-number">2.</span> <span class="nav-text">ç±»åˆ«å°éƒ¨ä»¶</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E5%88%86%E7%B1%BB%E7%AD%9B%E9%80%89%E6%B8%B8%E6%88%8F%E5%B0%8F%E9%83%A8%E4%BB%B6"><span class="nav-number">3.</span> <span class="nav-text">åˆ†ç±»ç­›é€‰æ¸¸æˆå°éƒ¨ä»¶</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E5%85%A8%E9%83%A8%E6%B8%B8%E6%88%8F"><span class="nav-number">4.</span> <span class="nav-text">å…¨éƒ¨æ¸¸æˆ</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E9%A1%B9%E7%9B%AE%E7%BB%93%E6%9E%84"><span class="nav-number">5.</span> <span class="nav-text">é¡¹ç›®ç»“æ„</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#Home%E9%A1%B5%E9%9D%A2"><span class="nav-number">6.</span> <span class="nav-text">Homeé¡µé¢</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#HomeLayout"><span class="nav-number">7.</span> <span class="nav-text">HomeLayout</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#CategoriesWidget"><span class="nav-number"></span> <span class="nav-text">CategoriesWidget</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#Category-event"><span class="nav-number">1.</span> <span class="nav-text">Category event</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#Category-state"><span class="nav-number">2.</span> <span class="nav-text">Category state</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#Category-bloc"><span class="nav-number">3.</span> <span class="nav-text">Category bloc</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#GameByCategoryWidget"><span class="nav-number"></span> <span class="nav-text">GameByCategoryWidget</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#GameByCategoryEvent"><span class="nav-number">1.</span> <span class="nav-text">GameByCategoryEvent</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#GameByCategoryState"><span class="nav-number">2.</span> <span class="nav-text">GameByCategoryState</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#GameByCategoryBloc"><span class="nav-number">3.</span> <span class="nav-text">GameByCategoryBloc</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#AllGamesWidget"><span class="nav-number"></span> <span class="nav-text">AllGamesWidget</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#AllGamesEvent"><span class="nav-number">1.</span> <span class="nav-text">AllGamesEvent</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#AllGamesState"><span class="nav-number">2.</span> <span class="nav-text">AllGamesState</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#AllGamesBloc"><span class="nav-number">3.</span> <span class="nav-text">AllGamesBloc</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#AllGamesWidget-1"><span class="nav-number">4.</span> <span class="nav-text">AllGamesWidget</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E9%A2%9D%E5%A4%96%E7%9A%84%E4%B8%9C%E8%A5%BF%F0%9F%99%8C"><span class="nav-number">5.</span> <span class="nav-text">é¢å¤–çš„ä¸œè¥¿ğŸ™Œ</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E7%BB%93%E8%AE%BA"><span class="nav-number"></span> <span class="nav-text">ç»“è®º</span></a></li></div></div><div class="site-overview-wrap sidebar-panel"><div class="site-author site-overview-item animated" itemprop="author" itemscope itemtype="http://schema.org/Person"><p class="site-author-name" itemprop="name">æœ¨è¾›å¿µåšæ¢“</p><div class="site-description" itemprop="description">è¯»ä¸‡å·ä¹¦ï¼Œè¡Œä¸‡é‡Œè·¯ï¼Œèƒ¸ä¸­è„±å»å°˜æµŠ</div></div><div class="site-state-wrap site-overview-item animated"><nav class="site-state"><div class="site-state-item site-state-posts"><a href="/archives/"><span class="site-state-item-count">109</span> <span class="site-state-item-name">æ—¥å¿—</span></a></div><div class="site-state-item site-state-categories"><a href="/categories/"><span class="site-state-item-count">21</span> <span class="site-state-item-name">åˆ†ç±»</span></a></div><div class="site-state-item site-state-tags"><a href="/tags/"><span class="site-state-item-count">113</span> <span class="site-state-item-name">æ ‡ç­¾</span></a></div></nav></div><div class="links-of-blogroll site-overview-item animated"><div class="links-of-blogroll-title"><i class="fa fa-globe fa-fw"></i> Links</div><ul class="links-of-blogroll-list"><li class="links-of-blogroll-item"><a href="https://io-oi.me/" title="https:&#x2F;&#x2F;io-oi.me" rel="noopener" target="_blank">reuixiy</a></li></ul></div></div></div></div></aside><div class="sidebar-dimmer"></div></header><div class="back-to-top" role="button" aria-label="è¿”å›é¡¶éƒ¨"><i class="fa fa-arrow-up"></i> <span>0%</span></div><noscript><div class="noscript-warning">Theme NexT works best with JavaScript enabled</div></noscript><div class="main-inner post posts-expand"><div class="post-block"><article itemscope itemtype="http://schema.org/Article" class="post-content" lang="zh-CN"><link itemprop="mainEntityOfPage" href="https://pangz.fun/Flutter-bloc-for-beginners.html"><span hidden itemprop="author" itemscope itemtype="http://schema.org/Person"><meta itemprop="image" content="/images/avatar.gif"><meta itemprop="name" content="æœ¨è¾›å¿µåšæ¢“"></span><span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization"><meta itemprop="name" content="é…·å­¦å°æ ˆ"><meta itemprop="description" content="è¯»ä¸‡å·ä¹¦ï¼Œè¡Œä¸‡é‡Œè·¯ï¼Œèƒ¸ä¸­è„±å»å°˜æµŠ"></span><span hidden itemprop="post" itemscope itemtype="http://schema.org/CreativeWork"><meta itemprop="name" content="é€‚åˆåˆå­¦è€…çš„Flutter Blocæ¨¡å¼ | é…·å­¦å°æ ˆ"><meta itemprop="description" content=""></span><header class="post-header"><h1 class="post-title" itemprop="name headline">é€‚åˆåˆå­¦è€…çš„Flutter Blocæ¨¡å¼</h1><div class="post-meta-container"><div class="post-meta"><span class="post-meta-item"><span class="post-meta-item-icon"><i class="far fa-calendar"></i> </span><span class="post-meta-item-text">å‘è¡¨äº</span> <time title="åˆ›å»ºæ—¶é—´ï¼š2022-03-15 15:06:52" itemprop="dateCreated datePublished" datetime="2022-03-15T15:06:52+08:00">2022-03-15</time> </span><span class="post-meta-item"><span class="post-meta-item-icon"><i class="far fa-calendar-check"></i> </span><span class="post-meta-item-text">æ›´æ–°äº</span> <time title="ä¿®æ”¹æ—¶é—´ï¼š2025-01-23 17:09:21" itemprop="dateModified" datetime="2025-01-23T17:09:21+08:00">2025-01-23</time> </span><span class="post-meta-item"><span class="post-meta-item-icon"><i class="far fa-folder"></i> </span><span class="post-meta-item-text">åˆ†ç±»äº</span> <span itemprop="about" itemscope itemtype="http://schema.org/Thing"><a href="/categories/Flutter/" itemprop="url" rel="index"><span itemprop="name">Flutter</span></a> </span></span><span class="post-meta-item" title="é˜…è¯»æ¬¡æ•°" id="busuanzi_container_page_pv"><span class="post-meta-item-icon"><i class="far fa-eye"></i> </span><span class="post-meta-item-text">é˜…è¯»æ¬¡æ•°ï¼š</span> <span id="busuanzi_value_page_pv"></span> </span><span class="post-meta-break"></span> <span class="post-meta-item" title="æœ¬æ–‡å­—æ•°"><span class="post-meta-item-icon"><i class="far fa-file-word"></i> </span><span class="post-meta-item-text">æœ¬æ–‡å­—æ•°ï¼š</span> <span>20k</span> </span><span class="post-meta-item" title="é˜…è¯»æ—¶é•¿"><span class="post-meta-item-icon"><i class="far fa-clock"></i> </span><span class="post-meta-item-text">é˜…è¯»æ—¶é•¿ &asymp;</span> <span>18 åˆ†é’Ÿ</span></span></div></div></header><div class="post-body" itemprop="articleBody"><img src="/Flutter-bloc-for-beginners/1.png" title="ç¤ºæ„å›¾ width=400"><h3 id="ä»€ä¹ˆæ˜¯Flutter-çš„Boclæ¨¡å¼"><a href="#ä»€ä¹ˆæ˜¯Flutter-çš„Boclæ¨¡å¼" class="headerlink" title="ä»€ä¹ˆæ˜¯Flutter çš„Boclæ¨¡å¼"></a>ä»€ä¹ˆæ˜¯Flutter çš„Boclæ¨¡å¼</h3><p>Flutter bloc æ˜¯ Flâ€‹â€‹utter åº”ç”¨ç¨‹åºçš„çŠ¶æ€ç®¡ç†ä¹‹ä¸€ã€‚æ‚¨å¯ä»¥ä½¿ç”¨å®ƒä»¥ <strong>ç®€å•</strong> çš„æ–¹å¼å¤„ç†åº”ç”¨ç¨‹åºçš„æ‰€æœ‰å¯èƒ½çŠ¶æ€ã€‚<br>Flutter bloc æ˜“äºä½¿ç”¨ï¼Œå› ä¸ºæ‚¨å’Œæ‚¨çš„å›¢é˜Ÿå°†å¾ˆå¿«ç†è§£è¿™ä¸ªæ¦‚å¿µï¼Œæ— è®ºæ‚¨çš„çº§åˆ«æ˜¯ä»€ä¹ˆï¼Œè¿™ä¸ªåº“éƒ½æœ‰éå¸¸å¥½çš„æ–‡æ¡£å’Œå¤§é‡çš„ç¤ºä¾‹ï¼Œä¹Ÿæ˜¯ Flutter ç¤¾åŒºä¸­ä½¿ç”¨æœ€å¤šçš„åº“ä¹‹ä¸€ï¼Œå› æ­¤ï¼Œå¦‚æœæ‚¨æœ‰ä»»ä½•ç–‘é—®æˆ–é—®é¢˜ï¼Œæ‚¨å¯èƒ½ä¼šé€šè¿‡äº’è”ç½‘ä¸Šçš„ç®€å•æœç´¢æ‰¾åˆ°è§£å†³æ–¹æ¡ˆã€‚</p><span id="more"></span><p><strong>åŠŸèƒ½å¼ºå¤§</strong>æ˜¯å› ä¸ºå®ƒå¯ä»¥å¸®åŠ©æ‚¨åˆ›å»ºå„ç§åº”ç”¨ç¨‹åºï¼Œä¾‹å¦‚æ‚¨å¯ä»¥åˆ›å»ºç”¨äºå­¦ä¹ ç›®çš„çš„åº”ç”¨ç¨‹åºï¼Œä¹Ÿå¯ä»¥åœ¨ç”Ÿäº§ç¯å¢ƒä¸­åˆ›å»ºå¤æ‚çš„åº”ç”¨ç¨‹åºï¼Œflutter bloc åœ¨è¿™ä¸¤ç§æƒ…å†µä¸‹éƒ½æœ‰æ•ˆã€‚<br>è¿™ä¸ªåº“çš„å¦ä¸€ä¸ªé‡è¦æ–¹é¢æ˜¯æ‚¨å¯ä»¥è½»æ¾åœ°<strong>æµ‹è¯•</strong>æ‚¨çš„å—é€»è¾‘ã€‚</p><p>æ›´å¤šä¿¡æ¯ï¼Œæ‚¨å¯ä»¥è®¿é—®å®˜æ–¹ç½‘ç«™ï¼š<a target="_blank" rel="noopener" href="https://bloclibrary.dev/#/gettingstarted">https://bloclibrary.dev/#/gettingstarted</a></p><h2 id="é‚£ä¹ˆâ€¦â€¦æˆ‘è¯¥å¦‚ä½•ä»-Flutter-bloc-å¼€å§‹å‘¢ï¼Ÿ"><a href="#é‚£ä¹ˆâ€¦â€¦æˆ‘è¯¥å¦‚ä½•ä»-Flutter-bloc-å¼€å§‹å‘¢ï¼Ÿ" class="headerlink" title="é‚£ä¹ˆâ€¦â€¦æˆ‘è¯¥å¦‚ä½•ä» Flutter bloc å¼€å§‹å‘¢ï¼Ÿ"></a>é‚£ä¹ˆâ€¦â€¦æˆ‘è¯¥å¦‚ä½•ä» Flutter bloc å¼€å§‹å‘¢ï¼Ÿ</h2><p>æˆ‘ç»™ä½ çš„ç¬¬ä¸€ä¸ªå»ºè®®æ˜¯ä½ åº”è¯¥é˜…è¯»æ–‡æ¡£å¹¶é˜…è¯»åŸºç¡€çŸ¥è¯†ï¼Œåœ¨æœ¬æ–‡ä¸­æˆ‘å°†å°è¯•è§£é‡Šå®ƒï¼Œä½†å¦‚æœä½ éœ€è¦æ›´æ·±å…¥ï¼Œæˆ‘å¼ºçƒˆå»ºè®®ä½ è®¿é—®æ–‡æ¡£ã€‚</p><h3 id="å®ƒæ˜¯å¦‚ä½•å·¥ä½œçš„ï¼Ÿ"><a href="#å®ƒæ˜¯å¦‚ä½•å·¥ä½œçš„ï¼Ÿ" class="headerlink" title="å®ƒæ˜¯å¦‚ä½•å·¥ä½œçš„ï¼Ÿ"></a>å®ƒæ˜¯å¦‚ä½•å·¥ä½œçš„ï¼Ÿ</h3><p>å½“æ‚¨ä½¿ç”¨Flutter bloc æ—¶ï¼Œæ‚¨å°†åˆ›å»ºäº‹ä»¶æ¥è§¦å‘ä¸åº”ç”¨ç¨‹åºçš„äº¤äº’ï¼Œç„¶åè´Ÿè´£çš„ bloc å°†å‘å‡ºå¸¦æœ‰çŠ¶æ€çš„è¯·æ±‚æ•°æ®ï¼Œåœ¨ä¸€ä¸ªçœŸå®çš„ç¤ºä¾‹ä¸­ï¼Œå®ƒå°†æ˜¯è¿™æ ·çš„ï¼š</p><p>1- ç”¨æˆ·å•å‡»æŒ‰é’®ä»¥è·å–æ¸¸æˆåˆ—è¡¨ã€‚<br>2- äº‹ä»¶è¢«è§¦å‘ï¼Œå¹¶é€šçŸ¥é˜»æ­¢ç”¨æˆ·æƒ³è¦ä¸€ä¸ªæ¸¸æˆåˆ—è¡¨ã€‚<br>3- è¯¥blocå°†è¯·æ±‚æ­¤æ•°æ®ï¼ˆä¾‹å¦‚ï¼Œä»è´Ÿè´£è¿æ¥åˆ° API ä»¥è·å–æ•°æ®çš„å­˜å‚¨åº“ï¼‰ã€‚<br>4-å½“å—æœ‰æ•°æ®æ—¶ï¼Œå®ƒå°†ç¡®å®šæ•°æ®æ˜¯æˆåŠŸè¿˜æ˜¯é”™è¯¯ï¼Œç„¶åå®ƒä¼šå‘å‡ºä¸€ä¸ªçŠ¶æ€ã€‚<br>5- è§†å›¾å°†å¬å–æ¬§ç›Ÿå¯èƒ½å‘å‡ºçš„æ‰€æœ‰å¯èƒ½çŠ¶æ€ä»¥å¯¹å…¶ä½œå‡ºååº”ã€‚ä¾‹å¦‚ï¼Œå¦‚æœ bloc å‘å‡º Success ä½œä¸ºçŠ¶æ€ï¼Œåˆ™è§†å›¾å°†ä½¿ç”¨æ¸¸æˆåˆ—è¡¨é‡å»ºå®ƒï¼Œä½†å¦‚æœçŠ¶æ€ä¸º Errorï¼Œåˆ™è§†å›¾å°†ä½¿ç”¨é”™è¯¯æ¶ˆæ¯æˆ–æ‚¨æƒ³è¦æ˜¾ç¤ºçš„ä»»ä½•å†…å®¹è¿›è¡Œé‡å»ºã€‚</p><img src="/Flutter-bloc-for-beginners/2.png" title="ç¤ºæ„å›¾ width=400"><p>å®Œç¾ï¼Œç°åœ¨æ‚¨çŸ¥é“äº†Flutter bloc å¦‚ä½•å·¥ä½œçš„ä¸»è¦æ¦‚å¿µï¼ç°åœ¨ï¼Œæ˜¯æ—¶å€™çŸ¥é“å¦‚ä½•ä½¿ç”¨å®ƒäº†ã€‚<br>æƒ³è±¡ä¸€ä¸‹ï¼Œä½ æƒ³åˆ›å»ºä¸€ä¸ªä¸æ¸¸æˆç›¸å…³çš„å—é€»è¾‘ï¼Œä½ å°†éœ€è¦è¿™ä¸‰ä¸ªç±»ï¼š</p><ul><li>games_bloc.dart</li><li>games_state.dart</li><li>games_event.dart</li></ul><p>å¦‚æ‚¨æ‰€è§ï¼Œæ‚¨å°†éœ€è¦ä¸€ä¸ªå—ã€çŠ¶æ€å’Œäº‹ä»¶ç±»ã€‚<br>åœ¨æ¯ä¸ªç±»ä¸­ï¼Œæ‚¨å°†ç®¡ç†æ‰€éœ€çš„ä¿¡æ¯ï¼Œä¸è¦ç€æ€¥ï¼Œæ¥ä¸‹é‡Œçš„å†…å®¹é‡Œæˆ‘ä»¬ä¼šè¯¦ç»†è®²è§£ä¸€ä¸‹è¿™äº›çŸ¥è¯†ã€‚</p><h3 id="Bloc-Widgets"><a href="#Bloc-Widgets" class="headerlink" title="Bloc Widgets"></a>Bloc Widgets</h3><p>è¿™äº›æ˜¯åº“ä¸ºæ‚¨æä¾›çš„ç”¨äºç®¡ç†æ‰€æœ‰å¯èƒ½æƒ…å†µçš„å°éƒ¨ä»¶ï¼Œä¾‹å¦‚ï¼Œæ·»åŠ äº‹ä»¶ã€ä¾¦å¬çŠ¶æ€ã€å‘å‡ºçŠ¶æ€ã€æ ¹æ®çŠ¶æ€é‡å»ºè§†å›¾ç­‰ã€‚</p><p><em>BlocProvider/MultiBlocProvider</em></p><p>BlocProvider è´Ÿè´£ä¸ºå…¶å­ä»£æä¾›blocã€‚æ˜¯åœ¨ä½¿ç”¨ä¹‹å‰â€œåˆå§‹åŒ–â€ bloc çš„æ–¹å¼ã€‚</p><img src="/Flutter-bloc-for-beginners/3.png" title="ç¤ºæ„å›¾ width=400"><p>å¦‚æœæ‚¨éœ€è¦æä¾›å¤šä¸ªå—ï¼Œæ‚¨å¯ä»¥ä½¿ç”¨ MultiBlocProvider æ¥è·å–ä¸åŒçš„æä¾›è€…ã€‚</p><img src="/Flutter-bloc-for-beginners/4.png" title="ç¤ºæ„å›¾ width=400"><h3 id="RepositoryProvider-MultiRepositoryProvider"><a href="#RepositoryProvider-MultiRepositoryProvider" class="headerlink" title="RepositoryProvider/MultiRepositoryProvider"></a>RepositoryProvider/MultiRepositoryProvider</h3><p>RepositoryProvider ç”¨äºä¸ºå…¶å­é¡¹æä¾›å­˜å‚¨åº“ã€‚é€šå¸¸ï¼Œå½“æ‚¨éœ€è¦åˆ›å»ºå­˜å‚¨åº“ç±»çš„å®ä¾‹æ—¶ï¼Œæ‚¨å°†ä½¿ç”¨å®ƒï¼Œç„¶åä½¿ç”¨ BlocProviderï¼Œæ‚¨å°†åœ¨</p><pre class="line-numbers language-none"><code class="language-none">context.read&lt;YourRepository&gt;(); <span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><p>çš„å¸®åŠ©ä¸‹è®¿é—®è¯¥å­˜å‚¨åº“ï¼›</p><p>è¿™æ˜¯ä¸€ä¸ªä¾‹å­ã€‚</p><img src="/Flutter-bloc-for-beginners/5.png" title="ç¤ºæ„å›¾ width=400"><p>å¦‚æœæ‚¨éœ€è¦å¤šä¸ªå­˜å‚¨åº“æä¾›ç¨‹åºï¼Œæ‚¨å¯ä»¥ä½¿ç”¨ MultiRepositoryProvider</p><img src="/Flutter-bloc-for-beginners/6.png" title="ç¤ºæ„å›¾ width=400"><h3 id="BlocListener"><a href="#BlocListener" class="headerlink" title="BlocListener"></a>BlocListener</h3><p>ä½¿ç”¨è¿™ä¸ªå°éƒ¨ä»¶ï¼Œæ‚¨å°†èƒ½å¤Ÿâ€œç›‘å¬â€ä»æ‚¨çš„blocå‘å‡ºçš„ä¸åŒçŠ¶æ€ï¼Œç„¶åå¯¹å®ƒä»¬åšå‡ºååº”ï¼Œä¾‹å¦‚ï¼Œæ˜¾ç¤ºä¸€ä¸ªå¿«é¤æ ã€å¯¹è¯æ¡†æˆ–å¯¼èˆªåˆ°å¦ä¸€ä¸ªé¡µé¢â€¦â€¦è¿™ä¸ªå°éƒ¨ä»¶ä¸é‡å»ºè§†å›¾ï¼Œå®ƒåªæ˜¯åœ¨å¬ã€‚</p><img src="/Flutter-bloc-for-beginners/7.png" title="ç¤ºæ„å›¾ width=400"><h3 id="BlocBuilder"><a href="#BlocBuilder" class="headerlink" title="BlocBuilder"></a>BlocBuilder</h3><p>æœ‰äº†è¿™ä¸ªï¼Œä½ å°†èƒ½å¤Ÿæ ¹æ®å®ƒä»¬çš„çŠ¶æ€é‡å»ºä½ çš„å°éƒ¨ä»¶ã€‚</p><img src="/Flutter-bloc-for-beginners/8.png" title="ç¤ºæ„å›¾ width=400"><h3 id="BlocConsumer"><a href="#BlocConsumer" class="headerlink" title="BlocConsumer"></a>BlocConsumer</h3><p>å½“æ‚¨éœ€è¦æ§åˆ¶å—çš„çŠ¶æ€ä»¥é‡å»ºå°éƒ¨ä»¶ä»¥åŠå¯¼èˆªæˆ–æ˜¾ç¤ºå¯¹è¯æ¡†ç­‰æ—¶ï¼Œæ­¤å°éƒ¨ä»¶éå¸¸æœ‰ç”¨ã€‚æ­¤å°éƒ¨ä»¶å…·æœ‰ä¾¦å¬å™¨å’Œæ„å»ºå™¨åŠŸèƒ½ï¼Œå› æ­¤æ‚¨å¯ä»¥ä¸€èµ·ä½¿ç”¨å®ƒã€‚</p><img src="/Flutter-bloc-for-beginners/9.png" title="ç¤ºæ„å›¾ width=400"><h3 id="BlocSelector"><a href="#BlocSelector" class="headerlink" title="BlocSelector"></a>BlocSelector</h3><p>æ­¤å°éƒ¨ä»¶å…è®¸å¼€å‘äººå‘˜é€šè¿‡æ ¹æ®å½“å‰åŒºå—çŠ¶æ€é€‰æ‹©æ–°å€¼æ¥è¿‡æ»¤æ›´æ–°ã€‚</p><img src="/Flutter-bloc-for-beginners/10.png" title="ç¤ºæ„å›¾ width=400"><p>æœ‰å…³æ›´å¤šä¿¡æ¯ï¼Œæ‚¨å¯ä»¥æŸ¥çœ‹æ–‡æ¡£ã€‚<br>ä¹‹åï¼Œæˆ‘ä»¬å¯ä»¥ä»ä¾‹å­å¼€å§‹ğŸ™Œ</p><h2 id="åœ¨å®é™…é¡¹ç›®ä¸­ä½¿ç”¨-Flutter-Bloc"><a href="#åœ¨å®é™…é¡¹ç›®ä¸­ä½¿ç”¨-Flutter-Bloc" class="headerlink" title="åœ¨å®é™…é¡¹ç›®ä¸­ä½¿ç”¨ Flutter Bloc"></a>åœ¨å®é™…é¡¹ç›®ä¸­ä½¿ç”¨ Flutter Bloc</h2><p>åœ¨è¿™ä¸ªé¡¹ç›®ä¸­ï¼Œæˆ‘ä»¬å°†ä½¿ç”¨æ¥è‡ªæ¸¸æˆ API çš„æ•°æ®æ¥è·å–æœ‰å…³æ¸¸æˆçš„ä¿¡æ¯å¹¶åœ¨æˆ‘ä»¬çš„è§†å›¾ä¸­æ˜¾ç¤ºå®ƒä»¬ã€‚<br>æˆ‘é€‰æ‹©çš„ API æ˜¯ <a target="_blank" rel="noopener" href="https://rawg.io/apidocs">RAWG</a>ã€‚è¦ä½¿ç”¨å®ƒï¼Œæ‚¨éœ€è¦åˆ›å»ºä¸€ä¸ª API å¯†é’¥ã€‚</p><p>åšå¥½çš„ç¨‹åºå¤§æ¦‚å¼ è¿™ä¸ªæ ·å­</p><img src="/Flutter-bloc-for-beginners/11.gif" title="ç¤ºæ„å›¾ width=400"><p>ä¸»é¡µæœ‰ä¸åŒçš„éƒ¨åˆ†ï¼Œæˆ‘ä»¬æ¥çœ‹çœ‹ã€‚</p><h3 id="æ ‡é¢˜"><a href="#æ ‡é¢˜" class="headerlink" title="æ ‡é¢˜"></a>æ ‡é¢˜</h3><p>è¿™æ˜¯ä¸€ä¸ªç®€å•çš„å°éƒ¨ä»¶ï¼Œæ˜¾ç¤ºä¸¤ä¸ªæ–‡æœ¬å’Œä¸€ä¸ªåœ†å½¢å¤´åƒã€‚</p><img src="/Flutter-bloc-for-beginners/12.png" title="ç¤ºæ„å›¾ width=400"><h3 id="ç±»åˆ«å°éƒ¨ä»¶"><a href="#ç±»åˆ«å°éƒ¨ä»¶" class="headerlink" title="ç±»åˆ«å°éƒ¨ä»¶"></a>ç±»åˆ«å°éƒ¨ä»¶</h3><p>æ˜¾ç¤º API è¿”å›è°ƒç”¨ getGenres çš„ä¸åŒç±»å‹ã€‚è¿™ä¸ªå°éƒ¨ä»¶æœ‰å››ç§å¯èƒ½çš„çŠ¶æ€ï¼š</p><ul><li>æˆåŠŸï¼šæ˜¾ç¤ºç±»åˆ«ï¼ˆç±»å‹ï¼‰åˆ—è¡¨ã€‚</li><li>é”™è¯¯ï¼šæ˜¾ç¤ºé”™è¯¯ä¿¡æ¯ã€‚</li><li>æ­£åœ¨åŠ è½½ï¼šæ˜¾ç¤ºä¸€ä¸ª CircularProgressIndicatorã€‚</li><li>å·²é€‰ï¼šæ›´æ”¹æ‰€é€‰ç±»åˆ«çš„å¤§å°å’Œé¢œè‰²ã€‚</li></ul><img src="/Flutter-bloc-for-beginners/13.png" title="ç¤ºæ„å›¾ width=400"><h3 id="åˆ†ç±»ç­›é€‰æ¸¸æˆå°éƒ¨ä»¶"><a href="#åˆ†ç±»ç­›é€‰æ¸¸æˆå°éƒ¨ä»¶" class="headerlink" title="åˆ†ç±»ç­›é€‰æ¸¸æˆå°éƒ¨ä»¶"></a>åˆ†ç±»ç­›é€‰æ¸¸æˆå°éƒ¨ä»¶</h3><p>æ˜¾ç¤º API åœ¨ä½¿ç”¨é¢å¤–çš„ç±»å‹å‚æ•°è°ƒç”¨ getGames æ—¶è¿”å›çš„æŒ‰ç±»å‹è¿‡æ»¤çš„ä¸åŒæ¸¸æˆã€‚å®ƒå…·æœ‰ä¸‰ç§å¯èƒ½çš„çŠ¶æ€ï¼š</p><ul><li>æˆåŠŸï¼šæŒ‰ç±»åˆ«æ˜¾ç¤ºæ¸¸æˆåˆ—è¡¨ã€‚</li><li>é”™è¯¯ï¼šæ˜¾ç¤ºé”™è¯¯ä¿¡æ¯ã€‚</li><li>æ­£åœ¨åŠ è½½ï¼šæ˜¾ç¤ºä¸€ä¸ª CircularProgressIndicatorã€‚</li></ul><h3 id="å…¨éƒ¨æ¸¸æˆ"><a href="#å…¨éƒ¨æ¸¸æˆ" class="headerlink" title="å…¨éƒ¨æ¸¸æˆ"></a>å…¨éƒ¨æ¸¸æˆ</h3><p>æ˜¾ç¤ºæ²¡æœ‰è¿‡æ»¤å™¨çš„æ¸¸æˆåˆ—è¡¨ã€‚æ­¤å°éƒ¨ä»¶ä»…åœ¨å…¶ bloc å‘å‡º Success çŠ¶æ€å¹¶å…·æœ‰ä¸‰ç§å¯èƒ½çŠ¶æ€æ—¶æ‰ä¼šæ˜¾ç¤ºï¼š</p><ul><li>æˆåŠŸï¼šæ˜¾ç¤ºæ¸¸æˆåˆ—è¡¨ã€‚</li><li>é”™è¯¯ï¼šæ˜¾ç¤ºé”™è¯¯ä¿¡æ¯ã€‚</li><li>æ­£åœ¨åŠ è½½ï¼šæ˜¾ç¤ºä¸€ä¸ª CircularProgressIndicatorã€‚</li></ul><img src="/Flutter-bloc-for-beginners/15.png" title="ç¤ºæ„å›¾ width=400"><h3 id="é¡¹ç›®ç»“æ„"><a href="#é¡¹ç›®ç»“æ„" class="headerlink" title="é¡¹ç›®ç»“æ„"></a>é¡¹ç›®ç»“æ„</h3><p>å¯¹äºè¿™ä¸ªä¾‹å­ï¼Œæˆ‘åˆ›å»ºäº†è¿™ä¸ªç»“æ„ï¼š</p><img src="/Flutter-bloc-for-beginners/16.png" title="ç¤ºæ„å›¾ width=400"><p>æ­£å¦‚æ‚¨åœ¨ home å°éƒ¨ä»¶æ–‡ä»¶å¤¹ä¸­çœ‹åˆ°çš„é‚£æ ·ï¼Œæˆ‘æ·»åŠ äº†æˆ‘ä¹‹å‰æåˆ°çš„æ‰€æœ‰å°éƒ¨ä»¶ã€‚æ¯ä¸ªå°éƒ¨ä»¶éƒ½æœ‰è‡ªå·±çš„blocï¼Œå› æ­¤æ›´å¹²å‡€å’Œå¯ç»´æŠ¤ã€‚</p><h3 id="Homeé¡µé¢"><a href="#Homeé¡µé¢" class="headerlink" title="Homeé¡µé¢"></a>Homeé¡µé¢</h3><p>è¿™ä¸ªé¡µé¢éå¸¸é‡è¦ï¼Œå› ä¸ºæˆ‘åœ¨è¿™é‡Œä½¿ç”¨äº†ä¸¤ä¸ª Bloc Widgetï¼šMultiBlocProvider å’Œ RepositoryProviderã€‚<br>è¿™ä¸ªé¡µé¢çš„æƒ³æ³•æ˜¯åœ¨åˆå§‹åŒ–è¿™ä¸ªé¡µé¢æ—¶è®©æ‰€æœ‰çš„å—éƒ½å‡†å¤‡å¥½ä½¿ç”¨ï¼Œæ‰€ä»¥ï¼Œè¦åšåˆ°è¿™ä¸€ç‚¹ï¼Œæˆ‘éœ€è¦ç”¨ RepositoryProvider åŒ…è£…æˆ‘çš„å­ç±»ï¼Œä¸ºæ‰€æœ‰å—æä¾›å­˜å‚¨åº“ï¼Œè€Œä¸”ï¼Œæˆ‘éœ€è¦åˆå§‹åŒ–æ‰€æœ‰å¸¦æœ‰ MultiBlocProvider çš„å—ã€‚</p><pre class="line-numbers language-dart" data-language="dart"><code class="language-dart"><span class="token keyword">import</span> <span class="token string-literal"><span class="token string">'package:flutter/material.dart'</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token string-literal"><span class="token string">'package:flutter_bloc/flutter_bloc.dart'</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token string-literal"><span class="token string">'package:infogames/repository/game_repository.dart'</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token string-literal"><span class="token string">'package:infogames/repository/service/game_service.dart'</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token string-literal"><span class="token string">'package:infogames/ui/home/pages/home_layout.dart'</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token string-literal"><span class="token string">'package:infogames/ui/home/widgets/category/category_barrel.dart'</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token string-literal"><span class="token string">'package:infogames/ui/home/widgets/all_games_list_widget/all_games_barrel.dart'</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token string-literal"><span class="token string">'package:infogames/ui/home/widgets/games_by_category/games_by_category.dart'</span></span><span class="token punctuation">;</span>

<span class="token keyword">class</span> <span class="token class-name">HomePage</span> <span class="token keyword">extends</span> <span class="token class-name">StatelessWidget</span> <span class="token punctuation">{</span>
  <span class="token keyword">const</span> <span class="token class-name">HomePage</span><span class="token punctuation">(</span><span class="token punctuation">{</span><span class="token class-name">Key</span><span class="token operator">?</span> key<span class="token punctuation">}</span><span class="token punctuation">)</span> <span class="token punctuation">:</span> <span class="token keyword">super</span><span class="token punctuation">(</span>key<span class="token punctuation">:</span> key<span class="token punctuation">)</span><span class="token punctuation">;</span>

  <span class="token metadata function">@override</span>
  <span class="token class-name">Widget</span> <span class="token function">build</span><span class="token punctuation">(</span><span class="token class-name">BuildContext</span> context<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token class-name">Scaffold</span><span class="token punctuation">(</span>
      backgroundColor<span class="token punctuation">:</span> <span class="token class-name">Colors</span><span class="token punctuation">.</span>deepOrangeAccent<span class="token punctuation">,</span>
      body<span class="token punctuation">:</span> <span class="token class-name">RepositoryProvider</span><span class="token punctuation">(</span>
        create<span class="token punctuation">:</span> <span class="token punctuation">(</span>context<span class="token punctuation">)</span> <span class="token operator">=</span><span class="token operator">&gt;</span> <span class="token class-name">GameRepository</span><span class="token punctuation">(</span>service<span class="token punctuation">:</span> <span class="token class-name">GameService</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
        child<span class="token punctuation">:</span> <span class="token class-name">MultiBlocProvider</span><span class="token punctuation">(</span>
          providers<span class="token punctuation">:</span> <span class="token punctuation">[</span>
            <span class="token class-name">BlocProvider</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">AllGamesBloc</span><span class="token punctuation">&gt;</span></span><span class="token punctuation">(</span>
              create<span class="token punctuation">:</span> <span class="token punctuation">(</span>context<span class="token punctuation">)</span> <span class="token operator">=</span><span class="token operator">&gt;</span> <span class="token class-name">AllGamesBloc</span><span class="token punctuation">(</span>
                gameRepository<span class="token punctuation">:</span> context<span class="token punctuation">.</span>read<span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">GameRepository</span><span class="token punctuation">&gt;</span></span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
              <span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span>
                  <span class="token class-name">GetGames</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
                <span class="token punctuation">)</span><span class="token punctuation">,</span>
            <span class="token punctuation">)</span><span class="token punctuation">,</span>
            <span class="token class-name">BlocProvider</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">CategoryBloc</span><span class="token punctuation">&gt;</span></span><span class="token punctuation">(</span>
              create<span class="token punctuation">:</span> <span class="token punctuation">(</span>context<span class="token punctuation">)</span> <span class="token operator">=</span><span class="token operator">&gt;</span> <span class="token class-name">CategoryBloc</span><span class="token punctuation">(</span>
                gameRepository<span class="token punctuation">:</span> context<span class="token punctuation">.</span>read<span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">GameRepository</span><span class="token punctuation">&gt;</span></span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
              <span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span>
                  <span class="token class-name">GetCategories</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
                <span class="token punctuation">)</span><span class="token punctuation">,</span>
            <span class="token punctuation">)</span><span class="token punctuation">,</span>
            <span class="token class-name">BlocProvider</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">GamesByCategoryBloc</span><span class="token punctuation">&gt;</span></span><span class="token punctuation">(</span>
              create<span class="token punctuation">:</span> <span class="token punctuation">(</span>context<span class="token punctuation">)</span> <span class="token operator">=</span><span class="token operator">&gt;</span> <span class="token class-name">GamesByCategoryBloc</span><span class="token punctuation">(</span>
                gameRepository<span class="token punctuation">:</span> context<span class="token punctuation">.</span>read<span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">GameRepository</span><span class="token punctuation">&gt;</span></span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
              <span class="token punctuation">)</span><span class="token punctuation">,</span>
            <span class="token punctuation">)</span><span class="token punctuation">,</span>
          <span class="token punctuation">]</span><span class="token punctuation">,</span>
          child<span class="token punctuation">:</span> <span class="token class-name">HomeLayout</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
        <span class="token punctuation">)</span><span class="token punctuation">,</span>
      <span class="token punctuation">)</span><span class="token punctuation">,</span>
    <span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>äº‹å®ä¸Šï¼Œæ­£å¦‚æ‚¨åœ¨è¿™æ®µä»£ç ä¸­çœ‹åˆ°çš„é‚£æ ·ï¼Œæœ‰ä¸¤ä¸ªblocåœ¨å¼€å¤´æ·»åŠ äº†ä¸¤ä¸ªäº‹ä»¶ï¼š</p><ul><li>è·å–æ¸¸æˆ</li><li>è·å–ç±»åˆ«<br>è¿™æ˜¯æ·»åŠ æ–°äº‹ä»¶ä»¥é€šçŸ¥å…¶æˆ‘ä»¬éœ€è¦ä¸€äº›æ•°æ®çš„æ–¹æ³•ä¹‹ä¸€ã€‚æ‰€ä»¥æ­¤æ—¶ï¼Œä¸»é¡µæœ‰ä¸‰ä¸ªblocï¼Œè§¦å‘äº†ä¸¤ä¸ªäº‹ä»¶ã€‚ç°åœ¨æ¥çœ‹çœ‹ HomeLayoutã€‚</li></ul><h3 id="HomeLayout"><a href="#HomeLayout" class="headerlink" title="HomeLayout"></a>HomeLayout</h3><p>æ­¤ç±»å…·æœ‰æˆ‘ä¸Šé¢æåˆ°çš„ä¸‰ä¸ªä¸»è¦å°éƒ¨ä»¶ï¼Œè¿˜åŒ…å«è§†å›¾çš„éª¨æ¶ã€‚</p><pre class="line-numbers language-dart" data-language="dart"><code class="language-dart"><span class="token keyword">import</span> <span class="token string-literal"><span class="token string">'package:flutter/material.dart'</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token string-literal"><span class="token string">'package:infogames/ui/home/widgets/all_games_widget/all_games_widget.dart'</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token string-literal"><span class="token string">'package:infogames/ui/home/widgets/category_widget/categories_widget.dart'</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token string-literal"><span class="token string">'package:infogames/ui/home/widgets/games_by_category_widget/games_by_category_widget.dart'</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token string-literal"><span class="token string">'package:infogames/ui/home/widgets/header_title/header_title.dart'</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token string-literal"><span class="token string">'package:infogames/ui/widgets/container_body.dart'</span></span><span class="token punctuation">;</span>

<span class="token keyword">class</span> <span class="token class-name">HomeLayout</span> <span class="token keyword">extends</span> <span class="token class-name">StatelessWidget</span> <span class="token punctuation">{</span>
  <span class="token keyword">const</span> <span class="token class-name">HomeLayout</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
    <span class="token class-name">Key</span><span class="token operator">?</span> key<span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span> <span class="token punctuation">:</span> <span class="token keyword">super</span><span class="token punctuation">(</span>key<span class="token punctuation">:</span> key<span class="token punctuation">)</span><span class="token punctuation">;</span>

  <span class="token metadata function">@override</span>
  <span class="token class-name">Widget</span> <span class="token function">build</span><span class="token punctuation">(</span><span class="token class-name">BuildContext</span> context<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token class-name">Padding</span><span class="token punctuation">(</span>
      padding<span class="token punctuation">:</span> <span class="token keyword">const</span> <span class="token class-name">EdgeInsets</span><span class="token punctuation">.</span><span class="token function">only</span><span class="token punctuation">(</span>top<span class="token punctuation">:</span> <span class="token number">80.0</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
      child<span class="token punctuation">:</span> <span class="token class-name">Column</span><span class="token punctuation">(</span>
        crossAxisAlignment<span class="token punctuation">:</span> <span class="token class-name">CrossAxisAlignment</span><span class="token punctuation">.</span>start<span class="token punctuation">,</span>
        children<span class="token punctuation">:</span> <span class="token punctuation">[</span>
          <span class="token class-name">HeaderTitle</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
          <span class="token keyword">const</span> <span class="token class-name">SizedBox</span><span class="token punctuation">(</span>height<span class="token punctuation">:</span> <span class="token number">40.0</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
          <span class="token class-name">ContainerBody</span><span class="token punctuation">(</span>
            children<span class="token punctuation">:</span> <span class="token punctuation">[</span>
              <span class="token class-name">CategoriesWidget</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
              <span class="token class-name">GamesByCategoryWidget</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
              <span class="token class-name">AllGamesWidget</span><span class="token punctuation">(</span>title<span class="token punctuation">:</span> <span class="token string-literal"><span class="token string">'All games'</span></span><span class="token punctuation">)</span><span class="token punctuation">,</span>
            <span class="token punctuation">]</span><span class="token punctuation">,</span>
          <span class="token punctuation">)</span>
        <span class="token punctuation">]</span><span class="token punctuation">,</span>
      <span class="token punctuation">)</span><span class="token punctuation">,</span>
    <span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>ä¸‹ä¸€æ­¥æ˜¯æŸ¥çœ‹è¿™äº›å°éƒ¨ä»¶ä¸­çš„æ¯ä¸€ä¸ªï¼Œæ‰€ä»¥è®©æˆ‘ä»¬å¼€å§‹ä½¿ç”¨ CategoriesWidgetã€‚</p><h2 id="CategoriesWidget"><a href="#CategoriesWidget" class="headerlink" title="CategoriesWidget"></a>CategoriesWidget</h2><h3 id="Category-event"><a href="#Category-event" class="headerlink" title="Category event"></a>Category event</h3><p>è¿™æ˜¯æˆ‘æ·»åŠ æ­¤å°éƒ¨ä»¶æ‰€éœ€çš„æ‰€æœ‰äº‹ä»¶çš„åœ°æ–¹ã€‚</p><ul><li>GetCategoriesï¼šè·å–ç±»åˆ«çš„äº‹ä»¶ã€‚</li><li>SelectCategoriesï¼šçŸ¥é“ä½•æ—¶é€‰æ‹©ç±»åˆ«çš„äº‹ä»¶ã€‚</li></ul><pre class="line-numbers language-dart" data-language="dart"><code class="language-dart"> <span class="token keyword">part</span> of <span class="token string-literal"><span class="token string">'category_bloc.dart'</span></span><span class="token punctuation">;</span>

<span class="token keyword">class</span> <span class="token class-name">CategoryEvent</span> <span class="token keyword">extends</span> <span class="token class-name">Equatable</span> <span class="token punctuation">{</span>
  <span class="token metadata function">@override</span>
  <span class="token class-name">List</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">Object</span><span class="token operator">?</span><span class="token punctuation">&gt;</span></span> <span class="token keyword">get</span> props <span class="token operator">=</span><span class="token operator">&gt;</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token keyword">class</span> <span class="token class-name">GetCategories</span> <span class="token keyword">extends</span> <span class="token class-name">CategoryEvent</span> <span class="token punctuation">{</span><span class="token punctuation">}</span>

<span class="token keyword">class</span> <span class="token class-name">SelectCategory</span> <span class="token keyword">extends</span> <span class="token class-name">CategoryEvent</span> <span class="token punctuation">{</span>
  <span class="token class-name">SelectCategory</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
    required <span class="token keyword">this</span><span class="token punctuation">.</span>idSelected<span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token keyword">final</span> int idSelected<span class="token punctuation">;</span>

  <span class="token metadata function">@override</span>
  <span class="token class-name">List</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">Object</span><span class="token operator">?</span><span class="token punctuation">&gt;</span></span> <span class="token keyword">get</span> props <span class="token operator">=</span><span class="token operator">&gt;</span> <span class="token punctuation">[</span>idSelected<span class="token punctuation">]</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h3 id="Category-state"><a href="#Category-state" class="headerlink" title="Category state"></a>Category state</h3><p>åœ¨è¿™ä¸ªç±»é‡Œè¾¹ï¼Œblocå¯ä»¥å‘å‡ºä¸åŒçš„çŠ¶æ€ã€‚æˆ‘åˆ›å»ºäº†ä¸€ä¸ªæ‰©å±•æ¥ä»¥ç®€æ´æ˜äº†çš„æ–¹å¼å¤„ç†è§†å›¾ä¸­æ‰€æœ‰å¯èƒ½çš„çŠ¶æ€ã€‚<br>æˆ‘ä½¿ç”¨ Equatable åº“å’Œ Dart ä¸­çš„å¯¹è±¡ä½œæ¯”è¾ƒï¼Œå¦‚æœä½ ä¸æ˜¯å¾ˆæ¸…æ¥šçš„è¯ï¼Œå¼ºçƒˆå»ºè®®æ‚¨æŸ¥çœ‹<a target="_blank" rel="noopener" href="https://pub.dev/packages/equatable">æ–‡æ¡£</a>ã€‚</p><pre class="line-numbers language-dart" data-language="dart"><code class="language-dart"><span class="token keyword">part</span> of <span class="token string-literal"><span class="token string">'category_bloc.dart'</span></span><span class="token punctuation">;</span>

<span class="token keyword">enum</span> <span class="token class-name">CategoryStatus</span> <span class="token punctuation">{</span> initial<span class="token punctuation">,</span> success<span class="token punctuation">,</span> error<span class="token punctuation">,</span> loading<span class="token punctuation">,</span> selected <span class="token punctuation">}</span>

<span class="token keyword">extension</span> <span class="token class-name">CategoryStatusX</span> <span class="token keyword">on</span> <span class="token class-name">CategoryStatus</span> <span class="token punctuation">{</span>
  bool <span class="token keyword">get</span> isInitial <span class="token operator">=</span><span class="token operator">&gt;</span> <span class="token keyword">this</span> <span class="token operator">==</span> <span class="token class-name">CategoryStatus</span><span class="token punctuation">.</span>initial<span class="token punctuation">;</span>
  bool <span class="token keyword">get</span> isSuccess <span class="token operator">=</span><span class="token operator">&gt;</span> <span class="token keyword">this</span> <span class="token operator">==</span> <span class="token class-name">CategoryStatus</span><span class="token punctuation">.</span>success<span class="token punctuation">;</span>
  bool <span class="token keyword">get</span> isError <span class="token operator">=</span><span class="token operator">&gt;</span> <span class="token keyword">this</span> <span class="token operator">==</span> <span class="token class-name">CategoryStatus</span><span class="token punctuation">.</span>error<span class="token punctuation">;</span>
  bool <span class="token keyword">get</span> isLoading <span class="token operator">=</span><span class="token operator">&gt;</span> <span class="token keyword">this</span> <span class="token operator">==</span> <span class="token class-name">CategoryStatus</span><span class="token punctuation">.</span>loading<span class="token punctuation">;</span>
  bool <span class="token keyword">get</span> isSelected <span class="token operator">=</span><span class="token operator">&gt;</span> <span class="token keyword">this</span> <span class="token operator">==</span> <span class="token class-name">CategoryStatus</span><span class="token punctuation">.</span>selected<span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token keyword">class</span> <span class="token class-name">CategoryState</span> <span class="token keyword">extends</span> <span class="token class-name">Equatable</span> <span class="token punctuation">{</span>
  <span class="token keyword">const</span> <span class="token class-name">CategoryState</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span>status <span class="token operator">=</span> <span class="token class-name">CategoryStatus</span><span class="token punctuation">.</span>initial<span class="token punctuation">,</span>
    <span class="token class-name">List</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">Genre</span><span class="token punctuation">&gt;</span></span><span class="token operator">?</span> categories<span class="token punctuation">,</span>
    int idSelected <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span>  <span class="token punctuation">:</span> categories <span class="token operator">=</span> categories <span class="token operator">?</span><span class="token operator">?</span> <span class="token keyword">const</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
        idSelected <span class="token operator">=</span> idSelected<span class="token punctuation">;</span>

  <span class="token keyword">final</span> <span class="token class-name">List</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">Genre</span><span class="token punctuation">&gt;</span></span> categories<span class="token punctuation">;</span>
  <span class="token keyword">final</span> <span class="token class-name">CategoryStatus</span> status<span class="token punctuation">;</span>
  <span class="token keyword">final</span> int idSelected<span class="token punctuation">;</span>

  <span class="token metadata function">@override</span>
  <span class="token class-name">List</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">Object</span><span class="token operator">?</span><span class="token punctuation">&gt;</span></span> <span class="token keyword">get</span> props <span class="token operator">=</span><span class="token operator">&gt;</span> <span class="token punctuation">[</span>status<span class="token punctuation">,</span> categories<span class="token punctuation">,</span> idSelected<span class="token punctuation">]</span><span class="token punctuation">;</span>

  <span class="token class-name">CategoryState</span> <span class="token function">copyWith</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
    <span class="token class-name">List</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">Genre</span><span class="token punctuation">&gt;</span></span><span class="token operator">?</span> categories<span class="token punctuation">,</span>
    <span class="token class-name">CategoryStatus</span><span class="token operator">?</span> status<span class="token punctuation">,</span>
    int<span class="token operator">?</span> idSelected<span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token class-name">CategoryState</span><span class="token punctuation">(</span>
      categories<span class="token punctuation">:</span> categories <span class="token operator">?</span><span class="token operator">?</span> <span class="token keyword">this</span><span class="token punctuation">.</span>categories<span class="token punctuation">,</span>
      status<span class="token punctuation">:</span> status <span class="token operator">?</span><span class="token operator">?</span> <span class="token keyword">this</span><span class="token punctuation">.</span>status<span class="token punctuation">,</span>
      idSelected<span class="token punctuation">:</span> idSelected <span class="token operator">?</span><span class="token operator">?</span> <span class="token keyword">this</span><span class="token punctuation">.</span>idSelected<span class="token punctuation">,</span>
    <span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h3 id="Category-bloc"><a href="#Category-bloc" class="headerlink" title="Category bloc"></a>Category bloc</h3><p>åœ¨è¿™é‡Œï¼Œæ‚¨éœ€è¦å¤„ç†æ‚¨æ‹¥æœ‰çš„æ‰€æœ‰äº‹ä»¶ã€‚å¦‚æ‚¨æ‰€è§ï¼Œåœ¨ç¬¬ 13 è¡Œå’Œç¬¬ 14 è¡Œï¼Œæˆ‘æ­£åœ¨æ£€æŸ¥äº‹ä»¶æ˜¯å¦æ˜¯ä¸€ä¸ªæˆ–å¦ä¸€ä¸ªä»¥åˆ›å»ºå®ƒçš„æ–¹æ³•ã€‚<br>mapGetCategoriesEventToStateï¼šæ­¤æ–¹æ³•è°ƒç”¨å­˜å‚¨åº“ä»¥ä» API è·å–æ•°æ®ã€‚å½“å­˜å‚¨åº“è¿”å›æ•°æ® o æŠ›å‡ºé”™è¯¯æ—¶ï¼Œè¯¥å—ä¼šå‘å‡ºç›¸åº”çš„çŠ¶æ€ã€‚<br>mapSelectCategoryEventToStateï¼šæ­¤æ–¹æ³•å°†å‘å‡ºâ€œé€‰å®šâ€è¿™æ ·çš„çŠ¶æ€ã€‚</p><pre class="line-numbers language-dart" data-language="dart"><code class="language-dart"><span class="token keyword">import</span> <span class="token string-literal"><span class="token string">'package:equatable/equatable.dart'</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token string-literal"><span class="token string">'package:flutter_bloc/flutter_bloc.dart'</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token string-literal"><span class="token string">'package:infogames/repository/game_repository.dart'</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token string-literal"><span class="token string">'package:infogames/repository/models/model_barrel.dart'</span></span><span class="token punctuation">;</span>

<span class="token keyword">part</span> <span class="token string-literal"><span class="token string">'category_event.dart'</span></span><span class="token punctuation">;</span>
<span class="token keyword">part</span> <span class="token string-literal"><span class="token string">'category_state.dart'</span></span><span class="token punctuation">;</span>

<span class="token keyword">class</span> <span class="token class-name">CategoryBloc</span> <span class="token keyword">extends</span> <span class="token class-name">Bloc</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">CategoryEvent</span><span class="token punctuation">,</span> <span class="token class-name">CategoryState</span><span class="token punctuation">&gt;</span></span> <span class="token punctuation">{</span>
  <span class="token class-name">CategoryBloc</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
    required <span class="token keyword">this</span><span class="token punctuation">.</span>gameRepository<span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span> <span class="token punctuation">:</span> <span class="token keyword">super</span><span class="token punctuation">(</span><span class="token keyword">const</span> <span class="token class-name">CategoryState</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">on</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">GetCategories</span><span class="token punctuation">&gt;</span></span><span class="token punctuation">(</span>_mapGetCategoriesEventToState<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">on</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">SelectCategory</span><span class="token punctuation">&gt;</span></span><span class="token punctuation">(</span>_mapSelectCategoryEventToState<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
  <span class="token keyword">final</span> <span class="token class-name">GameRepository</span> gameRepository<span class="token punctuation">;</span>

  <span class="token keyword">void</span> <span class="token function">_mapGetCategoriesEventToState</span><span class="token punctuation">(</span>
      <span class="token class-name">GetCategories</span> event<span class="token punctuation">,</span> <span class="token class-name">Emitter</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">CategoryState</span><span class="token punctuation">&gt;</span></span> emit<span class="token punctuation">)</span> <span class="token keyword">async</span> <span class="token punctuation">{</span>
    <span class="token function">emit</span><span class="token punctuation">(</span>state<span class="token punctuation">.</span><span class="token function">copyWith</span><span class="token punctuation">(</span>status<span class="token punctuation">:</span> <span class="token class-name">CategoryStatus</span><span class="token punctuation">.</span>loading<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">try</span> <span class="token punctuation">{</span>
      <span class="token keyword">final</span> genres <span class="token operator">=</span> <span class="token keyword">await</span> gameRepository<span class="token punctuation">.</span><span class="token function">getGenres</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
      <span class="token function">emit</span><span class="token punctuation">(</span>
        state<span class="token punctuation">.</span><span class="token function">copyWith</span><span class="token punctuation">(</span>
          status<span class="token punctuation">:</span> <span class="token class-name">CategoryStatus</span><span class="token punctuation">.</span>success<span class="token punctuation">,</span>
          categories<span class="token punctuation">:</span> genres<span class="token punctuation">,</span>
        <span class="token punctuation">)</span><span class="token punctuation">,</span>
      <span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span> <span class="token keyword">catch</span> <span class="token punctuation">(</span>error<span class="token punctuation">,</span> stacktrace<span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token function">print</span><span class="token punctuation">(</span>stacktrace<span class="token punctuation">)</span><span class="token punctuation">;</span>
      <span class="token function">emit</span><span class="token punctuation">(</span>state<span class="token punctuation">.</span><span class="token function">copyWith</span><span class="token punctuation">(</span>status<span class="token punctuation">:</span> <span class="token class-name">CategoryStatus</span><span class="token punctuation">.</span>error<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>

  <span class="token keyword">void</span> <span class="token function">_mapSelectCategoryEventToState</span><span class="token punctuation">(</span>
      <span class="token class-name">SelectCategory</span> event<span class="token punctuation">,</span> <span class="token class-name">Emitter</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">CategoryState</span><span class="token punctuation">&gt;</span></span> emit<span class="token punctuation">)</span> <span class="token keyword">async</span> <span class="token punctuation">{</span>
    <span class="token function">emit</span><span class="token punctuation">(</span>
      state<span class="token punctuation">.</span><span class="token function">copyWith</span><span class="token punctuation">(</span>
        status<span class="token punctuation">:</span> <span class="token class-name">CategoryStatus</span><span class="token punctuation">.</span>selected<span class="token punctuation">,</span>
        idSelected<span class="token punctuation">:</span> event<span class="token punctuation">.</span>idSelected<span class="token punctuation">,</span>
      <span class="token punctuation">)</span><span class="token punctuation">,</span>
    <span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>ç°åœ¨â€¦â€¦æˆ‘å¦‚ä½•æ£€æŸ¥è§†å›¾ä¸­çš„çŠ¶æ€ï¼Ÿ<br>å¥½å§ï¼Œå½“å‘å‡ºä¸€ä¸ªçŠ¶æ€æ—¶ï¼Œæˆ‘æƒ³ç”¨ç›¸åº”çš„æ•°æ®é‡å»ºè§†å›¾ã€‚ä¸ºæ­¤ï¼Œåœ¨æˆ‘çœ‹æ¥ï¼Œæˆ‘æœ‰ä¸€ä¸ª BlocBuilderã€‚<br>åœ¨è¿™ç§æƒ…å†µä¸‹ï¼Œæˆ‘åªæƒ³åœ¨å½“å‰çŠ¶æ€æˆåŠŸæ—¶é‡å»ºè§†å›¾ï¼Œå› æ­¤æˆ‘ä½¿ç”¨ buildWhen() æ¥å®ç°ï¼ˆç¬¬ 11 è¡Œï¼‰ã€‚</p><pre class="line-numbers language-dart" data-language="dart"><code class="language-dart"><span class="token keyword">import</span> <span class="token string-literal"><span class="token string">'package:flutter/material.dart'</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token string-literal"><span class="token string">'package:flutter_bloc/flutter_bloc.dart'</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token string-literal"><span class="token string">'package:infogames/ui/home/widgets/category_widget/category_barrel.dart'</span></span><span class="token punctuation">;</span>

<span class="token keyword">class</span> <span class="token class-name">CategoriesWidget</span> <span class="token keyword">extends</span> <span class="token class-name">StatelessWidget</span> <span class="token punctuation">{</span>
  <span class="token keyword">const</span> <span class="token class-name">CategoriesWidget</span><span class="token punctuation">(</span><span class="token punctuation">{</span><span class="token class-name">Key</span><span class="token operator">?</span> key<span class="token punctuation">}</span><span class="token punctuation">)</span> <span class="token punctuation">:</span> <span class="token keyword">super</span><span class="token punctuation">(</span>key<span class="token punctuation">:</span> key<span class="token punctuation">)</span><span class="token punctuation">;</span>

  <span class="token metadata function">@override</span>
  <span class="token class-name">Widget</span> <span class="token function">build</span><span class="token punctuation">(</span><span class="token class-name">BuildContext</span> context<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token class-name">BlocBuilder</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">CategoryBloc</span><span class="token punctuation">,</span> <span class="token class-name">CategoryState</span><span class="token punctuation">&gt;</span></span><span class="token punctuation">(</span>
      buildWhen<span class="token punctuation">:</span> <span class="token punctuation">(</span>previous<span class="token punctuation">,</span> current<span class="token punctuation">)</span> <span class="token operator">=</span><span class="token operator">&gt;</span> current<span class="token punctuation">.</span>status<span class="token punctuation">.</span>isSuccess<span class="token punctuation">,</span>
      builder<span class="token punctuation">:</span> <span class="token punctuation">(</span>context<span class="token punctuation">,</span> state<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> <span class="token class-name">CategoriesSuccessWidget</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
      <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>å¾ˆé…·ï¼Œå½“æ˜¾ç¤ºæ­¤å°éƒ¨ä»¶æ—¶ï¼Œç”¨æˆ·å°†èƒ½å¤Ÿå•å‡»å…¶ä¸­ä¸€ä¸ªç±»åˆ«ï¼Œå½“è¿™äº›å‘ç”Ÿæ—¶ï¼Œæˆ‘å°†æ·»åŠ ä¸¤ä¸ªäº‹ä»¶ï¼š<br>GetGamesByCategory ï¼šæŒ‰ç±»å‹è¿‡æ»¤æ¸¸æˆã€‚è¿™å°†ç”±å¦ä¸€ä¸ªå—å¤„ç†ï¼šGamesByCategoryBlocï¼ˆç¬¬ 26 è¡Œï¼‰ã€‚æˆ‘å¾ˆå¿«å°±ä¼šè°ˆåˆ°è¿™ä¸ªblocã€‚<br>SelectCategoryï¼šåœ¨è§†å›¾ä¸­æ›´æ”¹æ‰€é€‰é¡¹ç›®çš„é¢œè‰²å’Œå¤§å°ã€‚è¿™å°†ä½¿ç”¨ç›¸åŒçš„å—å¤„ç†ï¼šCategoryBlocï¼ˆç¬¬ 32 è¡Œï¼‰ã€‚</p><p>æ¥çœ‹ä¸‹å®Œæ•´çš„ç±»ã€‚</p><pre class="line-numbers language-dart" data-language="dart"><code class="language-dart"><span class="token keyword">import</span> <span class="token string-literal"><span class="token string">'package:flutter/material.dart'</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token string-literal"><span class="token string">'package:flutter_bloc/flutter_bloc.dart'</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token string-literal"><span class="token string">'package:infogames/repository/models/genre.dart'</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token string-literal"><span class="token string">'package:infogames/ui/home/widgets/category_widget/category_barrel.dart'</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token string-literal"><span class="token string">'package:infogames/ui/home/widgets/games_by_category_widget/games_by_category_barrel.dart'</span></span><span class="token punctuation">;</span>

<span class="token keyword">class</span> <span class="token class-name">CategoriesSuccessWidget</span> <span class="token keyword">extends</span> <span class="token class-name">StatelessWidget</span> <span class="token punctuation">{</span>
  <span class="token keyword">const</span> <span class="token class-name">CategoriesSuccessWidget</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
    <span class="token class-name">Key</span><span class="token operator">?</span> key<span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span> <span class="token punctuation">:</span> <span class="token keyword">super</span><span class="token punctuation">(</span>key<span class="token punctuation">:</span> key<span class="token punctuation">)</span><span class="token punctuation">;</span>

  <span class="token metadata function">@override</span>
  <span class="token class-name">Widget</span> <span class="token function">build</span><span class="token punctuation">(</span><span class="token class-name">BuildContext</span> context<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token class-name">BlocBuilder</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">CategoryBloc</span><span class="token punctuation">,</span> <span class="token class-name">CategoryState</span><span class="token punctuation">&gt;</span></span><span class="token punctuation">(</span>
      builder<span class="token punctuation">:</span> <span class="token punctuation">(</span>context<span class="token punctuation">,</span> state<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> <span class="token class-name">SizedBox</span><span class="token punctuation">(</span>
          height<span class="token punctuation">:</span> <span class="token class-name">MediaQuery</span><span class="token punctuation">.</span><span class="token function">of</span><span class="token punctuation">(</span>context<span class="token punctuation">)</span><span class="token punctuation">.</span>size<span class="token punctuation">.</span>height <span class="token operator">*</span> <span class="token number">.15</span><span class="token punctuation">,</span>
          child<span class="token punctuation">:</span> <span class="token class-name">ListView</span><span class="token punctuation">.</span><span class="token function">separated</span><span class="token punctuation">(</span>
            padding<span class="token punctuation">:</span> <span class="token keyword">const</span> <span class="token class-name">EdgeInsets</span><span class="token punctuation">.</span><span class="token function">symmetric</span><span class="token punctuation">(</span>horizontal<span class="token punctuation">:</span> <span class="token number">16.0</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
            shrinkWrap<span class="token punctuation">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
            itemBuilder<span class="token punctuation">:</span> <span class="token punctuation">(</span>context<span class="token punctuation">,</span> index<span class="token punctuation">)</span> <span class="token punctuation">{</span>
              <span class="token keyword">return</span> <span class="token class-name">CategoryItem</span><span class="token punctuation">(</span>
                key<span class="token punctuation">:</span> <span class="token class-name">ValueKey</span><span class="token punctuation">(</span><span class="token string-literal"><span class="token string">'</span><span class="token interpolation"><span class="token punctuation">${</span><span class="token expression">state<span class="token punctuation">.</span>categories<span class="token punctuation">[</span>index<span class="token punctuation">]</span><span class="token punctuation">.</span>name</span><span class="token punctuation">}</span></span><span class="token interpolation"><span class="token punctuation">$</span><span class="token expression">index</span></span><span class="token string">'</span></span><span class="token punctuation">)</span><span class="token punctuation">,</span>
                category<span class="token punctuation">:</span> state<span class="token punctuation">.</span>categories<span class="token punctuation">[</span>index<span class="token punctuation">]</span><span class="token punctuation">,</span>
                callback<span class="token punctuation">:</span> <span class="token punctuation">(</span><span class="token class-name">Genre</span> categorySelected<span class="token punctuation">)</span> <span class="token punctuation">{</span>
                  context<span class="token punctuation">.</span>read<span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">GamesByCategoryBloc</span><span class="token punctuation">&gt;</span></span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span>
                        <span class="token class-name">GetGamesByCategory</span><span class="token punctuation">(</span>
                          idSelected<span class="token punctuation">:</span> categorySelected<span class="token punctuation">.</span>id<span class="token punctuation">,</span>
                          categoryName<span class="token punctuation">:</span> categorySelected<span class="token punctuation">.</span>name <span class="token operator">?</span><span class="token operator">?</span> <span class="token string-literal"><span class="token string">''</span></span><span class="token punctuation">,</span>
                        <span class="token punctuation">)</span><span class="token punctuation">,</span>
                      <span class="token punctuation">)</span><span class="token punctuation">;</span>
                  context<span class="token punctuation">.</span>read<span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">CategoryBloc</span><span class="token punctuation">&gt;</span></span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span>
                        <span class="token class-name">SelectCategory</span><span class="token punctuation">(</span>
                          idSelected<span class="token punctuation">:</span> categorySelected<span class="token punctuation">.</span>id<span class="token punctuation">,</span>
                        <span class="token punctuation">)</span><span class="token punctuation">,</span>
                      <span class="token punctuation">)</span><span class="token punctuation">;</span>
                <span class="token punctuation">}</span><span class="token punctuation">,</span>
              <span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token punctuation">}</span><span class="token punctuation">,</span>
            scrollDirection<span class="token punctuation">:</span> <span class="token class-name">Axis</span><span class="token punctuation">.</span>horizontal<span class="token punctuation">,</span>
            separatorBuilder<span class="token punctuation">:</span> <span class="token punctuation">(</span>_<span class="token punctuation">,</span> __<span class="token punctuation">)</span> <span class="token operator">=</span><span class="token operator">&gt;</span> <span class="token class-name">SizedBox</span><span class="token punctuation">(</span>
              width<span class="token punctuation">:</span> <span class="token number">16.0</span><span class="token punctuation">,</span>
            <span class="token punctuation">)</span><span class="token punctuation">,</span>
            itemCount<span class="token punctuation">:</span> state<span class="token punctuation">.</span>categories<span class="token punctuation">.</span>length<span class="token punctuation">,</span>
          <span class="token punctuation">)</span><span class="token punctuation">,</span>
        <span class="token punctuation">)</span><span class="token punctuation">;</span>
      <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>è®©æˆ‘ä»¬çœ‹ä¸€ä¸‹ state.isSelected æ—¶çš„è§†å›¾ï¼ˆé€‰æ‹©ç±»åˆ«æ—¶ï¼‰ã€‚<br>æˆ‘ä½¿ç”¨ BlocSelector æ¥æ§åˆ¶è¿™ç§æƒ…å†µï¼Œå½“ç”¨æˆ·å•å‡»å…¶ä¸­ä¸€ä¸ªç±»åˆ«æ—¶ï¼Œå°†è§¦å‘äº‹ä»¶å¹¶ä¸”è¯¥ bloc å°†å‘å‡ºå¸¦æœ‰æ‰€é€‰ç±»åˆ« id çš„çŠ¶æ€ isSelectedï¼Œå› æ­¤åœ¨ blocé€‰æ‹©å™¨ï¼Œæˆ‘å¿…é¡»æ£€æŸ¥è¿™äº›æ¡ä»¶æ˜¯å¦ä¸ºçœŸï¼ˆç¬¬ 24 è¡Œï¼‰ä»¥ä½¿ç”¨æ–°çš„å¤§å°å’Œé¢œè‰²é‡å»ºè§†å›¾ï¼ˆç¬¬ 35ã€36 å’Œ 39 è¡Œï¼‰ã€‚</p><pre class="line-numbers language-dart" data-language="dart"><code class="language-dart"><span class="token keyword">import</span> <span class="token string-literal"><span class="token string">'package:flutter/material.dart'</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token string-literal"><span class="token string">'package:flutter_bloc/flutter_bloc.dart'</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token string-literal"><span class="token string">'package:infogames/repository/models/genre.dart'</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token string-literal"><span class="token string">'package:infogames/ui/home/widgets/category_widget/category_barrel.dart'</span></span><span class="token punctuation">;</span>

<span class="token keyword">typedef</span> <span class="token class-name">CategoryCLicked</span> <span class="token operator">=</span> <span class="token class-name">Function</span><span class="token punctuation">(</span><span class="token class-name">Genre</span> categorySelected<span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token keyword">class</span> <span class="token class-name">CategoryItem</span> <span class="token keyword">extends</span> <span class="token class-name">StatelessWidget</span> <span class="token punctuation">{</span>
  <span class="token keyword">const</span> <span class="token class-name">CategoryItem</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
    <span class="token class-name">Key</span><span class="token operator">?</span> key<span class="token punctuation">,</span>
    required <span class="token keyword">this</span><span class="token punctuation">.</span>category<span class="token punctuation">,</span>
    required <span class="token keyword">this</span><span class="token punctuation">.</span>callback<span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span> <span class="token punctuation">:</span> <span class="token keyword">super</span><span class="token punctuation">(</span>key<span class="token punctuation">:</span> key<span class="token punctuation">)</span><span class="token punctuation">;</span>

  <span class="token keyword">final</span> <span class="token class-name">Genre</span> category<span class="token punctuation">;</span>
  <span class="token keyword">final</span> <span class="token class-name">CategoryCLicked</span> callback<span class="token punctuation">;</span>

  <span class="token metadata function">@override</span>
  <span class="token class-name">Widget</span> <span class="token function">build</span><span class="token punctuation">(</span><span class="token class-name">BuildContext</span> context<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token class-name">GestureDetector</span><span class="token punctuation">(</span>
      onTap<span class="token punctuation">:</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=</span><span class="token operator">&gt;</span> <span class="token function">callback</span><span class="token punctuation">(</span>category<span class="token punctuation">)</span><span class="token punctuation">,</span>
      child<span class="token punctuation">:</span> <span class="token class-name">BlocSelector</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">CategoryBloc</span><span class="token punctuation">,</span> <span class="token class-name">CategoryState</span><span class="token punctuation">,</span> bool<span class="token punctuation">&gt;</span></span><span class="token punctuation">(</span>
        selector<span class="token punctuation">:</span> <span class="token punctuation">(</span>state<span class="token punctuation">)</span> <span class="token operator">=</span><span class="token operator">&gt;</span>
            <span class="token punctuation">(</span>state<span class="token punctuation">.</span>status<span class="token punctuation">.</span>isSelected <span class="token operator">&amp;&amp;</span> state<span class="token punctuation">.</span>idSelected <span class="token operator">==</span> category<span class="token punctuation">.</span>id<span class="token punctuation">)</span>
                <span class="token operator">?</span> <span class="token boolean">true</span>
                <span class="token punctuation">:</span> <span class="token boolean">false</span><span class="token punctuation">,</span>
        builder<span class="token punctuation">:</span> <span class="token punctuation">(</span>context<span class="token punctuation">,</span> state<span class="token punctuation">)</span> <span class="token punctuation">{</span>
          <span class="token keyword">return</span> <span class="token class-name">Column</span><span class="token punctuation">(</span>
            children<span class="token punctuation">:</span> <span class="token punctuation">[</span>
              <span class="token class-name">AnimatedContainer</span><span class="token punctuation">(</span>
                duration<span class="token punctuation">:</span> <span class="token keyword">const</span> <span class="token class-name">Duration</span><span class="token punctuation">(</span>milliseconds<span class="token punctuation">:</span> <span class="token number">400</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
                curve<span class="token punctuation">:</span> <span class="token class-name">Curves</span><span class="token punctuation">.</span>easeInOutCirc<span class="token punctuation">,</span>
                padding<span class="token punctuation">:</span> <span class="token keyword">const</span> <span class="token class-name">EdgeInsets</span><span class="token punctuation">.</span><span class="token function">symmetric</span><span class="token punctuation">(</span>horizontal<span class="token punctuation">:</span> <span class="token number">2.0</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
                alignment<span class="token punctuation">:</span> <span class="token class-name">Alignment</span><span class="token punctuation">.</span>center<span class="token punctuation">,</span>
                height<span class="token punctuation">:</span> state <span class="token operator">?</span> <span class="token number">70.0</span> <span class="token punctuation">:</span> <span class="token number">60.0</span><span class="token punctuation">,</span>
                width<span class="token punctuation">:</span> state <span class="token operator">?</span> <span class="token number">70.0</span> <span class="token punctuation">:</span> <span class="token number">60.0</span><span class="token punctuation">,</span>
                decoration<span class="token punctuation">:</span> <span class="token class-name">BoxDecoration</span><span class="token punctuation">(</span>
                  shape<span class="token punctuation">:</span> <span class="token class-name">BoxShape</span><span class="token punctuation">.</span>circle<span class="token punctuation">,</span>
                  color<span class="token punctuation">:</span> state <span class="token operator">?</span> <span class="token class-name">Colors</span><span class="token punctuation">.</span>deepOrangeAccent <span class="token punctuation">:</span> <span class="token class-name">Colors</span><span class="token punctuation">.</span>amberAccent<span class="token punctuation">,</span>
                <span class="token punctuation">)</span><span class="token punctuation">,</span>
                child<span class="token punctuation">:</span> <span class="token class-name">Icon</span><span class="token punctuation">(</span>
                  <span class="token class-name">Icons</span><span class="token punctuation">.</span>gamepad_outlined<span class="token punctuation">,</span>
                <span class="token punctuation">)</span><span class="token punctuation">,</span>
              <span class="token punctuation">)</span><span class="token punctuation">,</span>
              <span class="token class-name">SizedBox</span><span class="token punctuation">(</span>height<span class="token punctuation">:</span> <span class="token number">4.0</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
              <span class="token class-name">Container</span><span class="token punctuation">(</span>
                width<span class="token punctuation">:</span> <span class="token number">60</span><span class="token punctuation">,</span>
                child<span class="token punctuation">:</span> <span class="token class-name">Text</span><span class="token punctuation">(</span>
                  category<span class="token punctuation">.</span>name <span class="token operator">?</span><span class="token operator">?</span> <span class="token string-literal"><span class="token string">''</span></span><span class="token punctuation">,</span>
                  style<span class="token punctuation">:</span> <span class="token class-name">TextStyle</span><span class="token punctuation">(</span>
                      fontSize<span class="token punctuation">:</span> <span class="token number">10.0</span><span class="token punctuation">,</span>
                      fontWeight<span class="token punctuation">:</span> <span class="token class-name">FontWeight</span><span class="token punctuation">.</span>bold<span class="token punctuation">,</span>
                      color<span class="token punctuation">:</span> <span class="token class-name">Colors</span><span class="token punctuation">.</span>black87<span class="token punctuation">)</span><span class="token punctuation">,</span>
                  textAlign<span class="token punctuation">:</span> <span class="token class-name">TextAlign</span><span class="token punctuation">.</span>center<span class="token punctuation">,</span>
                  maxLines<span class="token punctuation">:</span> <span class="token number">2</span><span class="token punctuation">,</span>
                  overflow<span class="token punctuation">:</span> <span class="token class-name">TextOverflow</span><span class="token punctuation">.</span>ellipsis<span class="token punctuation">,</span>
                <span class="token punctuation">)</span><span class="token punctuation">,</span>
              <span class="token punctuation">)</span>
            <span class="token punctuation">]</span><span class="token punctuation">,</span>
          <span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span><span class="token punctuation">,</span>
      <span class="token punctuation">)</span><span class="token punctuation">,</span>
    <span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h2 id="GameByCategoryWidget"><a href="#GameByCategoryWidget" class="headerlink" title="GameByCategoryWidget"></a>GameByCategoryWidget</h2><h3 id="GameByCategoryEvent"><a href="#GameByCategoryEvent" class="headerlink" title="GameByCategoryEvent"></a>GameByCategoryEvent</h3><p>åœ¨è¿™é‡Œï¼Œæˆ‘åˆ›å»ºäº†ä¸€ä¸ªäº‹ä»¶æ¥æŒ‰ç±»åˆ«è¿‡æ»¤æ‰€æœ‰æ¸¸æˆï¼Œå¹¶æ·»åŠ äº†ç±»åˆ«åç§°ä»¥å°†å…¶æ˜¾ç¤ºä¸ºåˆ—è¡¨çš„æ ‡é¢˜ã€‚</p><pre class="line-numbers language-dart" data-language="dart"><code class="language-dart"><span class="token keyword">part</span> of <span class="token string-literal"><span class="token string">'games_by_category_bloc.dart'</span></span><span class="token punctuation">;</span>

<span class="token keyword">class</span> <span class="token class-name">GamesByCategoryEvent</span> <span class="token keyword">extends</span> <span class="token class-name">Equatable</span> <span class="token punctuation">{</span>
  <span class="token metadata function">@override</span>
  <span class="token class-name">List</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">Object</span><span class="token operator">?</span><span class="token punctuation">&gt;</span></span> <span class="token keyword">get</span> props <span class="token operator">=</span><span class="token operator">&gt;</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token keyword">class</span> <span class="token class-name">GetGamesByCategory</span> <span class="token keyword">extends</span> <span class="token class-name">GamesByCategoryEvent</span> <span class="token punctuation">{</span>
  <span class="token class-name">GetGamesByCategory</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
    required <span class="token keyword">this</span><span class="token punctuation">.</span>idSelected<span class="token punctuation">,</span>
    required <span class="token keyword">this</span><span class="token punctuation">.</span>categoryName<span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token keyword">final</span> int idSelected<span class="token punctuation">;</span>
  <span class="token keyword">final</span> <span class="token class-name">String</span> categoryName<span class="token punctuation">;</span>

  <span class="token metadata function">@override</span>
  <span class="token class-name">List</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">Object</span><span class="token operator">?</span><span class="token punctuation">&gt;</span></span> <span class="token keyword">get</span> props <span class="token operator">=</span><span class="token operator">&gt;</span> <span class="token punctuation">[</span>idSelected<span class="token punctuation">,</span> categoryName<span class="token punctuation">]</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h3 id="GameByCategoryState"><a href="#GameByCategoryState" class="headerlink" title="GameByCategoryState"></a>GameByCategoryState</h3><p>å’Œä¹‹å‰çš„çŠ¶æ€ç±»ä¸€æ ·ï¼Œè¿™é‡Œæˆ‘æœ‰ä¸€ä¸ªæ‰©å±•æ¥æ£€æŸ¥ä¸åŒçš„çŠ¶æ€ï¼Œè¿˜æœ‰ä¸€ä¸ª copyWith æ–¹æ³•æ¥åˆ›å»ºæ¸¸æˆåˆ—è¡¨å’Œç±»åˆ«åç§°çš„æ–°å‰¯æœ¬ã€‚</p><pre class="line-numbers language-dart" data-language="dart"><code class="language-dart"><span class="token keyword">part</span> of <span class="token string-literal"><span class="token string">'games_by_category_bloc.dart'</span></span><span class="token punctuation">;</span>

<span class="token keyword">enum</span> <span class="token class-name">GamesByCategoryStatus</span> <span class="token punctuation">{</span> initial<span class="token punctuation">,</span> success<span class="token punctuation">,</span> error<span class="token punctuation">,</span> loading <span class="token punctuation">}</span>

<span class="token keyword">extension</span> <span class="token class-name">GamesByCategoryStatusX</span> <span class="token keyword">on</span> <span class="token class-name">GamesByCategoryStatus</span> <span class="token punctuation">{</span>
  bool <span class="token keyword">get</span> isInitial <span class="token operator">=</span><span class="token operator">&gt;</span> <span class="token keyword">this</span> <span class="token operator">==</span> <span class="token class-name">GamesByCategoryStatus</span><span class="token punctuation">.</span>initial<span class="token punctuation">;</span>
  bool <span class="token keyword">get</span> isSuccess <span class="token operator">=</span><span class="token operator">&gt;</span> <span class="token keyword">this</span> <span class="token operator">==</span> <span class="token class-name">GamesByCategoryStatus</span><span class="token punctuation">.</span>success<span class="token punctuation">;</span>
  bool <span class="token keyword">get</span> isError <span class="token operator">=</span><span class="token operator">&gt;</span> <span class="token keyword">this</span> <span class="token operator">==</span> <span class="token class-name">GamesByCategoryStatus</span><span class="token punctuation">.</span>error<span class="token punctuation">;</span>
  bool <span class="token keyword">get</span> isLoading <span class="token operator">=</span><span class="token operator">&gt;</span> <span class="token keyword">this</span> <span class="token operator">==</span> <span class="token class-name">GamesByCategoryStatus</span><span class="token punctuation">.</span>loading<span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token keyword">class</span> <span class="token class-name">GamesByCategoryState</span> <span class="token keyword">extends</span> <span class="token class-name">Equatable</span> <span class="token punctuation">{</span>
  <span class="token keyword">const</span> <span class="token class-name">GamesByCategoryState</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span>status <span class="token operator">=</span> <span class="token class-name">GamesByCategoryStatus</span><span class="token punctuation">.</span>initial<span class="token punctuation">,</span>
    <span class="token class-name">List</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">Result</span><span class="token punctuation">&gt;</span></span><span class="token operator">?</span> games<span class="token punctuation">,</span>
    <span class="token class-name">String</span><span class="token operator">?</span> categoryName<span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span>  <span class="token punctuation">:</span> games <span class="token operator">=</span> games <span class="token operator">?</span><span class="token operator">?</span> <span class="token keyword">const</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
        categoryName <span class="token operator">=</span> categoryName <span class="token operator">?</span><span class="token operator">?</span> <span class="token string-literal"><span class="token string">''</span></span><span class="token punctuation">;</span>

  <span class="token keyword">final</span> <span class="token class-name">List</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">Result</span><span class="token punctuation">&gt;</span></span> games<span class="token punctuation">;</span>
  <span class="token keyword">final</span> <span class="token class-name">GamesByCategoryStatus</span> status<span class="token punctuation">;</span>
  <span class="token keyword">final</span> <span class="token class-name">String</span> categoryName<span class="token punctuation">;</span>

  <span class="token metadata function">@override</span>
  <span class="token class-name">List</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">Object</span><span class="token operator">?</span><span class="token punctuation">&gt;</span></span> <span class="token keyword">get</span> props <span class="token operator">=</span><span class="token operator">&gt;</span> <span class="token punctuation">[</span>status<span class="token punctuation">,</span> games<span class="token punctuation">,</span> categoryName<span class="token punctuation">]</span><span class="token punctuation">;</span>

  <span class="token class-name">GamesByCategoryState</span> <span class="token function">copyWith</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
    <span class="token class-name">List</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">Result</span><span class="token punctuation">&gt;</span></span><span class="token operator">?</span> games<span class="token punctuation">,</span>
    <span class="token class-name">GamesByCategoryStatus</span><span class="token operator">?</span> status<span class="token punctuation">,</span>
    <span class="token class-name">String</span><span class="token operator">?</span> categoryName<span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token class-name">GamesByCategoryState</span><span class="token punctuation">(</span>
      games<span class="token punctuation">:</span> games <span class="token operator">?</span><span class="token operator">?</span> <span class="token keyword">this</span><span class="token punctuation">.</span>games<span class="token punctuation">,</span>
      status<span class="token punctuation">:</span> status <span class="token operator">?</span><span class="token operator">?</span> <span class="token keyword">this</span><span class="token punctuation">.</span>status<span class="token punctuation">,</span>
      categoryName<span class="token punctuation">:</span> categoryName <span class="token operator">?</span><span class="token operator">?</span> <span class="token keyword">this</span><span class="token punctuation">.</span>categoryName<span class="token punctuation">,</span>
    <span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h3 id="GameByCategoryBloc"><a href="#GameByCategoryBloc" class="headerlink" title="GameByCategoryBloc"></a>GameByCategoryBloc</h3><p>åœ¨è¿™ä¸ªå—ä¸­ï¼Œæˆ‘å°†å¤„ç†è°ƒç”¨å­˜å‚¨åº“çš„äº‹ä»¶ GetGamesByCategory ä»¥è·å–ä¸è¯¥ç±»å‹ ID åŒ¹é…çš„æ‰€æœ‰æ¸¸æˆã€‚å½“å­˜å‚¨åº“è¿”å›æœ‰æ•ˆæ•°æ®æ—¶ï¼Œblocå°†å‘å‡ºæˆåŠŸçš„æ¶ˆæ¯ï¼Œä¾‹å¦‚çŠ¶æ€å’Œåˆ—è¡¨çš„æ–°å‰¯æœ¬ä»¥åŠç±»åˆ«åç§°ï¼Œç›¸åï¼Œå¦‚æœç»“æœæ— æ•ˆï¼Œåˆ™blocå°†å‘å‡ºé”™è¯¯çŠ¶æ€ã€‚</p><pre class="line-numbers language-dart" data-language="dart"><code class="language-dart"><span class="token keyword">import</span> <span class="token string-literal"><span class="token string">'package:equatable/equatable.dart'</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token string-literal"><span class="token string">'package:flutter_bloc/flutter_bloc.dart'</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token string-literal"><span class="token string">'package:infogames/repository/game_repository.dart'</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token string-literal"><span class="token string">'package:infogames/repository/models/model_barrel.dart'</span></span><span class="token punctuation">;</span>

<span class="token keyword">part</span> <span class="token string-literal"><span class="token string">'games_by_category_event.dart'</span></span><span class="token punctuation">;</span>
<span class="token keyword">part</span> <span class="token string-literal"><span class="token string">'games_by_category_state.dart'</span></span><span class="token punctuation">;</span>

<span class="token keyword">class</span> <span class="token class-name">GamesByCategoryBloc</span>
    <span class="token keyword">extends</span> <span class="token class-name">Bloc</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">GamesByCategoryEvent</span><span class="token punctuation">,</span> <span class="token class-name">GamesByCategoryState</span><span class="token punctuation">&gt;</span></span> <span class="token punctuation">{</span>
  <span class="token class-name">GamesByCategoryBloc</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
    required <span class="token keyword">this</span><span class="token punctuation">.</span>gameRepository<span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span> <span class="token punctuation">:</span> <span class="token keyword">super</span><span class="token punctuation">(</span><span class="token keyword">const</span> <span class="token class-name">GamesByCategoryState</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">on</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">GetGamesByCategory</span><span class="token punctuation">&gt;</span></span><span class="token punctuation">(</span>_mapGetGamesByCategoryEventToState<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
  <span class="token keyword">final</span> <span class="token class-name">GameRepository</span> gameRepository<span class="token punctuation">;</span>

  <span class="token keyword">void</span> <span class="token function">_mapGetGamesByCategoryEventToState</span><span class="token punctuation">(</span>
      <span class="token class-name">GetGamesByCategory</span> event<span class="token punctuation">,</span> <span class="token class-name">Emitter</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">GamesByCategoryState</span><span class="token punctuation">&gt;</span></span> emit<span class="token punctuation">)</span> <span class="token keyword">async</span> <span class="token punctuation">{</span>
    <span class="token keyword">try</span> <span class="token punctuation">{</span>
      <span class="token function">emit</span><span class="token punctuation">(</span>state<span class="token punctuation">.</span><span class="token function">copyWith</span><span class="token punctuation">(</span>status<span class="token punctuation">:</span> <span class="token class-name">GamesByCategoryStatus</span><span class="token punctuation">.</span>loading<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

      <span class="token keyword">final</span> gamesByCategory <span class="token operator">=</span>
          <span class="token keyword">await</span> gameRepository<span class="token punctuation">.</span><span class="token function">getGamesByCategory</span><span class="token punctuation">(</span>event<span class="token punctuation">.</span>idSelected<span class="token punctuation">)</span><span class="token punctuation">;</span>
      <span class="token function">emit</span><span class="token punctuation">(</span>
        state<span class="token punctuation">.</span><span class="token function">copyWith</span><span class="token punctuation">(</span>
          status<span class="token punctuation">:</span> <span class="token class-name">GamesByCategoryStatus</span><span class="token punctuation">.</span>success<span class="token punctuation">,</span>
          games<span class="token punctuation">:</span> gamesByCategory<span class="token punctuation">,</span>
          categoryName<span class="token punctuation">:</span> event<span class="token punctuation">.</span>categoryName<span class="token punctuation">,</span>
        <span class="token punctuation">)</span><span class="token punctuation">,</span>
      <span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span> <span class="token keyword">catch</span> <span class="token punctuation">(</span>error<span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token function">emit</span><span class="token punctuation">(</span>state<span class="token punctuation">.</span><span class="token function">copyWith</span><span class="token punctuation">(</span>status<span class="token punctuation">:</span> <span class="token class-name">GamesByCategoryStatus</span><span class="token punctuation">.</span>error<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>å®Œç¾ï¼Œä¸‹ä¸€æ­¥æ˜¯æ£€æŸ¥è§†å›¾ä¸­çš„çŠ¶æ€ä»¥å¯¹å®ƒä»¬åšå‡ºååº”ã€‚</p><pre class="line-numbers language-dart" data-language="dart"><code class="language-dart"><span class="token keyword">import</span> <span class="token string-literal"><span class="token string">'package:flutter/material.dart'</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token string-literal"><span class="token string">'package:flutter_bloc/flutter_bloc.dart'</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token string-literal"><span class="token string">'package:infogames/ui/widgets/error_widget.dart'</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token string-literal"><span class="token string">'games_by_category_barrel.dart'</span></span><span class="token punctuation">;</span>

<span class="token keyword">class</span> <span class="token class-name">GamesByCategoryWidget</span> <span class="token keyword">extends</span> <span class="token class-name">StatelessWidget</span> <span class="token punctuation">{</span>
  <span class="token keyword">const</span> <span class="token class-name">GamesByCategoryWidget</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
    <span class="token class-name">Key</span><span class="token operator">?</span> key<span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span> <span class="token punctuation">:</span> <span class="token keyword">super</span><span class="token punctuation">(</span>key<span class="token punctuation">:</span> key<span class="token punctuation">)</span><span class="token punctuation">;</span>

  <span class="token metadata function">@override</span>
  <span class="token class-name">Widget</span> <span class="token function">build</span><span class="token punctuation">(</span><span class="token class-name">BuildContext</span> context<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token class-name">BlocBuilder</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">GamesByCategoryBloc</span><span class="token punctuation">,</span> <span class="token class-name">GamesByCategoryState</span><span class="token punctuation">&gt;</span></span><span class="token punctuation">(</span>
      builder<span class="token punctuation">:</span> <span class="token punctuation">(</span>context<span class="token punctuation">,</span> state<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> state<span class="token punctuation">.</span>status<span class="token punctuation">.</span>isSuccess
            <span class="token operator">?</span> <span class="token class-name">GameByCategorySuccessWidget</span><span class="token punctuation">(</span>
                categoryName<span class="token punctuation">:</span> state<span class="token punctuation">.</span>categoryName<span class="token punctuation">,</span>
                games<span class="token punctuation">:</span> state<span class="token punctuation">.</span>games<span class="token punctuation">,</span>
              <span class="token punctuation">)</span>
            <span class="token punctuation">:</span> state<span class="token punctuation">.</span>status<span class="token punctuation">.</span>isLoading
                <span class="token operator">?</span> <span class="token class-name">Center</span><span class="token punctuation">(</span>
                    child<span class="token punctuation">:</span> <span class="token class-name">CircularProgressIndicator</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
                  <span class="token punctuation">)</span>
                <span class="token punctuation">:</span> state<span class="token punctuation">.</span>status<span class="token punctuation">.</span>isError
                    <span class="token operator">?</span> <span class="token class-name">ErrorGameWidget</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
                    <span class="token punctuation">:</span> <span class="token keyword">const</span> <span class="token class-name">SizedBox</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
      <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>å¦‚æ‚¨æ‰€è§ï¼Œæˆ‘æ ¹æ®çŠ¶æ€ä½¿ç”¨ä¸‰ä¸ªé€‰é¡¹å¤„ç†è§†å›¾ï¼š</p><ul><li>é”™è¯¯ï¼šæ˜¾ç¤ºå¸¸è§é”™è¯¯å°éƒ¨ä»¶ã€‚</li><li>æ­£åœ¨åŠ è½½ï¼šæ˜¾ç¤º CircularProgressIndicatorã€‚</li><li>æˆåŠŸï¼šæ˜¾ç¤º GameByCategorySuccessWidgetã€‚è¿™ä¸ªå°éƒ¨ä»¶è´Ÿè´£æŒ‰ç±»åˆ«æ˜¾ç¤ºæ¸¸æˆåˆ—è¡¨ã€‚<br>è¿™æ˜¯å°éƒ¨ä»¶ï¼š</li></ul><pre class="line-numbers language-dart" data-language="dart"><code class="language-dart"><span class="token keyword">import</span> <span class="token string-literal"><span class="token string">'package:flutter/material.dart'</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token string-literal"><span class="token string">'package:infogames/repository/models/result.dart'</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token string-literal"><span class="token string">'package:infogames/ui/home/widgets/games_by_category_widget/games_by_category_barrel.dart'</span></span><span class="token punctuation">;</span>

<span class="token keyword">class</span> <span class="token class-name">GameByCategorySuccessWidget</span> <span class="token keyword">extends</span> <span class="token class-name">StatelessWidget</span> <span class="token punctuation">{</span>
  <span class="token keyword">const</span> <span class="token class-name">GameByCategorySuccessWidget</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
    <span class="token class-name">Key</span><span class="token operator">?</span> key<span class="token punctuation">,</span>
    required <span class="token keyword">this</span><span class="token punctuation">.</span>categoryName<span class="token punctuation">,</span>
    required <span class="token keyword">this</span><span class="token punctuation">.</span>games<span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span> <span class="token punctuation">:</span> <span class="token keyword">super</span><span class="token punctuation">(</span>key<span class="token punctuation">:</span> key<span class="token punctuation">)</span><span class="token punctuation">;</span>

  <span class="token keyword">final</span> <span class="token class-name">String</span> categoryName<span class="token punctuation">;</span>
  <span class="token keyword">final</span> <span class="token class-name">List</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">Result</span><span class="token punctuation">&gt;</span></span> games<span class="token punctuation">;</span>

  <span class="token metadata function">@override</span>
  <span class="token class-name">Widget</span> <span class="token function">build</span><span class="token punctuation">(</span><span class="token class-name">BuildContext</span> context<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token class-name">Column</span><span class="token punctuation">(</span>
      crossAxisAlignment<span class="token punctuation">:</span> <span class="token class-name">CrossAxisAlignment</span><span class="token punctuation">.</span>start<span class="token punctuation">,</span>
      children<span class="token punctuation">:</span> <span class="token punctuation">[</span>
        <span class="token class-name">Padding</span><span class="token punctuation">(</span>
          padding<span class="token punctuation">:</span> <span class="token keyword">const</span> <span class="token class-name">EdgeInsets</span><span class="token punctuation">.</span><span class="token function">only</span><span class="token punctuation">(</span>
            left<span class="token punctuation">:</span> <span class="token number">24.0</span><span class="token punctuation">,</span>
            bottom<span class="token punctuation">:</span> <span class="token number">16.0</span><span class="token punctuation">,</span>
          <span class="token punctuation">)</span><span class="token punctuation">,</span>
          child<span class="token punctuation">:</span> <span class="token class-name">Text</span><span class="token punctuation">(</span>
            categoryName<span class="token punctuation">,</span>
            style<span class="token punctuation">:</span> <span class="token class-name">TextStyle</span><span class="token punctuation">(</span>
              fontWeight<span class="token punctuation">:</span> <span class="token class-name">FontWeight</span><span class="token punctuation">.</span>bold<span class="token punctuation">,</span>
              fontSize<span class="token punctuation">:</span> <span class="token number">18.0</span><span class="token punctuation">,</span>
            <span class="token punctuation">)</span><span class="token punctuation">,</span>
          <span class="token punctuation">)</span><span class="token punctuation">,</span>
        <span class="token punctuation">)</span><span class="token punctuation">,</span>
        <span class="token class-name">Container</span><span class="token punctuation">(</span>
          height<span class="token punctuation">:</span> <span class="token class-name">MediaQuery</span><span class="token punctuation">.</span><span class="token function">of</span><span class="token punctuation">(</span>context<span class="token punctuation">)</span><span class="token punctuation">.</span>size<span class="token punctuation">.</span>height <span class="token operator">*</span> <span class="token number">.2</span><span class="token punctuation">,</span>
          child<span class="token punctuation">:</span> <span class="token class-name">ListView</span><span class="token punctuation">.</span><span class="token function">separated</span><span class="token punctuation">(</span>
            padding<span class="token punctuation">:</span> <span class="token keyword">const</span> <span class="token class-name">EdgeInsets</span><span class="token punctuation">.</span><span class="token function">only</span><span class="token punctuation">(</span>
              left<span class="token punctuation">:</span> <span class="token number">24.0</span><span class="token punctuation">,</span>
              right<span class="token punctuation">:</span> <span class="token number">24.0</span><span class="token punctuation">,</span>
            <span class="token punctuation">)</span><span class="token punctuation">,</span>
            scrollDirection<span class="token punctuation">:</span> <span class="token class-name">Axis</span><span class="token punctuation">.</span>horizontal<span class="token punctuation">,</span>
            itemBuilder<span class="token punctuation">:</span> <span class="token punctuation">(</span>context<span class="token punctuation">,</span> index<span class="token punctuation">)</span> <span class="token punctuation">{</span>
              <span class="token keyword">return</span> <span class="token class-name">GameByCategoryImage</span><span class="token punctuation">(</span>
                name<span class="token punctuation">:</span> games<span class="token punctuation">[</span>index<span class="token punctuation">]</span><span class="token punctuation">.</span>name <span class="token operator">?</span><span class="token operator">?</span> <span class="token string-literal"><span class="token string">'No data'</span></span><span class="token punctuation">,</span>
                backgroundImage<span class="token punctuation">:</span> games<span class="token punctuation">[</span>index<span class="token punctuation">]</span><span class="token punctuation">.</span>backgroundImage <span class="token operator">?</span><span class="token operator">?</span> <span class="token string-literal"><span class="token string">''</span></span><span class="token punctuation">,</span>
              <span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token punctuation">}</span><span class="token punctuation">,</span>
            separatorBuilder<span class="token punctuation">:</span> <span class="token punctuation">(</span>_<span class="token punctuation">,</span> __<span class="token punctuation">)</span> <span class="token operator">=</span><span class="token operator">&gt;</span> <span class="token class-name">SizedBox</span><span class="token punctuation">(</span>
              width<span class="token punctuation">:</span> <span class="token number">25.0</span><span class="token punctuation">,</span>
            <span class="token punctuation">)</span><span class="token punctuation">,</span>
            itemCount<span class="token punctuation">:</span> games<span class="token punctuation">.</span>length<span class="token punctuation">,</span>
          <span class="token punctuation">)</span><span class="token punctuation">,</span>
        <span class="token punctuation">)</span><span class="token punctuation">,</span>
      <span class="token punctuation">]</span><span class="token punctuation">,</span>
    <span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>æœ€åæ˜¯ä¸»å¸ƒå±€çš„æœ€åä¸€éƒ¨åˆ†ï¼ŒAllGamesWidgetã€‚</p><h2 id="AllGamesWidget"><a href="#AllGamesWidget" class="headerlink" title="AllGamesWidget"></a>AllGamesWidget</h2><h3 id="AllGamesEvent"><a href="#AllGamesEvent" class="headerlink" title="AllGamesEvent"></a>AllGamesEvent</h3><p>æˆ‘åˆ›å»ºäº†ä¸€ä¸ªäº‹ä»¶æ¥ä» API è·å–æ‰€æœ‰æ¸¸æˆã€‚</p><pre class="line-numbers language-dart" data-language="dart"><code class="language-dart"><span class="token keyword">part</span> of <span class="token string-literal"><span class="token string">'all_games_bloc.dart'</span></span><span class="token punctuation">;</span>

<span class="token keyword">class</span> <span class="token class-name">AllGamesEvent</span> <span class="token keyword">extends</span> <span class="token class-name">Equatable</span> <span class="token punctuation">{</span>
  <span class="token metadata function">@override</span>
  <span class="token class-name">List</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">Object</span><span class="token operator">?</span><span class="token punctuation">&gt;</span></span> <span class="token keyword">get</span> props <span class="token operator">=</span><span class="token operator">&gt;</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token keyword">class</span> <span class="token class-name">GetGames</span> <span class="token keyword">extends</span> <span class="token class-name">AllGamesEvent</span> <span class="token punctuation">{</span>
  <span class="token metadata function">@override</span>
  <span class="token class-name">List</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">Object</span><span class="token operator">?</span><span class="token punctuation">&gt;</span></span> <span class="token keyword">get</span> props <span class="token operator">=</span><span class="token operator">&gt;</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h3 id="AllGamesState"><a href="#AllGamesState" class="headerlink" title="AllGamesState"></a>AllGamesState</h3><p>å’Œä¹‹å‰ä¸€æ ·ï¼Œæˆ‘åˆ›å»ºäº†ä¸€ä¸ªæ‰©å±•æ¥å¤„ç†æ‰€æœ‰å¯èƒ½çš„çŠ¶æ€ï¼Œå¹¶ä¸”æˆ‘è¿˜æœ‰ä¸€ä¸ª copyWith æ–¹æ³•å¯ä»¥åœ¨éœ€è¦æ—¶åˆ›å»ºå¯¹è±¡çš„æ–°å‰¯æœ¬ã€‚</p><pre class="line-numbers language-dart" data-language="dart"><code class="language-dart"><span class="token keyword">part</span> of <span class="token string-literal"><span class="token string">'all_games_bloc.dart'</span></span><span class="token punctuation">;</span>

<span class="token keyword">enum</span> <span class="token class-name">AllGamesStatus</span> <span class="token punctuation">{</span> initial<span class="token punctuation">,</span> success<span class="token punctuation">,</span> error<span class="token punctuation">,</span> loading <span class="token punctuation">}</span>

<span class="token keyword">extension</span> <span class="token class-name">AllGamesStatusX</span> <span class="token keyword">on</span> <span class="token class-name">AllGamesStatus</span> <span class="token punctuation">{</span>
  bool <span class="token keyword">get</span> isInitial <span class="token operator">=</span><span class="token operator">&gt;</span> <span class="token keyword">this</span> <span class="token operator">==</span> <span class="token class-name">AllGamesStatus</span><span class="token punctuation">.</span>initial<span class="token punctuation">;</span>
  bool <span class="token keyword">get</span> isSuccess <span class="token operator">=</span><span class="token operator">&gt;</span> <span class="token keyword">this</span> <span class="token operator">==</span> <span class="token class-name">AllGamesStatus</span><span class="token punctuation">.</span>success<span class="token punctuation">;</span>
  bool <span class="token keyword">get</span> isError <span class="token operator">=</span><span class="token operator">&gt;</span> <span class="token keyword">this</span> <span class="token operator">==</span> <span class="token class-name">AllGamesStatus</span><span class="token punctuation">.</span>error<span class="token punctuation">;</span>
  bool <span class="token keyword">get</span> isLoading <span class="token operator">=</span><span class="token operator">&gt;</span> <span class="token keyword">this</span> <span class="token operator">==</span> <span class="token class-name">AllGamesStatus</span><span class="token punctuation">.</span>loading<span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token keyword">class</span> <span class="token class-name">AllGamesState</span> <span class="token keyword">extends</span> <span class="token class-name">Equatable</span> <span class="token punctuation">{</span>
  <span class="token keyword">const</span> <span class="token class-name">AllGamesState</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span>status <span class="token operator">=</span> <span class="token class-name">AllGamesStatus</span><span class="token punctuation">.</span>initial<span class="token punctuation">,</span>
    <span class="token class-name">Game</span><span class="token operator">?</span> games<span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span> <span class="token punctuation">:</span> games <span class="token operator">=</span> games <span class="token operator">?</span><span class="token operator">?</span> <span class="token class-name">Game</span><span class="token punctuation">.</span>empty<span class="token punctuation">;</span>

  <span class="token keyword">final</span> <span class="token class-name">Game</span> games<span class="token punctuation">;</span>
  <span class="token keyword">final</span> <span class="token class-name">AllGamesStatus</span> status<span class="token punctuation">;</span>

  <span class="token metadata function">@override</span>
  <span class="token class-name">List</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">Object</span><span class="token operator">?</span><span class="token punctuation">&gt;</span></span> <span class="token keyword">get</span> props <span class="token operator">=</span><span class="token operator">&gt;</span> <span class="token punctuation">[</span>status<span class="token punctuation">,</span> games<span class="token punctuation">]</span><span class="token punctuation">;</span>

  <span class="token class-name">AllGamesState</span> <span class="token function">copyWith</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
    <span class="token class-name">Game</span><span class="token operator">?</span> games<span class="token punctuation">,</span>
    <span class="token class-name">AllGamesStatus</span><span class="token operator">?</span> status<span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token class-name">AllGamesState</span><span class="token punctuation">(</span>
      games<span class="token punctuation">:</span> games <span class="token operator">?</span><span class="token operator">?</span> <span class="token keyword">this</span><span class="token punctuation">.</span>games<span class="token punctuation">,</span>
      status<span class="token punctuation">:</span> status <span class="token operator">?</span><span class="token operator">?</span> <span class="token keyword">this</span><span class="token punctuation">.</span>status<span class="token punctuation">,</span>
    <span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h3 id="AllGamesBloc"><a href="#AllGamesBloc" class="headerlink" title="AllGamesBloc"></a>AllGamesBloc</h3><p>åœ¨è¿™é‡Œï¼Œæˆ‘è°ƒç”¨å­˜å‚¨åº“ï¼Œå½“å®ƒè¿”å›æœ‰æ•ˆæ•°æ®æ—¶ï¼Œbloc å°†é€šè¿‡æ¸¸æˆåˆ—è¡¨çš„å‰¯æœ¬å‘å‡ºæˆåŠŸï¼Œç›¸åï¼Œå¦‚æœå­˜å‚¨åº“è¿”å›æ— æ•ˆæ•°æ®ï¼Œbloc å°†å‘å‡ºé”™è¯¯çŠ¶æ€ã€‚</p><pre class="line-numbers language-dart" data-language="dart"><code class="language-dart"><span class="token keyword">import</span> <span class="token string-literal"><span class="token string">'package:equatable/equatable.dart'</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token string-literal"><span class="token string">'package:flutter_bloc/flutter_bloc.dart'</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token string-literal"><span class="token string">'package:infogames/repository/game_repository.dart'</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token string-literal"><span class="token string">'package:infogames/repository/models/model_barrel.dart'</span></span><span class="token punctuation">;</span>

<span class="token keyword">part</span> <span class="token string-literal"><span class="token string">'all_games_event.dart'</span></span><span class="token punctuation">;</span>
<span class="token keyword">part</span> <span class="token string-literal"><span class="token string">'all_games_state.dart'</span></span><span class="token punctuation">;</span>

<span class="token keyword">class</span> <span class="token class-name">AllGamesBloc</span> <span class="token keyword">extends</span> <span class="token class-name">Bloc</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">AllGamesEvent</span><span class="token punctuation">,</span> <span class="token class-name">AllGamesState</span><span class="token punctuation">&gt;</span></span> <span class="token punctuation">{</span>
  <span class="token class-name">AllGamesBloc</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
    required <span class="token keyword">this</span><span class="token punctuation">.</span>gameRepository<span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span> <span class="token punctuation">:</span> <span class="token keyword">super</span><span class="token punctuation">(</span><span class="token keyword">const</span> <span class="token class-name">AllGamesState</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">on</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">GetGames</span><span class="token punctuation">&gt;</span></span><span class="token punctuation">(</span>_mapGetGamesEventToState<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>

  <span class="token keyword">final</span> <span class="token class-name">GameRepository</span> gameRepository<span class="token punctuation">;</span>

  <span class="token keyword">void</span> <span class="token function">_mapGetGamesEventToState</span><span class="token punctuation">(</span>
      <span class="token class-name">GetGames</span> event<span class="token punctuation">,</span> <span class="token class-name">Emitter</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">AllGamesState</span><span class="token punctuation">&gt;</span></span> emit<span class="token punctuation">)</span> <span class="token keyword">async</span> <span class="token punctuation">{</span>
    <span class="token keyword">try</span> <span class="token punctuation">{</span>
      <span class="token function">emit</span><span class="token punctuation">(</span>state<span class="token punctuation">.</span><span class="token function">copyWith</span><span class="token punctuation">(</span>status<span class="token punctuation">:</span> <span class="token class-name">AllGamesStatus</span><span class="token punctuation">.</span>loading<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
      <span class="token keyword">final</span> games <span class="token operator">=</span> <span class="token keyword">await</span> gameRepository<span class="token punctuation">.</span><span class="token function">getGames</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
      <span class="token function">emit</span><span class="token punctuation">(</span>
        state<span class="token punctuation">.</span><span class="token function">copyWith</span><span class="token punctuation">(</span>
          status<span class="token punctuation">:</span> <span class="token class-name">AllGamesStatus</span><span class="token punctuation">.</span>success<span class="token punctuation">,</span>
          games<span class="token punctuation">:</span> games<span class="token punctuation">,</span>
        <span class="token punctuation">)</span><span class="token punctuation">,</span>
      <span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span> <span class="token keyword">catch</span> <span class="token punctuation">(</span>error<span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token function">emit</span><span class="token punctuation">(</span>state<span class="token punctuation">.</span><span class="token function">copyWith</span><span class="token punctuation">(</span>status<span class="token punctuation">:</span> <span class="token class-name">AllGamesStatus</span><span class="token punctuation">.</span>error<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h3 id="AllGamesWidget-1"><a href="#AllGamesWidget-1" class="headerlink" title="AllGamesWidget"></a>AllGamesWidget</h3><p>è¿™æ˜¯æ‰€æœ‰æ¸¸æˆå°éƒ¨ä»¶ã€‚åœ¨è¿™é‡Œï¼Œæˆ‘æœ‰ä¸€ä¸ª BlocBuilder æ¥æ ¹æ®çŠ¶æ€é‡å»ºè§†å›¾ã€‚</p><pre class="line-numbers language-dart" data-language="dart"><code class="language-dart"><span class="token keyword">import</span> <span class="token string-literal"><span class="token string">'package:flutter/material.dart'</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token string-literal"><span class="token string">'package:flutter_bloc/flutter_bloc.dart'</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token string-literal"><span class="token string">'package:infogames/ui/home/widgets/all_games_widget/all_games_barrel.dart'</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token string-literal"><span class="token string">'package:infogames/ui/widgets/error_widget.dart'</span></span><span class="token punctuation">;</span>

<span class="token keyword">class</span> <span class="token class-name">AllGamesWidget</span> <span class="token keyword">extends</span> <span class="token class-name">StatelessWidget</span> <span class="token punctuation">{</span>
  <span class="token keyword">const</span> <span class="token class-name">AllGamesWidget</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
    <span class="token class-name">Key</span><span class="token operator">?</span> key<span class="token punctuation">,</span>
    required <span class="token keyword">this</span><span class="token punctuation">.</span>title<span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span> <span class="token punctuation">:</span> <span class="token keyword">super</span><span class="token punctuation">(</span>key<span class="token punctuation">:</span> key<span class="token punctuation">)</span><span class="token punctuation">;</span>

  <span class="token keyword">final</span> <span class="token class-name">String</span> title<span class="token punctuation">;</span>

  <span class="token metadata function">@override</span>
  <span class="token class-name">Widget</span> <span class="token function">build</span><span class="token punctuation">(</span><span class="token class-name">BuildContext</span> context<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token class-name">BlocBuilder</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">AllGamesBloc</span><span class="token punctuation">,</span> <span class="token class-name">AllGamesState</span><span class="token punctuation">&gt;</span></span><span class="token punctuation">(</span>
      builder<span class="token punctuation">:</span> <span class="token punctuation">(</span>context<span class="token punctuation">,</span> state<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> state<span class="token punctuation">.</span>status<span class="token punctuation">.</span>isSuccess
            <span class="token operator">?</span> <span class="token class-name">AllGamesSuccessWidget</span><span class="token punctuation">(</span>
                title<span class="token punctuation">:</span> title<span class="token punctuation">,</span>
                games<span class="token punctuation">:</span> state<span class="token punctuation">.</span>games<span class="token punctuation">.</span>results<span class="token punctuation">,</span>
              <span class="token punctuation">)</span>
            <span class="token punctuation">:</span> state<span class="token punctuation">.</span>status<span class="token punctuation">.</span>isLoading
                <span class="token operator">?</span> <span class="token class-name">Center</span><span class="token punctuation">(</span>
                    child<span class="token punctuation">:</span> <span class="token class-name">CircularProgressIndicator</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
                  <span class="token punctuation">)</span>
                <span class="token punctuation">:</span> state<span class="token punctuation">.</span>status<span class="token punctuation">.</span>isError
                    <span class="token operator">?</span> <span class="token class-name">ErrorGameWidget</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
                    <span class="token punctuation">:</span> <span class="token keyword">const</span> <span class="token class-name">SizedBox</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
      <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>è¿™äº›æ˜¯ä¸‰ç§çŠ¶æ€ï¼š</p><ul><li>é”™è¯¯ï¼šæ˜¾ç¤ºå¸¸è§é”™è¯¯å°éƒ¨ä»¶ã€‚</li><li>æ­£åœ¨åŠ è½½ï¼šæ˜¾ç¤º CircularProgressIndicatorã€‚</li><li>æˆåŠŸï¼šæ˜¾ç¤º AllGamesSuccessWidgetã€‚è¿™ä¸ªå°éƒ¨ä»¶è´Ÿè´£æ˜¾ç¤ºæ¸¸æˆåˆ—è¡¨ã€‚</li></ul><p>è¿™æ˜¯å°éƒ¨ä»¶ï¼š</p><pre class="line-numbers language-dart" data-language="dart"><code class="language-dart"><span class="token keyword">import</span> <span class="token string-literal"><span class="token string">'package:flutter/material.dart'</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token string-literal"><span class="token string">'package:infogames/repository/models/result.dart'</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token string-literal"><span class="token string">'package:infogames/ui/home/widgets/all_games_widget/all_games_barrel.dart'</span></span><span class="token punctuation">;</span>

<span class="token keyword">class</span> <span class="token class-name">AllGamesSuccessWidget</span> <span class="token keyword">extends</span> <span class="token class-name">StatelessWidget</span> <span class="token punctuation">{</span>
  <span class="token keyword">const</span> <span class="token class-name">AllGamesSuccessWidget</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
    <span class="token class-name">Key</span><span class="token operator">?</span> key<span class="token punctuation">,</span>
    required <span class="token keyword">this</span><span class="token punctuation">.</span>games<span class="token punctuation">,</span>
    required <span class="token keyword">this</span><span class="token punctuation">.</span>title<span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span> <span class="token punctuation">:</span> <span class="token keyword">super</span><span class="token punctuation">(</span>key<span class="token punctuation">:</span> key<span class="token punctuation">)</span><span class="token punctuation">;</span>

  <span class="token keyword">final</span> <span class="token class-name">List</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">Result</span><span class="token punctuation">&gt;</span></span> games<span class="token punctuation">;</span>
  <span class="token keyword">final</span> <span class="token class-name">String</span> title<span class="token punctuation">;</span>

  <span class="token metadata function">@override</span>
  <span class="token class-name">Widget</span> <span class="token function">build</span><span class="token punctuation">(</span><span class="token class-name">BuildContext</span> context<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token class-name">Column</span><span class="token punctuation">(</span>
      crossAxisAlignment<span class="token punctuation">:</span> <span class="token class-name">CrossAxisAlignment</span><span class="token punctuation">.</span>stretch<span class="token punctuation">,</span>
      children<span class="token punctuation">:</span> <span class="token punctuation">[</span>
        <span class="token class-name">Padding</span><span class="token punctuation">(</span>
          padding<span class="token punctuation">:</span> <span class="token keyword">const</span> <span class="token class-name">EdgeInsets</span><span class="token punctuation">.</span><span class="token function">only</span><span class="token punctuation">(</span>left<span class="token punctuation">:</span> <span class="token number">24.0</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
          child<span class="token punctuation">:</span> <span class="token class-name">Text</span><span class="token punctuation">(</span>
            title<span class="token punctuation">,</span>
            style<span class="token punctuation">:</span> <span class="token class-name">TextStyle</span><span class="token punctuation">(</span>
              fontWeight<span class="token punctuation">:</span> <span class="token class-name">FontWeight</span><span class="token punctuation">.</span>bold<span class="token punctuation">,</span>
              fontSize<span class="token punctuation">:</span> <span class="token number">18.0</span><span class="token punctuation">,</span>
            <span class="token punctuation">)</span><span class="token punctuation">,</span>
          <span class="token punctuation">)</span><span class="token punctuation">,</span>
        <span class="token punctuation">)</span><span class="token punctuation">,</span>
        <span class="token class-name">Container</span><span class="token punctuation">(</span>
          height<span class="token punctuation">:</span>
              <span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token number">100</span> <span class="token operator">*</span> games<span class="token punctuation">.</span>length<span class="token punctuation">)</span> <span class="token operator">+</span> <span class="token class-name">MediaQuery</span><span class="token punctuation">.</span><span class="token function">of</span><span class="token punctuation">(</span>context<span class="token punctuation">)</span><span class="token punctuation">.</span>size<span class="token punctuation">.</span>width<span class="token punctuation">)</span> <span class="token operator">+</span> <span class="token number">24.0</span><span class="token punctuation">,</span>
          child<span class="token punctuation">:</span> <span class="token class-name">ListView</span><span class="token punctuation">.</span><span class="token function">separated</span><span class="token punctuation">(</span>
            physics<span class="token punctuation">:</span> <span class="token class-name">NeverScrollableScrollPhysics</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
            padding<span class="token punctuation">:</span> <span class="token keyword">const</span> <span class="token class-name">EdgeInsets</span><span class="token punctuation">.</span><span class="token function">only</span><span class="token punctuation">(</span>
              left<span class="token punctuation">:</span> <span class="token number">24.0</span><span class="token punctuation">,</span>
              right<span class="token punctuation">:</span> <span class="token number">24.0</span><span class="token punctuation">,</span>
              top<span class="token punctuation">:</span> <span class="token number">24.0</span><span class="token punctuation">,</span>
            <span class="token punctuation">)</span><span class="token punctuation">,</span>
            itemBuilder<span class="token punctuation">:</span> <span class="token punctuation">(</span>context<span class="token punctuation">,</span> index<span class="token punctuation">)</span> <span class="token punctuation">{</span>
              <span class="token keyword">return</span> <span class="token class-name">AllGamesItem</span><span class="token punctuation">(</span>
                game<span class="token punctuation">:</span> games<span class="token punctuation">[</span>index<span class="token punctuation">]</span><span class="token punctuation">,</span>
              <span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token punctuation">}</span><span class="token punctuation">,</span>
            separatorBuilder<span class="token punctuation">:</span> <span class="token punctuation">(</span>_<span class="token punctuation">,</span> __<span class="token punctuation">)</span> <span class="token operator">=</span><span class="token operator">&gt;</span> <span class="token class-name">SizedBox</span><span class="token punctuation">(</span>
              height<span class="token punctuation">:</span> <span class="token number">20.0</span><span class="token punctuation">,</span>
            <span class="token punctuation">)</span><span class="token punctuation">,</span>
            itemCount<span class="token punctuation">:</span> games<span class="token punctuation">.</span>length<span class="token punctuation">,</span>
          <span class="token punctuation">)</span><span class="token punctuation">,</span>
        <span class="token punctuation">)</span><span class="token punctuation">,</span>
      <span class="token punctuation">]</span><span class="token punctuation">,</span>
    <span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h3 id="é¢å¤–çš„ä¸œè¥¿ğŸ™Œ"><a href="#é¢å¤–çš„ä¸œè¥¿ğŸ™Œ" class="headerlink" title="é¢å¤–çš„ä¸œè¥¿ğŸ™Œ"></a>é¢å¤–çš„ä¸œè¥¿ğŸ™Œ</h3><p>å¦‚æœä½ æƒ³æœ‰ä¸€ä¸ªæ—¥å¿—æ¥çŸ¥é“å“ªä¸ªæ˜¯å½“å‰çŠ¶æ€ï¼Œå“ªä¸ªæ˜¯ä¸‹ä¸€ä¸ªè¦æ·»åŠ çš„äº‹ä»¶ï¼Œä½ éœ€è¦ä¸€ä¸ª Bloc Observer ç±»ã€‚æ‚¨åº”è¯¥åˆ›å»ºæ­¤ç±»å¹¶å°†å…¶åˆå§‹åŒ–åˆ°æ‚¨çš„ä¸»ç±»ä¸­ã€‚</p><pre class="line-numbers language-dart" data-language="dart"><code class="language-dart"><span class="token keyword">class</span> <span class="token class-name">AppBlocObserver</span> <span class="token keyword">extends</span> <span class="token class-name">BlocObserver</span> <span class="token punctuation">{</span>
  <span class="token metadata function">@override</span>
  <span class="token keyword">void</span> <span class="token function">onChange</span><span class="token punctuation">(</span><span class="token class-name">BlocBase</span> bloc<span class="token punctuation">,</span> <span class="token class-name">Change</span> change<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">super</span><span class="token punctuation">.</span><span class="token function">onChange</span><span class="token punctuation">(</span>bloc<span class="token punctuation">,</span> change<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>bloc <span class="token operator">is</span> <span class="token class-name">Cubit</span><span class="token punctuation">)</span> <span class="token function">print</span><span class="token punctuation">(</span>change<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>

  <span class="token metadata function">@override</span>
  <span class="token keyword">void</span> <span class="token function">onTransition</span><span class="token punctuation">(</span><span class="token class-name">Bloc</span> bloc<span class="token punctuation">,</span> <span class="token class-name">Transition</span> transition<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">super</span><span class="token punctuation">.</span><span class="token function">onTransition</span><span class="token punctuation">(</span>bloc<span class="token punctuation">,</span> transition<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token function">print</span><span class="token punctuation">(</span>transition<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token comment">// main class</span>

<span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token keyword">async</span> <span class="token punctuation">{</span>
  <span class="token class-name">BlocOverrides</span><span class="token punctuation">.</span><span class="token function">runZoned</span><span class="token punctuation">(</span>
    <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=</span><span class="token operator">&gt;</span> <span class="token function">runApp</span><span class="token punctuation">(</span><span class="token keyword">const</span> <span class="token class-name">MyApp</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
    blocObserver<span class="token punctuation">:</span> <span class="token class-name">AppBlocObserver</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
  <span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h2 id="ç»“è®º"><a href="#ç»“è®º" class="headerlink" title="ç»“è®º"></a>ç»“è®º</h2><p>å¿…é¡»ä¸ºæ‚¨çš„Flutteråº”ç”¨ç¨‹åºä½¿ç”¨è‰¯å¥½çš„çŠ¶æ€ç®¡ç†ã€‚ Flutter bloc æ˜¯ä¸€ä¸ªå¾ˆå¥½çš„é€‰æ‹©ï¼Œä½ å¯ä»¥çœ‹åˆ°å®ƒä½¿ç”¨èµ·æ¥å¹¶ä¸å¤æ‚ï¼Œè€Œä¸”å¾ˆå®¹æ˜“ç†è§£å¦‚ä½•ä½¿ç”¨å®ƒçš„ä¸»è¦æ¦‚å¿µã€‚æ­¤å¤–ï¼Œå®ƒè¿˜ä¸ºæ‚¨æä¾›äº†å¾ˆå¤šç®¡ç†è§†å›¾æˆ–å°éƒ¨ä»¶çš„æ–¹æ³•ã€‚<br>å°±ä¸ªäººè€Œè¨€ï¼Œæˆ‘å–œæ¬¢åˆ›å»ºå…·æœ‰ç‰¹å®šé€»è¾‘çš„å°å—ï¼Œä»¥ä½¿æˆ‘çš„ä»£ç æ›´æ¸…æ™°å’Œå¯ç»´æŠ¤ï¼Œè€Œä¸æ˜¯ç®¡ç†å¾ˆå¤šäº‹æƒ…çš„å¤§å—ï¼Œä½†å¦‚æœä½ çš„é€»è¾‘éœ€è¦ä½ ä¹Ÿå¯ä»¥è¿™æ ·åšã€‚</p><p>æ„Ÿè°¢æ‚¨é˜…è¯»æœ¬æ–‡ï¼Œæˆ‘å¸Œæœ›æ‚¨ç°åœ¨å¯ä»¥æ›´å¥½åœ°ç†è§£ Flutter bloc çš„å·¥ä½œåŸç†ï¼Œå¹¶ä¸”èƒ½å¤Ÿæ¯«æ— é—®é¢˜åœ°å°†è¿™ä¸ªæƒŠäººçš„åº“æ·»åŠ åˆ°æ‚¨çš„é¡¹ç›®ä¸­ã€‚å¦‚æœè¿™å¯¹æ‚¨æœ‰å¸®åŠ©ï¼Œæˆ‘å°†éå¸¸æ„Ÿè°¢æ‚¨çš„åé¦ˆå’Œé¼“æŒï¼ğŸ‘</p></div><footer class="post-footer"><div class="reward-container"><div>ä½ çš„é¼“åŠ±æ˜¯æˆ‘æ›´æ–°çš„åŠ¨åŠ›ï¼</div><button>èµèµ</button><div class="post-reward"><div><img src="/images/wechatpay.png" alt="æœ¨è¾›å¿µåšæ¢“ å¾®ä¿¡"> <span>å¾®ä¿¡</span></div><div><img src="/images/alipay.png" alt="æœ¨è¾›å¿µåšæ¢“ æ”¯ä»˜å®"> <span>æ”¯ä»˜å®</span></div></div></div><div class="post-tags"><a href="/tags/Flutter/" rel="tag"># Flutter</a> <a href="/tags/Patterns/" rel="tag"># Patterns</a> <a href="/tags/Beginners/" rel="tag"># Beginners</a></div><div class="post-nav"><div class="post-nav-item"><a href="/Architecture-patterns-in-Flutter.html" rel="prev" title="Flutterä¸­çš„æ¶æ„æ¨¡å¼"><i class="fa fa-chevron-left"></i> Flutterä¸­çš„æ¶æ„æ¨¡å¼</a></div><div class="post-nav-item"><a href="/A-Deep-Dive-Into-Flutter-TextField.html" rel="next" title="æ·±å…¥äº†è§£ Flutter TextField">æ·±å…¥äº†è§£ Flutter TextField <i class="fa fa-chevron-right"></i></a></div></div></footer></article></div></div></main><footer class="footer"><div class="footer-inner"><div class="copyright">&copy; <span itemprop="copyrightYear">2025</span> <span class="with-love"><i class="fa fa-heart"></i> </span><span class="author" itemprop="copyrightHolder">æœ¨è¾›å¿µåšæ¢“</span></div><div class="wordcount"><span class="post-meta-item"><span class="post-meta-item-icon"><i class="fa fa-chart-line"></i> </span><span>ç«™ç‚¹æ€»å­—æ•°ï¼š</span> <span title="ç«™ç‚¹æ€»å­—æ•°">530k</span> </span><span class="post-meta-item"><span class="post-meta-item-icon"><i class="fa fa-coffee"></i> </span><span>ç«™ç‚¹é˜…è¯»æ—¶é•¿ &asymp;</span> <span title="ç«™ç‚¹é˜…è¯»æ—¶é•¿">8:02</span></span></div><div class="busuanzi-count"><span class="post-meta-item" id="busuanzi_container_site_uv"><span class="post-meta-item-icon"><i class="fa fa-user"></i> </span><span class="site-uv" title="æ€»è®¿å®¢é‡"><span id="busuanzi_value_site_uv"></span> </span></span><span class="post-meta-item" id="busuanzi_container_site_pv"><span class="post-meta-item-icon"><i class="fa fa-eye"></i> </span><span class="site-pv" title="æ€»è®¿é—®é‡"><span id="busuanzi_value_site_pv"></span></span></span></div><div class="powered-by">ç”± <a href="https://hexo.io/" rel="noopener" target="_blank">Hexo</a> & <a href="https://theme-next.js.org/" rel="noopener" target="_blank">NexT.Gemini</a> å¼ºåŠ›é©±åŠ¨</div></div></footer><script src="https://cdn.jsdelivr.net/npm/animejs@3.2.1/lib/anime.min.js" integrity="sha256-XL2inqUJaslATFnHdJOi9GfQ60on8Wx1C2H8DYiN1xY=" crossorigin="anonymous"></script><script src="https://cdn.jsdelivr.net/npm/medium-zoom@1.0.6/dist/medium-zoom.min.js" integrity="sha256-EdPgYcPk/IIrw7FYeuJQexva49pVRZNmt3LculEr7zM=" crossorigin="anonymous"></script><script src="/js/comments.js"></script><script src="/js/utils.js"></script><script src="/js/motion.js"></script><script src="/js/next-boot.js"></script><script async src="https://busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script><div class="moon-menu"><div class="moon-menu-items"><div id="moon-menu-item-back2bottom" class="moon-menu-item"><i class="fas fa-chevron-down"></i></div><div id="moon-menu-item-back2top" class="moon-menu-item"><i class="fas fa-chevron-up"></i></div></div><div class="moon-menu-button"><svg class="moon-menu-bg"><circle class="moon-menu-cricle" cx="50%" cy="50%" r="44%"></circle><circle class="moon-menu-border" cx="50%" cy="50%" r="48%"></circle></svg><div class="moon-menu-content"><div class="moon-menu-icon"><i class="fas fa-ellipsis-v"></i></div><div class="moon-menu-text"></div></div></div></div><script src="/js/injector.js"></script></body></html>